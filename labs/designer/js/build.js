/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// Backbone.Epoxy 1.2.0
// (c) 2013 Greg MacWilliam
// Freely distributed under the MIT license
// http://epoxyjs.org

/*
Copyright (c) 2010,2011,2012,2013 Morgan Roderick http://roderick.dk
License: MIT - http://mrgnrdrck.mit-license.org

https://github.com/mroderick/PubSubJS
*/

//! moment.js
//! version : 2.6.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*! KineticJS v5.1.0 2014-03-27 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/

/*!

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/*
Copyright (c) 2011-2013 @WalmartLabs

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to
deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.
*/

var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,i,r,s,a,o,c,h,l,u,d,f=e&&e.split("/"),p=g.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),a=t.length-1,g.nodeIdCompat&&_.test(t[a])&&(t[a]=t[a].replace(_,"")),t=f.concat(t),l=0;l<t.length;l+=1)if(d=t[l],"."===d)t.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(n=t.split("/"),l=n.length;l>0;l-=1){if(i=n.slice(0,l).join("/"),f)for(u=f.length;u>0;u-=1)if(r=p[f.slice(0,u).join("/")],r&&(r=r[i])){s=r,o=l;break}if(s)break;!c&&m&&m[i]&&(c=m[i],h=l)}!s&&c&&(s=c,o=h),s&&(n.splice(0,o,s),t=n.join("/"))}return t}function i(e,n){return function(){return l.apply(t,y.call(arguments,0).concat([e,n]))}}function r(t){return function(e){return n(e,t)}}function s(t){return function(e){f[t]=e}}function a(n){if(e(p,n)){var i=p[n];delete p[n],m[n]=!0,h.apply(t,i)}if(!e(f,n)&&!e(m,n))throw new Error("No "+n);return f[n]}function o(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function c(t){return function(){return g&&g.config&&g.config[t]||{}}}var h,l,u,d,f={},p={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice,_=/\.js$/;u=function(t,e){var i,s=o(t),c=s[0];return t=s[1],c&&(c=n(c,e),i=a(c)),c?t=i&&i.normalize?i.normalize(t,r(e)):n(t,e):(t=n(t,e),s=o(t),c=s[0],t=s[1],c&&(i=a(c))),{f:c?c+"!"+t:t,n:t,pr:c,p:i}},d={require:function(t){return i(t)},exports:function(t){var e=f[t];return"undefined"!=typeof e?e:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:c(t)}}},h=function(n,r,o,c){var h,l,g,v,y,_,w=[],b=typeof o;if(c=c||n,"undefined"===b||"function"===b){for(r=!r.length&&o.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=u(r[y],c),l=v.f,"require"===l)w[y]=d.require(n);else if("exports"===l)w[y]=d.exports(n),_=!0;else if("module"===l)h=w[y]=d.module(n);else if(e(f,l)||e(p,l)||e(m,l))w[y]=a(l);else{if(!v.p)throw new Error(n+" missing "+l);v.p.load(v.n,i(c,!0),s(l),{}),w[y]=f[l]}g=o?o.apply(f[n],w):void 0,n&&(h&&h.exports!==t&&h.exports!==f[n]?f[n]=h.exports:g===t&&_||(f[n]=g))}else n&&(f[n]=o)},requirejs=require=l=function(e,n,i,r,s){if("string"==typeof e)return d[e]?d[e](n):a(u(e,n).f);if(!e.splice){if(g=e,g.deps&&l(g.deps,g.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=s),r?h(t,e,n,i):setTimeout(function(){h(t,e,n,i)},4),l},l.config=function(t){return l(t)},requirejs._defined=f,define=function(t,n,i){n.splice||(i=n,n=[]),e(f,t)||e(p,t)||(p[t]=[t,n,i])},define.amd={jQuery:!0}}(),define("../bower_components/almond/almond",function(){}),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=te.type(t);return"function"===n||te.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(te.isFunction(e))return te.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return te.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(oe.test(e))return te.filter(e,t,n);e=te.filter(e,t)}return te.grep(t,function(t){return Y.call(e,t)>=0!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=pe[t]={};return te.each(t.match(fe)||[],function(t,n){e[n]=!0}),e}function a(){J.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),te.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=te.expando+Math.random()}function c(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(we,"-$1").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:_e.test(n)?te.parseJSON(n):n}catch(r){}ye.set(t,e,n)}else n=void 0;return n}function h(){return!0}function l(){return!1}function u(){try{return J.activeElement}catch(t){}}function d(t,e){return te.nodeName(t,"table")&&te.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Le.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,i=t.length;i>n;n++)ve.set(t[n],"globalEval",!e||ve.get(e[n],"globalEval"))}function m(t,e){var n,i,r,s,a,o,c,h;if(1===e.nodeType){if(ve.hasData(t)&&(s=ve.access(t),a=ve.set(e,s),h=s.events)){delete a.handle,a.events={};for(r in h)for(n=0,i=h[r].length;i>n;n++)te.event.add(e,r,h[r][n])}ye.hasData(t)&&(o=ye.access(t),c=te.extend({},o),ye.set(e,c))}}function v(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&te.nodeName(t,e)?te.merge([t],n):n}function y(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ce.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function _(e,n){var i=te(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle?t.getDefaultComputedStyle(i[0]).display:te.css(i[0],"display");return i.detach(),r}function w(t){var e=J,n=Ge[t];return n||(n=_(t,e),"none"!==n&&n||(Re=(Re||te("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Re[0].contentDocument,e.write(),e.close(),n=_(t,e),Re.detach()),Ge[t]=n),n}function b(t,e,n){var i,r,s,a,o=t.style;return n=n||$e(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||te.contains(t.ownerDocument,t)||(a=te.style(t,e)),Be.test(a)&&je.test(e)&&(i=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=n.width,o.width=i,o.minWidth=r,o.maxWidth=s)),void 0!==a?a+"":a}function x(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,r=ze.length;r--;)if(e=ze[r]+n,e in t)return e;return i}function C(t,e,n){var i=Ve.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function K(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=te.css(t,n+xe[s],!0,r)),i?("content"===n&&(a-=te.css(t,"padding"+xe[s],!0,r)),"margin"!==n&&(a-=te.css(t,"border"+xe[s]+"Width",!0,r))):(a+=te.css(t,"padding"+xe[s],!0,r),"padding"!==n&&(a+=te.css(t,"border"+xe[s]+"Width",!0,r)));return a}function k(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=$e(t),a="border-box"===te.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=b(t,e,s),(0>r||null==r)&&(r=t.style[e]),Be.test(r))return r;i=a&&(Q.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+K(t,e,n||(a?"border":"content"),i,s)+"px"}function T(t,e){for(var n,i,r,s=[],a=0,o=t.length;o>a;a++)i=t[a],i.style&&(s[a]=ve.get(i,"olddisplay"),n=i.style.display,e?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Se(i)&&(s[a]=ve.access(i,"olddisplay",w(i.nodeName)))):s[a]||(r=Se(i),(n&&"none"!==n||!r)&&ve.set(i,"olddisplay",r?n:te.css(i,"display"))));for(a=0;o>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[a]||"":"none"));return t}function P(t,e,n,i,r){return new P.prototype.init(t,e,n,i,r)}function F(){return setTimeout(function(){Xe=void 0}),Xe=te.now()}function D(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=xe[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function A(t,e,n){for(var i,r=(nn[e]||[]).concat(nn["*"]),s=0,a=r.length;a>s;s++)if(i=r[s].call(n,e,t))return i}function E(t,e,n){var i,r,s,a,o,c,h,l=this,u={},d=t.style,f=t.nodeType&&Se(t),p=ve.get(t,"fxshow");n.queue||(o=te._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,c=o.empty.fire,o.empty.fire=function(){o.unqueued||c()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--,te.queue(t,"fx").length||o.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],h=te.css(t,"display"),"none"===h&&(h=w(t.nodeName)),"inline"===h&&"none"===te.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",l.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],Je.exec(r)){if(delete e[i],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!p||void 0===p[i])continue;f=!0}u[i]=p&&p[i]||te.style(t,i)}if(!te.isEmptyObject(u)){p?"hidden"in p&&(f=p.hidden):p=ve.access(t,"fxshow",{}),s&&(p.hidden=!f),f?te(t).show():l.done(function(){te(t).hide()}),l.done(function(){var e;ve.remove(t,"fxshow");for(e in u)te.style(t,e,u[e])});for(i in u)a=A(f?p[i]:0,i,l),i in p||(p[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function N(t,e){var n,i,r,s,a;for(n in t)if(i=te.camelCase(n),r=e[i],s=t[n],te.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),a=te.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function M(t,e,n){var i,r,s=0,a=en.length,o=te.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var e=Xe||F(),n=Math.max(0,h.startTime+h.duration-e),i=n/h.duration||0,s=1-i,a=0,c=h.tweens.length;c>a;a++)h.tweens[a].run(s);return o.notifyWith(t,[h,s,n]),1>s&&c?n:(o.resolveWith(t,[h]),!1)},h=o.promise({elem:t,props:te.extend({},e),opts:te.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Xe||F(),duration:n.duration,tweens:[],createTween:function(e,n){var i=te.Tween(t,h.opts,e,n,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(i),i},stop:function(e){var n=0,i=e?h.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)h.tweens[n].run(1);return e?o.resolveWith(t,[h,e]):o.rejectWith(t,[h,e]),this}}),l=h.props;for(N(l,h.opts.specialEasing);a>s;s++)if(i=en[s].call(h,t,l,h.opts))return i;return te.map(l,A,h),te.isFunction(h.opts.start)&&h.opts.start.call(t,h),te.fx.timer(te.extend(c,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function O(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(fe)||[];if(te.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function L(t,e,n,i){function r(o){var c;return s[o]=!0,te.each(t[o]||[],function(t,o){var h=o(e,n,i);return"string"!=typeof h||a||s[h]?a?!(c=h):void 0:(e.dataTypes.unshift(h),r(h),!1)}),c}var s={},a=t===xn;return r(e.dataTypes[0])||!s["*"]&&r("*")}function H(t,e){var n,i,r=te.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&te.extend(!0,t,i),t}function I(t,e,n){for(var i,r,s,a,o=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function R(t,e,n,i){var r,s,a,o,c,h={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(s=l.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=l.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(a=h[c+" "+s]||h["* "+s],!a)for(r in h)if(o=r.split(" "),o[1]===s&&(a=h[c+" "+o[0]]||h["* "+o[0]])){a===!0?a=h[r]:h[r]!==!0&&(s=o[0],l.unshift(o[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(u){return{state:"parsererror",error:a?u:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}function G(t,e,n,i){var r;if(te.isArray(e))te.each(e,function(e,r){n||kn.test(t)?i(t,r):G(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==te.type(e))i(t,e);else for(r in e)G(t+"["+r+"]",e[r],n,i)}function j(t){return te.isWindow(t)?t:9===t.nodeType&&t.defaultView}var B=[],$=B.slice,U=B.concat,V=B.push,Y=B.indexOf,W={},q=W.toString,z=W.hasOwnProperty,X="".trim,Q={},J=t.document,Z="2.1.0",te=function(t,e){return new te.fn.init(t,e)},ee=/^-ms-/,ne=/-([\da-z])/gi,ie=function(t,e){return e.toUpperCase()};te.fn=te.prototype={jquery:Z,constructor:te,selector:"",length:0,toArray:function(){return $.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:$.call(this)},pushStack:function(t){var e=te.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return te.each(this,t,e)},map:function(t){return this.pushStack(te.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:B.sort,splice:B.splice},te.extend=te.fn.extend=function(){var t,e,n,i,r,s,a=arguments[0]||{},o=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[o]||{},o++),"object"==typeof a||te.isFunction(a)||(a={}),o===c&&(a=this,o--);c>o;o++)if(null!=(t=arguments[o]))for(e in t)n=a[e],i=t[e],a!==i&&(h&&i&&(te.isPlainObject(i)||(r=te.isArray(i)))?(r?(r=!1,s=n&&te.isArray(n)?n:[]):s=n&&te.isPlainObject(n)?n:{},a[e]=te.extend(h,s,i)):void 0!==i&&(a[e]=i));return a},te.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===te.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isPlainObject:function(t){if("object"!==te.type(t)||t.nodeType||te.isWindow(t))return!1;try{if(t.constructor&&!z.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?W[q.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=te.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ne,ie)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,s=0,a=t.length,o=n(t);if(i){if(o)for(;a>s&&(r=e.apply(t[s],i),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],i),r===!1)break}else if(o)for(;a>s&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:function(t){return null==t?"":X.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?te.merge(i,"string"==typeof t?[t]:t):V.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:Y.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],s=0,a=t.length,o=!n;a>s;s++)i=!e(t[s],s),i!==o&&r.push(t[s]);return r},map:function(t,e,i){var r,s=0,a=t.length,o=n(t),c=[];if(o)for(;a>s;s++)r=e(t[s],s,i),null!=r&&c.push(r);else for(s in t)r=e(t[s],s,i),null!=r&&c.push(r);return U.apply([],c)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),te.isFunction(t)?(i=$.call(arguments,2),r=function(){return t.apply(e||this,i.concat($.call(arguments)))},r.guid=t.guid=t.guid||te.guid++,r):void 0},now:Date.now,support:Q}),te.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){W["[object "+e+"]"]=e.toLowerCase()});var re=function(t){function e(t,e,n,i){var r,s,a,o,c,h,u,p,g,m;if((e?e.ownerDocument||e:G)!==E&&A(e),e=e||E,n=n||[],!t||"string"!=typeof t)return n;if(1!==(o=e.nodeType)&&9!==o)return[];if(M&&!i){if(r=ye.exec(t))if(a=r[1]){if(9===o){if(s=e.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(a))&&I(e,s)&&s.id===a)return n.push(s),n}else{if(r[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((a=r[3])&&S.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(a)),n}if(S.qsa&&(!O||!O.test(t))){if(p=u=R,g=e,m=9===o&&t,1===o&&"object"!==e.nodeName.toLowerCase()){for(h=d(t),(u=e.getAttribute("id"))?p=u.replace(we,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",c=h.length;c--;)h[c]=p+f(h[c]);g=_e.test(t)&&l(e.parentNode)||e,m=h.join(",")}if(m)try{return Z.apply(n,g.querySelectorAll(m)),n}catch(v){}finally{u||e.removeAttribute("id")}}}return b(t.replace(ce,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function r(t){var e=E.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=t.length;i--;)C.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function o(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function h(t){return i(function(e){return e=+e,i(function(n,i){for(var r,s=t([],n.length,e),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function l(t){return t&&typeof t.getElementsByTagName!==W&&t}function u(){}function d(t,n){var i,r,s,a,o,c,h,l=U[t+" "];if(l)return n?0:l.slice(0);for(o=t,c=[],h=C.preFilter;o;){(!i||(r=he.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),c.push(s=[])),i=!1,(r=le.exec(o))&&(i=r.shift(),s.push({value:i,type:r[0].replace(ce," ")}),o=o.slice(i.length));for(a in C.filter)!(r=pe[a].exec(o))||h[a]&&!(r=h[a](r))||(i=r.shift(),s.push({value:i,type:a,matches:r}),o=o.slice(i.length));if(!i)break}return n?o.length:o?e.error(t):U(t,c).slice(0)}function f(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,s=B++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s)}:function(e,n,a){var o,c,h=[j,s];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(c=e[R]||(e[R]={}),(o=c[i])&&o[0]===j&&o[1]===s)return h[2]=o[2];if(c[i]=h,h[2]=t(e,n,a))return!0}}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var s,a=[],o=0,c=t.length,h=null!=e;c>o;o++)(s=t[o])&&(!n||n(s,i,r))&&(a.push(s),h&&e.push(o));return a}function v(t,e,n,r,s,a){return r&&!r[R]&&(r=v(r)),s&&!s[R]&&(s=v(s,a)),i(function(i,a,o,c){var h,l,u,d=[],f=[],p=a.length,g=i||w(e||"*",o.nodeType?[o]:o,[]),v=!t||!i&&e?g:m(g,d,t,o,c),y=n?s||(i?t:p||r)?[]:a:v;if(n&&n(v,y,o,c),r)for(h=m(y,f),r(h,[],o,c),l=h.length;l--;)(u=h[l])&&(y[f[l]]=!(v[f[l]]=u));if(i){if(s||t){if(s){for(h=[],l=y.length;l--;)(u=y[l])&&h.push(v[l]=u);s(null,y=[],h,c)}for(l=y.length;l--;)(u=y[l])&&(h=s?ee.call(i,u):d[l])>-1&&(i[h]=!(a[h]=u))}}else y=m(y===a?y.splice(p,y.length):y),s?s(null,a,y,c):Z.apply(a,y)})}function y(t){for(var e,n,i,r=t.length,s=C.relative[t[0].type],a=s||C.relative[" "],o=s?1:0,c=p(function(t){return t===e},a,!0),h=p(function(t){return ee.call(e,t)>-1},a,!0),l=[function(t,n,i){return!s&&(i||n!==P)||((e=n).nodeType?c(t,n,i):h(t,n,i))}];r>o;o++)if(n=C.relative[t[o].type])l=[p(g(l),n)];else{if(n=C.filter[t[o].type].apply(null,t[o].matches),n[R]){for(i=++o;r>i&&!C.relative[t[i].type];i++);return v(o>1&&g(l),o>1&&f(t.slice(0,o-1).concat({value:" "===t[o-2].type?"*":""})).replace(ce,"$1"),n,i>o&&y(t.slice(o,i)),r>i&&y(t=t.slice(i)),r>i&&f(t))}l.push(n)}return g(l)}function _(t,n){var r=n.length>0,s=t.length>0,a=function(i,a,o,c,h){var l,u,d,f=0,p="0",g=i&&[],v=[],y=P,_=i||s&&C.find.TAG("*",h),w=j+=null==y?1:Math.random()||.1,b=_.length;for(h&&(P=a!==E&&a);p!==b&&null!=(l=_[p]);p++){if(s&&l){for(u=0;d=t[u++];)if(d(l,a,o)){c.push(l);break}h&&(j=w)}r&&((l=!d&&l)&&f--,i&&g.push(l))}if(f+=p,r&&p!==f){for(u=0;d=n[u++];)d(g,v,a,o);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=Q.call(c));v=m(v)}Z.apply(c,v),h&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(c)}return h&&(j=w,P=y),g};return r?i(a):a}function w(t,n,i){for(var r=0,s=n.length;s>r;r++)e(t,n[r],i);return i}function b(t,e,n,i){var r,s,a,o,c,h=d(t);if(!i&&1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&S.getById&&9===e.nodeType&&M&&C.relative[s[1].type]){if(e=(C.find.ID(a.matches[0].replace(be,xe),e)||[])[0],!e)return n;t=t.slice(s.shift().value.length)}for(r=pe.needsContext.test(t)?0:s.length;r--&&(a=s[r],!C.relative[o=a.type]);)if((c=C.find[o])&&(i=c(a.matches[0].replace(be,xe),_e.test(s[0].type)&&l(e.parentNode)||e))){if(s.splice(r,1),t=i.length&&f(s),!t)return Z.apply(n,i),n;break}}return T(t,h)(i,e,!M,n,_e.test(t)&&l(e.parentNode)||e),n}var x,S,C,K,k,T,P,F,D,A,E,N,M,O,L,H,I,R="sizzle"+-new Date,G=t.document,j=0,B=0,$=n(),U=n(),V=n(),Y=function(t,e){return t===e&&(D=!0),0},W="undefined",q=1<<31,z={}.hasOwnProperty,X=[],Q=X.pop,J=X.push,Z=X.push,te=X.slice,ee=X.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se=re.replace("w","w#"),ae="\\["+ie+"*("+re+")"+ie+"*(?:([*^$|!~]?=)"+ie+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+se+")|)|)"+ie+"*\\]",oe=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",ce=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),he=new RegExp("^"+ie+"*,"+ie+"*"),le=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(oe),fe=new RegExp("^"+se+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,we=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(X=te.call(G.childNodes),G.childNodes),X[G.childNodes.length].nodeType}catch(Se){Z={apply:X.length?function(t,e){J.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}S=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:G,i=n.defaultView;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,N=n.documentElement,M=!k(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){A()},!1):i.attachEvent&&i.attachEvent("onunload",function(){A()})),S.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),S.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),S.getElementsByClassName=ve.test(n.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),S.getById=r(function(t){return N.appendChild(t).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),S.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==W&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(be,xe);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(be,xe);return function(t){var n=typeof t.getAttributeNode!==W&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=S.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==W?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},C.find.CLASS=S.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==W&&M?e.getElementsByClassName(t):void 0},L=[],O=[],(S.qsa=ve.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&O.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||O.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(S.matchesSelector=ve.test(H=N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){S.disconnectedMatch=H.call(t,"div"),H.call(t,"[s!='']:x"),L.push("!=",oe)}),O=O.length&&new RegExp(O.join("|")),L=L.length&&new RegExp(L.join("|")),e=ve.test(N.compareDocumentPosition),I=e||ve.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=e?function(t,e){if(t===e)return D=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!S.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===G&&I(G,t)?-1:e===n||e.ownerDocument===G&&I(G,e)?1:F?ee.call(F,t)-ee.call(F,e):0:4&i?-1:1)}:function(t,e){if(t===e)return D=!0,0;var i,r=0,s=t.parentNode,o=e.parentNode,c=[t],h=[e];if(!s||!o)return t===n?-1:e===n?1:s?-1:o?1:F?ee.call(F,t)-ee.call(F,e):0;if(s===o)return a(t,e);for(i=t;i=i.parentNode;)c.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;c[r]===h[r];)r++;return r?a(c[r],h[r]):c[r]===G?-1:h[r]===G?1:0},n):E},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==E&&A(t),n=n.replace(ue,"='$1']"),!(!S.matchesSelector||!M||L&&L.test(n)||O&&O.test(n)))try{var i=H.call(t,n);if(i||S.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,E,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==E&&A(t),I(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==E&&A(t);var n=C.attrHandle[e.toLowerCase()],i=n&&z.call(C.attrHandle,e.toLowerCase())?n(t,e,!M):void 0;return void 0!==i?i:S.attributes||!M?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!S.detectDuplicates,F=!S.sortStable&&t.slice(0),t.sort(Y),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return F=null,t},K=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=K(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=K(e);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(be,xe),t[3]=(t[4]||t[5]||"").replace(be,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:n&&de.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(be,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==W&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var s=e.attr(r,t);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),a="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var h,l,u,d,f,p,g=s!==a?"nextSibling":"previousSibling",m=e.parentNode,v=o&&e.nodeName.toLowerCase(),y=!c&&!o;if(m){if(s){for(;g;){for(u=e;u=u[g];)if(o?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(l=m[R]||(m[R]={}),h=l[t]||[],f=h[0]===j&&h[1],d=h[0]===j&&h[2],u=f&&m.childNodes[f];u=++f&&u&&u[g]||(d=f=0)||p.pop();)if(1===u.nodeType&&++d&&u===e){l[t]=[j,f,d];break}}else if(y&&(h=(e[R]||(e[R]={}))[t])&&h[0]===j)d=h[1];else for(;(u=++f&&u&&u[g]||(d=f=0)||p.pop())&&((o?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[R]||(u[R]={}))[t]=[j,d]),u!==e)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var r,s=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[R]?s(n):s.length>1?(r=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=s(t,n),a=r.length;a--;)i=ee.call(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return s(t,0,r)}):s}},pseudos:{not:i(function(t){var e=[],n=[],r=T(t.replace(ce,"$1"));return r[R]?i(function(t,e,n,i){for(var s,a=r(t,null,i,[]),o=t.length;o--;)(s=a[o])&&(t[o]=!(e[o]=s))}):function(t,i,s){return e[0]=t,r(e,null,s,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||K(e)).indexOf(t)>-1}}),lang:i(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(be,xe).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0
},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[0>n?n+e:n]}),even:h(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=o(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=c(x);return u.prototype=C.filters=C.pseudos,C.setFilters=new u,T=e.compile=function(t,e){var n,i=[],r=[],s=V[t+" "];if(!s){for(e||(e=d(t)),n=e.length;n--;)s=y(e[n]),s[R]?i.push(s):r.push(s);s=V(t,_(r,i))}return s},S.sortStable=R.split("").sort(Y).join("")===R,S.detectDuplicates=!!D,A(),S.sortDetached=r(function(t){return 1&t.compareDocumentPosition(E.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),S.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);te.find=re,te.expr=re.selectors,te.expr[":"]=te.expr.pseudos,te.unique=re.uniqueSort,te.text=re.getText,te.isXMLDoc=re.isXML,te.contains=re.contains;var se=te.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^.[^:#\[\.,]*$/;te.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?te.find.matchesSelector(i,t)?[i]:[]:te.find.matches(t,te.grep(e,function(t){return 1===t.nodeType}))},te.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(te(t).filter(function(){for(e=0;n>e;e++)if(te.contains(r[e],this))return!0}));for(e=0;n>e;e++)te.find(t,r[e],i);return i=this.pushStack(n>1?te.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&se.test(t)?te(t):t||[],!1).length}});var ce,he=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,le=te.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:he.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ce).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof te?e[0]:e,te.merge(this,te.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),ae.test(n[1])&&te.isPlainObject(e))for(n in e)te.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return i=J.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):te.isFunction(t)?"undefined"!=typeof ce.ready?ce.ready(t):t(te):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),te.makeArray(t,this))};le.prototype=te.fn,ce=te(J);var ue=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};te.extend({dir:function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&te(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),te.fn.extend({has:function(t){var e=te(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(te.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,s=[],a=se.test(t)||"string"!=typeof t?te(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&te.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?te.unique(s):s)},index:function(t){return t?"string"==typeof t?Y.call(te(t),this[0]):Y.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(te.unique(te.merge(this.get(),te(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),te.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return te.dir(t,"parentNode")},parentsUntil:function(t,e,n){return te.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return te.dir(t,"nextSibling")},prevAll:function(t){return te.dir(t,"previousSibling")},nextUntil:function(t,e,n){return te.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return te.dir(t,"previousSibling",n)},siblings:function(t){return te.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return te.sibling(t.firstChild)},contents:function(t){return t.contentDocument||te.merge([],t.childNodes)}},function(t,e){te.fn[t]=function(n,i){var r=te.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=te.filter(i,r)),this.length>1&&(de[t]||te.unique(r),ue.test(t)&&r.reverse()),this.pushStack(r)}});var fe=/\S+/g,pe={};te.Callbacks=function(t){t="string"==typeof t?pe[t]||s(t):te.extend({},t);var e,n,i,r,a,o,c=[],h=!t.once&&[],l=function(s){for(e=t.memory&&s,n=!0,o=r||0,r=0,a=c.length,i=!0;c&&a>o;o++)if(c[o].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,c&&(h?h.length&&l(h.shift()):e?c=[]:u.disable())},u={add:function(){if(c){var n=c.length;!function s(e){te.each(e,function(e,n){var i=te.type(n);"function"===i?t.unique&&u.has(n)||c.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),i?a=c.length:e&&(r=n,l(e))}return this},remove:function(){return c&&te.each(arguments,function(t,e){for(var n;(n=te.inArray(e,c,n))>-1;)c.splice(n,1),i&&(a>=n&&a--,o>=n&&o--)}),this},has:function(t){return t?te.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=h=e=void 0,this},disabled:function(){return!c},lock:function(){return h=void 0,e||u.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!c||n&&!h||(e=e||[],e=[t,e.slice?e.slice():e],i?h.push(e):l(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},te.extend({Deferred:function(t){var e=[["resolve","done",te.Callbacks("once memory"),"resolved"],["reject","fail",te.Callbacks("once memory"),"rejected"],["notify","progress",te.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return te.Deferred(function(n){te.each(e,function(e,s){var a=te.isFunction(t[e])&&t[e];r[s[1]](function(){var t=a&&a.apply(this,arguments);t&&te.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?te.extend(t,i):i}},r={};return i.pipe=i.then,te.each(e,function(t,s){var a=s[2],o=s[3];i[s[1]]=a.add,o&&a.add(function(){n=o},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=$.call(arguments),a=s.length,o=1!==a||t&&te.isFunction(t.promise)?a:0,c=1===o?t:te.Deferred(),h=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?$.call(arguments):r,i===e?c.notifyWith(n,i):--o||c.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)s[r]&&te.isFunction(s[r].promise)?s[r].promise().done(h(r,i,s)).fail(c.reject).progress(h(r,n,e)):--o;return o||c.resolveWith(i,s),c.promise()}});var ge;te.fn.ready=function(t){return te.ready.promise().done(t),this},te.extend({isReady:!1,readyWait:1,holdReady:function(t){t?te.readyWait++:te.ready(!0)},ready:function(t){(t===!0?--te.readyWait:te.isReady)||(te.isReady=!0,t!==!0&&--te.readyWait>0||(ge.resolveWith(J,[te]),te.fn.trigger&&te(J).trigger("ready").off("ready")))}}),te.ready.promise=function(e){return ge||(ge=te.Deferred(),"complete"===J.readyState?setTimeout(te.ready):(J.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),ge.promise(e)},te.ready.promise();var me=te.access=function(t,e,n,i,r,s,a){var o=0,c=t.length,h=null==n;if("object"===te.type(n)){r=!0;for(o in n)te.access(t,e,o,n[o],!0,s,a)}else if(void 0!==i&&(r=!0,te.isFunction(i)||(a=!0),h&&(a?(e.call(t,i),e=null):(h=e,e=function(t,e,n){return h.call(te(t),n)})),e))for(;c>o;o++)e(t[o],n,a?i:i.call(t[o],o,e(t[o],n)));return r?t:h?e.call(t):c?e(t[0],n):s};te.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},o.uid=1,o.accepts=te.acceptData,o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=o.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,te.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),s=this.cache[r];if("string"==typeof e)s[e]=n;else if(te.isEmptyObject(s))te.extend(this.cache[r],e);else for(i in e)s[i]=e[i];return s},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,te.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,s=this.key(t),a=this.cache[s];if(void 0===e)this.cache[s]={};else{te.isArray(e)?i=e.concat(e.map(te.camelCase)):(r=te.camelCase(e),e in a?i=[e,r]:(i=r,i=i in a?[i]:i.match(fe)||[])),n=i.length;for(;n--;)delete a[i[n]]}},hasData:function(t){return!te.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ve=new o,ye=new o,_e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;te.extend({hasData:function(t){return ye.hasData(t)||ve.hasData(t)},data:function(t,e,n){return ye.access(t,e,n)},removeData:function(t,e){ye.remove(t,e)},_data:function(t,e,n){return ve.access(t,e,n)},_removeData:function(t,e){ve.remove(t,e)}}),te.fn.extend({data:function(t,e){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(r=ye.get(s),1===s.nodeType&&!ve.get(s,"hasDataAttrs"))){for(n=a.length;n--;)i=a[n].name,0===i.indexOf("data-")&&(i=te.camelCase(i.slice(5)),c(s,i,r[i]));ve.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){ye.set(this,t)}):me(this,function(e){var n,i=te.camelCase(t);if(s&&void 0===e){if(n=ye.get(s,t),void 0!==n)return n;if(n=ye.get(s,i),void 0!==n)return n;if(n=c(s,i,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,i);ye.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&ye.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ye.remove(this,t)})}}),te.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=ve.get(t,e),n&&(!i||te.isArray(n)?i=ve.access(t,e,te.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=te.queue(t,e),i=n.length,r=n.shift(),s=te._queueHooks(t,e),a=function(){te.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ve.get(t,n)||ve.access(t,n,{empty:te.Callbacks("once memory").add(function(){ve.remove(t,[e+"queue",n])})})}}),te.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?te.queue(this[0],t):void 0===e?this:this.each(function(){var n=te.queue(this,t,e);te._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&te.dequeue(this,t)})},dequeue:function(t){return this.each(function(){te.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=te.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=ve.get(s[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(e)}});var be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],Se=function(t,e){return t=e||t,"none"===te.css(t,"display")||!te.contains(t.ownerDocument,t)},Ce=/^(?:checkbox|radio)$/i;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div"));e.innerHTML="<input type='radio' checked='checked' name='t'/>",Q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ke="undefined";Q.focusinBubbles="onfocusin"in t;var ke=/^key/,Te=/^(?:mouse|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,Fe=/^([^.]*)(?:\.(.+)|)$/;te.event={global:{},add:function(t,e,n,i,r){var s,a,o,c,h,l,u,d,f,p,g,m=ve.get(t);if(m)for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=te.guid++),(c=m.events)||(c=m.events={}),(a=m.handle)||(a=m.handle=function(e){return typeof te!==Ke&&te.event.triggered!==e.type?te.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(fe)||[""],h=e.length;h--;)o=Fe.exec(e[h])||[],f=g=o[1],p=(o[2]||"").split(".").sort(),f&&(u=te.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=te.event.special[f]||{},l=te.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&te.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=c[f])||(d=c[f]=[],d.delegateCount=0,u.setup&&u.setup.call(t,i,p,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),u.add&&(u.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,l):d.push(l),te.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,a,o,c,h,l,u,d,f,p,g,m=ve.hasData(t)&&ve.get(t);if(m&&(c=m.events)){for(e=(e||"").match(fe)||[""],h=e.length;h--;)if(o=Fe.exec(e[h])||[],f=g=o[1],p=(o[2]||"").split(".").sort(),f){for(u=te.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,d=c[f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)l=d[s],!r&&g!==l.origType||n&&n.guid!==l.guid||o&&!o.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(d.splice(s,1),l.selector&&d.delegateCount--,u.remove&&u.remove.call(t,l));a&&!d.length&&(u.teardown&&u.teardown.call(t,p,m.handle)!==!1||te.removeEvent(t,f,m.handle),delete c[f])}else for(f in c)te.event.remove(t,f+e[h],n,i,!0);te.isEmptyObject(c)&&(delete m.handle,ve.remove(t,"events"))}},trigger:function(e,n,i,r){var s,a,o,c,h,l,u,d=[i||J],f=z.call(e,"type")?e.type:e,p=z.call(e,"namespace")?e.namespace.split("."):[];if(a=o=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Pe.test(f+te.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),h=f.indexOf(":")<0&&"on"+f,e=e[te.expando]?e:new te.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:te.makeArray(n,[e]),u=te.event.special[f]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!te.isWindow(i)){for(c=u.delegateType||f,Pe.test(c+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),o=a;o===(i.ownerDocument||J)&&d.push(o.defaultView||o.parentWindow||t)}for(s=0;(a=d[s++])&&!e.isPropagationStopped();)e.type=s>1?c:u.bindType||f,l=(ve.get(a,"events")||{})[e.type]&&ve.get(a,"handle"),l&&l.apply(a,n),l=h&&a[h],l&&l.apply&&te.acceptData(a)&&(e.result=l.apply(a,n),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||u._default&&u._default.apply(d.pop(),n)!==!1||!te.acceptData(i)||h&&te.isFunction(i[f])&&!te.isWindow(i)&&(o=i[h],o&&(i[h]=null),te.event.triggered=f,i[f](),te.event.triggered=void 0,o&&(i[h]=o)),e.result}},dispatch:function(t){t=te.event.fix(t);var e,n,i,r,s,a=[],o=$.call(arguments),c=(ve.get(this,"events")||{})[t.type]||[],h=te.event.special[t.type]||{};if(o[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=te.event.handlers.call(this,t,c),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,i=((te.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,s,a=[],o=e.delegateCount,c=t.target;if(o&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(i=[],n=0;o>n;n++)s=e[n],r=s.selector+" ",void 0===i[r]&&(i[r]=s.needsContext?te(r,this).index(c)>=0:te.find(r,this,null,[c]).length),i[r]&&i.push(s);i.length&&a.push({elem:c,handlers:i})}return o<e.length&&a.push({elem:this,handlers:e.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||J,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[te.expando])return t;var e,n,i,r=t.type,s=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Te.test(r)?this.mouseHooks:ke.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new te.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&te.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return te.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=te.extend(new te.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?te.event.trigger(r,null,e):te.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},te.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},te.Event=function(t,e){return this instanceof te.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.getPreventDefault&&t.getPreventDefault()?h:l):this.type=t,e&&te.extend(this,e),this.timeStamp=t&&t.timeStamp||te.now(),void(this[te.expando]=!0)):new te.Event(t,e)},te.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()}},te.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){te.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==i&&!te.contains(i,r))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),Q.focusinBubbles||te.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){te.event.simulate(e,t.target,te.event.fix(t),!0)};te.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=ve.access(i,e);r||i.addEventListener(t,n,!0),ve.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ve.access(i,e)-1;r?ve.access(i,e,r):(i.removeEventListener(t,n,!0),ve.remove(i,e))}}}),te.fn.extend({on:function(t,e,n,i,r){var s,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=l;else if(!i)return this;return 1===r&&(s=i,i=function(t){return te().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=te.guid++)),this.each(function(){te.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,te(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=l),this.each(function(){te.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){te.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?te.event.trigger(t,e,n,!0):void 0}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ae=/<([\w:]+)/,Ee=/<|&#?\w+;/,Ne=/<(?:script|style|link)/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^$|\/(?:java|ecma)script/i,Le=/^true\/(.*)/,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,te.extend({clone:function(t,e,n){var i,r,s,a,o=t.cloneNode(!0),c=te.contains(t.ownerDocument,t);if(!(Q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||te.isXMLDoc(t)))for(a=v(o),s=v(t),i=0,r=s.length;r>i;i++)y(s[i],a[i]);if(e)if(n)for(s=s||v(t),a=a||v(o),i=0,r=s.length;r>i;i++)m(s[i],a[i]);else m(t,o);return a=v(o,"script"),a.length>0&&g(a,!c&&v(t,"script")),o},buildFragment:function(t,e,n,i){for(var r,s,a,o,c,h,l=e.createDocumentFragment(),u=[],d=0,f=t.length;f>d;d++)if(r=t[d],r||0===r)if("object"===te.type(r))te.merge(u,r.nodeType?[r]:r);else if(Ee.test(r)){for(s=s||l.appendChild(e.createElement("div")),a=(Ae.exec(r)||["",""])[1].toLowerCase(),o=Ie[a]||Ie._default,s.innerHTML=o[1]+r.replace(De,"<$1></$2>")+o[2],h=o[0];h--;)s=s.lastChild;te.merge(u,s.childNodes),s=l.firstChild,s.textContent=""}else u.push(e.createTextNode(r));for(l.textContent="",d=0;r=u[d++];)if((!i||-1===te.inArray(r,i))&&(c=te.contains(r.ownerDocument,r),s=v(l.appendChild(r),"script"),c&&g(s),n))for(h=0;r=s[h++];)Oe.test(r.type||"")&&n.push(r);return l},cleanData:function(t){for(var e,n,i,r,s,a,o=te.event.special,c=0;void 0!==(n=t[c]);c++){if(te.acceptData(n)&&(s=n[ve.expando],s&&(e=ve.cache[s]))){if(i=Object.keys(e.events||{}),i.length)for(a=0;void 0!==(r=i[a]);a++)o[r]?te.event.remove(n,r):te.removeEvent(n,r,e.handle);ve.cache[s]&&delete ve.cache[s]}delete ye.cache[n[ye.expando]]}}}),te.fn.extend({text:function(t){return me(this,function(t){return void 0===t?te.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?te.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||te.cleanData(v(n)),n.parentNode&&(e&&te.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(te.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return te.clone(this,t,e)})},html:function(t){return me(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ne.test(t)&&!Ie[(Ae.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(De,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(te.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,te.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=U.apply([],t);var n,i,r,s,a,o,c=0,h=this.length,l=this,u=h-1,d=t[0],g=te.isFunction(d);if(g||h>1&&"string"==typeof d&&!Q.checkClone&&Me.test(d))return this.each(function(n){var i=l.eq(n);g&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(h&&(n=te.buildFragment(t,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=te.map(v(n,"script"),f),s=r.length;h>c;c++)a=n,c!==u&&(a=te.clone(a,!0,!0),s&&te.merge(r,v(a,"script"))),e.call(this[c],a,c);if(s)for(o=r[r.length-1].ownerDocument,te.map(r,p),c=0;s>c;c++)a=r[c],Oe.test(a.type||"")&&!ve.access(a,"globalEval")&&te.contains(o,a)&&(a.src?te._evalUrl&&te._evalUrl(a.src):te.globalEval(a.textContent.replace(He,"")))}return this}}),te.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){te.fn[t]=function(t){for(var n,i=[],r=te(t),s=r.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),te(r[a])[e](n),V.apply(i,n.get());return this.pushStack(i)}});var Re,Ge={},je=/^margin/,Be=new RegExp("^("+be+")(?!px)[a-z%]+$","i"),$e=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",s.appendChild(a);var e=t.getComputedStyle(o,null);n="1%"!==e.top,i="4px"===e.width,s.removeChild(a)}var n,i,r="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=J.documentElement,a=J.createElement("div"),o=J.createElement("div");o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(o),t.getComputedStyle&&te.extend(Q,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},reliableMarginRight:function(){var e,n=o.appendChild(J.createElement("div"));return n.style.cssText=o.style.cssText=r,n.style.marginRight=n.style.width="0",o.style.width="1px",s.appendChild(a),e=!parseFloat(t.getComputedStyle(n,null).marginRight),s.removeChild(a),o.innerHTML="",e}})}(),te.swap=function(t,e,n,i){var r,s,a={};for(s in e)a[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=a[s];return r};var Ue=/^(none|table(?!-c[ea]).+)/,Ve=new RegExp("^("+be+")(.*)$","i"),Ye=new RegExp("^([+-])=("+be+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:0,fontWeight:400},ze=["Webkit","O","Moz","ms"];te.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=b(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,o=te.camelCase(e),c=t.style;return e=te.cssProps[o]||(te.cssProps[o]=S(c,o)),a=te.cssHooks[e]||te.cssHooks[o],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:c[e]:(s=typeof n,"string"===s&&(r=Ye.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(te.css(t,e)),s="number"),void(null!=n&&n===n&&("number"!==s||te.cssNumber[o]||(n+="px"),Q.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(c[e]="",c[e]=n))))}},css:function(t,e,n,i){var r,s,a,o=te.camelCase(e);return e=te.cssProps[o]||(te.cssProps[o]=S(t.style,o)),a=te.cssHooks[e]||te.cssHooks[o],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=b(t,e,i)),"normal"===r&&e in qe&&(r=qe[e]),""===n||n?(s=parseFloat(r),n===!0||te.isNumeric(s)?s||0:r):r}}),te.each(["height","width"],function(t,e){te.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&Ue.test(te.css(t,"display"))?te.swap(t,We,function(){return k(t,e,i)}):k(t,e,i):void 0},set:function(t,n,i){var r=i&&$e(t);return C(t,n,i?K(t,e,i,"border-box"===te.css(t,"boxSizing",!1,r),r):0)}}}),te.cssHooks.marginRight=x(Q.reliableMarginRight,function(t,e){return e?te.swap(t,{display:"inline-block"},b,[t,"marginRight"]):void 0}),te.each({margin:"",padding:"",border:"Width"},function(t,e){te.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+xe[i]+e]=s[i]||s[i-2]||s[0];return r}},je.test(t)||(te.cssHooks[t+e].set=C)}),te.fn.extend({css:function(t,e){return me(this,function(t,e,n){var i,r,s={},a=0;if(te.isArray(e)){for(i=$e(t),r=e.length;r>a;a++)s[e[a]]=te.css(t,e[a],!1,i);return s}return void 0!==n?te.style(t,e,n):te.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Se(this)?te(this).show():te(this).hide()})}}),te.Tween=P,P.prototype={constructor:P,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(te.cssNumber[n]?"":"px")},cur:function(){var t=P.propHooks[this.prop];return t&&t.get?t.get(this):P.propHooks._default.get(this)},run:function(t){var e,n=P.propHooks[this.prop];return this.pos=e=this.options.duration?te.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=te.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){te.fx.step[t.prop]?te.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[te.cssProps[t.prop]]||te.cssHooks[t.prop])?te.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now
}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},te.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},te.fx=P.prototype.init,te.fx.step={};var Xe,Qe,Je=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+be+")([a-z%]*)$","i"),tn=/queueHooks$/,en=[E],nn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=Ze.exec(e),s=r&&r[3]||(te.cssNumber[t]?"":"px"),a=(te.cssNumber[t]||"px"!==s&&+i)&&Ze.exec(te.css(n.elem,t)),o=1,c=20;if(a&&a[3]!==s){s=s||a[3],r=r||[],a=+i||1;do o=o||".5",a/=o,te.style(n.elem,t,a+s);while(o!==(o=n.cur()/i)&&1!==o&&--c)}return r&&(a=n.start=+a||+i||0,n.unit=s,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};te.Animation=te.extend(M,{tweener:function(t,e){te.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],nn[n]=nn[n]||[],nn[n].unshift(e)},prefilter:function(t,e){e?en.unshift(t):en.push(t)}}),te.speed=function(t,e,n){var i=t&&"object"==typeof t?te.extend({},t):{complete:n||!n&&e||te.isFunction(t)&&t,duration:t,easing:n&&e||e&&!te.isFunction(e)&&e};return i.duration=te.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in te.fx.speeds?te.fx.speeds[i.duration]:te.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){te.isFunction(i.old)&&i.old.call(this),i.queue&&te.dequeue(this,i.queue)},i},te.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Se).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=te.isEmptyObject(t),s=te.speed(e,n,i),a=function(){var e=M(this,te.extend({},t),s);(r||ve.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=te.timers,a=ve.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&tn.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));(e||!n)&&te.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ve.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=te.timers,a=i?i.length:0;for(n.finish=!0,te.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),te.each(["toggle","show","hide"],function(t,e){var n=te.fn[e];te.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(D(e,!0),t,i,r)}}),te.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){te.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),te.timers=[],te.fx.tick=function(){var t,e=0,n=te.timers;for(Xe=te.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||te.fx.stop(),Xe=void 0},te.fx.timer=function(t){te.timers.push(t),t()?te.fx.start():te.timers.pop()},te.fx.interval=13,te.fx.start=function(){Qe||(Qe=setInterval(te.fx.tick,te.fx.interval))},te.fx.stop=function(){clearInterval(Qe),Qe=null},te.fx.speeds={slow:600,fast:200,_default:400},te.fn.delay=function(t,e){return t=te.fx?te.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),n=e.appendChild(J.createElement("option"));t.type="checkbox",Q.checkOn=""!==t.value,Q.optSelected=n.selected,e.disabled=!0,Q.optDisabled=!n.disabled,t=J.createElement("input"),t.value="t",t.type="radio",Q.radioValue="t"===t.value}();var rn,sn,an=te.expr.attrHandle;te.fn.extend({attr:function(t,e){return me(this,te.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){te.removeAttr(this,t)})}}),te.extend({attr:function(t,e,n){var i,r,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===Ke?te.prop(t,e,n):(1===s&&te.isXMLDoc(t)||(e=e.toLowerCase(),i=te.attrHooks[e]||(te.expr.match.bool.test(e)?sn:rn)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=te.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void te.removeAttr(t,e)):void 0},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(fe);if(s&&1===t.nodeType)for(;n=s[r++];)i=te.propFix[n]||n,te.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!Q.radioValue&&"radio"===e&&te.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),sn={set:function(t,e,n){return e===!1?te.removeAttr(t,n):t.setAttribute(n,n),n}},te.each(te.expr.match.bool.source.match(/\w+/g),function(t,e){var n=an[e]||te.find.attr;an[e]=function(t,e,i){var r,s;return i||(s=an[e],an[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,an[e]=s),r}});var on=/^(?:input|select|textarea|button)$/i;te.fn.extend({prop:function(t,e){return me(this,te.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[te.propFix[t]||t]})}}),te.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!te.isXMLDoc(t),s&&(e=te.propFix[e]||e,r=te.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||on.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Q.optSelected||(te.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),te.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){te.propFix[this.toLowerCase()]=this});var cn=/[\t\r\n\f]/g;te.fn.extend({addClass:function(t){var e,n,i,r,s,a,o="string"==typeof t&&t,c=0,h=this.length;if(te.isFunction(t))return this.each(function(e){te(this).addClass(t.call(this,e,this.className))});if(o)for(e=(t||"").match(fe)||[];h>c;c++)if(n=this[c],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(cn," "):" ")){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=te.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,r,s,a,o=0===arguments.length||"string"==typeof t&&t,c=0,h=this.length;if(te.isFunction(t))return this.each(function(e){te(this).removeClass(t.call(this,e,this.className))});if(o)for(e=(t||"").match(fe)||[];h>c;c++)if(n=this[c],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(cn," "):"")){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=t?te.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(te.isFunction(t)?function(n){te(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,r=te(this),s=t.match(fe)||[];e=s[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===Ke||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(cn," ").indexOf(e)>=0)return!0;return!1}});var hn=/\r/g;te.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=te.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,te(this).val()):t,null==r?r="":"number"==typeof r?r+="":te.isArray(r)&&(r=te.map(r,function(t){return null==t?"":t+""})),e=te.valHooks[this.type]||te.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=te.valHooks[r.type]||te.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(hn,""):null==n?"":n)):void 0}}),te.extend({valHooks:{select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,a=s?null:[],o=s?r+1:i.length,c=0>r?o:s?r:0;o>c;c++)if(n=i[c],!(!n.selected&&c!==r||(Q.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&te.nodeName(n.parentNode,"optgroup"))){if(e=te(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=te.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=te.inArray(te(i).val(),s)>=0)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),te.each(["radio","checkbox"],function(){te.valHooks[this]={set:function(t,e){return te.isArray(e)?t.checked=te.inArray(te(t).val(),e)>=0:void 0}},Q.checkOn||(te.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),te.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){te.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),te.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ln=te.now(),un=/\?/;te.parseJSON=function(t){return JSON.parse(t+"")},te.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(i){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&te.error("Invalid XML: "+t),e};var dn,fn,pn=/#.*$/,gn=/([?&])_=[^&]*/,mn=/^(.*?):[ \t]*([^\r\n]*)$/gm,vn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yn=/^(?:GET|HEAD)$/,_n=/^\/\//,wn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bn={},xn={},Sn="*/".concat("*");try{fn=location.href}catch(Cn){fn=J.createElement("a"),fn.href="",fn=fn.href}dn=wn.exec(fn.toLowerCase())||[],te.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fn,type:"GET",isLocal:vn.test(dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":te.parseJSON,"text xml":te.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?H(H(t,te.ajaxSettings),e):H(te.ajaxSettings,t)},ajaxPrefilter:O(bn),ajaxTransport:O(xn),ajax:function(t,e){function n(t,e,n,a){var c,l,v,y,w,x=e;2!==_&&(_=2,o&&clearTimeout(o),i=void 0,s=a||"",b.readyState=t>0?4:0,c=t>=200&&300>t||304===t,n&&(y=I(u,b,n)),y=R(u,y,b,c),c?(u.ifModified&&(w=b.getResponseHeader("Last-Modified"),w&&(te.lastModified[r]=w),w=b.getResponseHeader("etag"),w&&(te.etag[r]=w)),204===t||"HEAD"===u.type?x="nocontent":304===t?x="notmodified":(x=y.state,l=y.data,v=y.error,c=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),b.status=t,b.statusText=(e||x)+"",c?p.resolveWith(d,[l,x,b]):p.rejectWith(d,[b,x,v]),b.statusCode(m),m=void 0,h&&f.trigger(c?"ajaxSuccess":"ajaxError",[b,u,c?l:v]),g.fireWith(d,[b,x]),h&&(f.trigger("ajaxComplete",[b,u]),--te.active||te.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,s,a,o,c,h,l,u=te.ajaxSetup({},e),d=u.context||u,f=u.context&&(d.nodeType||d.jquery)?te(d):te.event,p=te.Deferred(),g=te.Callbacks("once memory"),m=u.statusCode||{},v={},y={},_=0,w="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=mn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return _||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)m[e]=[m[e],t[e]];else b.always(t[b.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),n(0,e),this}};if(p.promise(b).complete=g.add,b.success=b.done,b.error=b.fail,u.url=((t||u.url||fn)+"").replace(pn,"").replace(_n,dn[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=te.trim(u.dataType||"*").toLowerCase().match(fe)||[""],null==u.crossDomain&&(c=wn.exec(u.url.toLowerCase()),u.crossDomain=!(!c||c[1]===dn[1]&&c[2]===dn[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(dn[3]||("http:"===dn[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=te.param(u.data,u.traditional)),L(bn,u,e,b),2===_)return b;h=u.global,h&&0===te.active++&&te.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!yn.test(u.type),r=u.url,u.hasContent||(u.data&&(r=u.url+=(un.test(r)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=gn.test(r)?r.replace(gn,"$1_="+ln++):r+(un.test(r)?"&":"?")+"_="+ln++)),u.ifModified&&(te.lastModified[r]&&b.setRequestHeader("If-Modified-Since",te.lastModified[r]),te.etag[r]&&b.setRequestHeader("If-None-Match",te.etag[r])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&b.setRequestHeader("Content-Type",u.contentType),b.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Sn+"; q=0.01":""):u.accepts["*"]);for(l in u.headers)b.setRequestHeader(l,u.headers[l]);if(u.beforeSend&&(u.beforeSend.call(d,b,u)===!1||2===_))return b.abort();w="abort";for(l in{success:1,error:1,complete:1})b[l](u[l]);if(i=L(xn,u,e,b)){b.readyState=1,h&&f.trigger("ajaxSend",[b,u]),u.async&&u.timeout>0&&(o=setTimeout(function(){b.abort("timeout")},u.timeout));try{_=1,i.send(v,n)}catch(x){if(!(2>_))throw x;n(-1,x)}}else n(-1,"No Transport");return b},getJSON:function(t,e,n){return te.get(t,e,n,"json")},getScript:function(t,e){return te.get(t,void 0,e,"script")}}),te.each(["get","post"],function(t,e){te[e]=function(t,n,i,r){return te.isFunction(n)&&(r=r||i,i=n,n=void 0),te.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),te.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){te.fn[e]=function(t){return this.on(e,t)}}),te._evalUrl=function(t){return te.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},te.fn.extend({wrapAll:function(t){var e;return te.isFunction(t)?this.each(function(e){te(this).wrapAll(t.call(this,e))}):(this[0]&&(e=te(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(te.isFunction(t)?function(e){te(this).wrapInner(t.call(this,e))}:function(){var e=te(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=te.isFunction(t);return this.each(function(n){te(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){te.nodeName(this,"body")||te(this).replaceWith(this.childNodes)}).end()}}),te.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},te.expr.filters.visible=function(t){return!te.expr.filters.hidden(t)};var Kn=/%20/g,kn=/\[\]$/,Tn=/\r?\n/g,Pn=/^(?:submit|button|image|reset|file)$/i,Fn=/^(?:input|select|textarea|keygen)/i;te.param=function(t,e){var n,i=[],r=function(t,e){e=te.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=te.ajaxSettings&&te.ajaxSettings.traditional),te.isArray(t)||t.jquery&&!te.isPlainObject(t))te.each(t,function(){r(this.name,this.value)});else for(n in t)G(n,t[n],e,r);return i.join("&").replace(Kn,"+")},te.fn.extend({serialize:function(){return te.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=te.prop(this,"elements");return t?te.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!te(this).is(":disabled")&&Fn.test(this.nodeName)&&!Pn.test(t)&&(this.checked||!Ce.test(t))}).map(function(t,e){var n=te(this).val();return null==n?null:te.isArray(n)?te.map(n,function(t){return{name:e.name,value:t.replace(Tn,"\r\n")}}):{name:e.name,value:n.replace(Tn,"\r\n")}}).get()}}),te.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Dn=0,An={},En={0:200,1223:204},Nn=te.ajaxSettings.xhr();t.ActiveXObject&&te(t).on("unload",function(){for(var t in An)An[t]()}),Q.cors=!!Nn&&"withCredentials"in Nn,Q.ajax=Nn=!!Nn,te.ajaxTransport(function(t){var e;return Q.cors||Nn&&!t.crossDomain?{send:function(n,i){var r,s=t.xhr(),a=++Dn;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)s.setRequestHeader(r,n[r]);e=function(t){return function(){e&&(delete An[a],e=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?i(s.status,s.statusText):i(En[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=e(),s.onerror=e("error"),e=An[a]=e("abort"),s.send(t.hasContent&&t.data||null)},abort:function(){e&&e()}}:void 0}),te.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return te.globalEval(t),t}}}),te.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),te.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=te("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Mn=[],On=/(=)\?(?=&|$)|\?\?/;te.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Mn.pop()||te.expando+"_"+ln++;return this[t]=!0,t}}),te.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,a,o=e.jsonp!==!1&&(On.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&On.test(e.data)&&"data");return o||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=te.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(On,"$1"+r):e.jsonp!==!1&&(e.url+=(un.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||te.error(r+" was not called"),a[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},i.always(function(){t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,Mn.push(r)),a&&te.isFunction(s)&&s(a[0]),a=s=void 0}),"script"):void 0}),te.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||J;var i=ae.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=te.buildFragment([t],e,r),r&&r.length&&te(r).remove(),te.merge([],i.childNodes))};var Ln=te.fn.load;te.fn.load=function(t,e,n){if("string"!=typeof t&&Ln)return Ln.apply(this,arguments);var i,r,s,a=this,o=t.indexOf(" ");return o>=0&&(i=t.slice(o),t=t.slice(0,o)),te.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&te.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){s=arguments,a.html(i?te("<div>").append(te.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,s||[t.responseText,e,t])}),this},te.expr.filters.animated=function(t){return te.grep(te.timers,function(e){return t===e.elem}).length};var Hn=t.document.documentElement;te.offset={setOffset:function(t,e,n){var i,r,s,a,o,c,h,l=te.css(t,"position"),u=te(t),d={};"static"===l&&(t.style.position="relative"),o=u.offset(),s=te.css(t,"top"),c=te.css(t,"left"),h=("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1,h?(i=u.position(),a=i.top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(c)||0),te.isFunction(e)&&(e=e.call(t,n,o)),null!=e.top&&(d.top=e.top-o.top+a),null!=e.left&&(d.left=e.left-o.left+r),"using"in e?e.using.call(t,d):u.css(d)}},te.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){te.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;return s?(e=s.documentElement,te.contains(e,i)?(typeof i.getBoundingClientRect!==Ke&&(r=i.getBoundingClientRect()),n=j(s),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===te.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),te.nodeName(t[0],"html")||(i=t.offset()),i.top+=te.css(t[0],"borderTopWidth",!0),i.left+=te.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-te.css(n,"marginTop",!0),left:e.left-i.left-te.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Hn;t&&!te.nodeName(t,"html")&&"static"===te.css(t,"position");)t=t.offsetParent;return t||Hn})}}),te.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;te.fn[e]=function(r){return me(this,function(e,r,s){var a=j(e);return void 0===s?a?a[n]:e[r]:void(a?a.scrollTo(i?t.pageXOffset:s,i?s:t.pageYOffset):e[r]=s)},e,r,arguments.length,null)}}),te.each(["top","left"],function(t,e){te.cssHooks[e]=x(Q.pixelPosition,function(t,n){return n?(n=b(t,e),Be.test(n)?te(t).position()[e]+"px":n):void 0})}),te.each({Height:"height",Width:"width"},function(t,e){te.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){te.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return me(this,function(e,n,i){var r;return te.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?te.css(e,n,a):te.style(e,n,i,a)},e,s?i:void 0,s,null)}})}),te.fn.size=function(){return this.length},te.fn.andSelf=te.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return te});var In=t.jQuery,Rn=t.$;return te.noConflict=function(e){return t.$===te&&(t.$=Rn),e&&t.jQuery===te&&(t.jQuery=In),te},typeof e===Ke&&(t.jQuery=t.$=te),te}),function(t){define("director",[],function(){return function(){return function(t){function e(t,e,n,i){var r,s=0,a=0,o=0,n=(n||"(").toString(),i=(i||")").toString();for(r=0;r<t.length;r++){var c=t[r];if(c.indexOf(n,s)>c.indexOf(i,s)||~c.indexOf(n,s)&&!~c.indexOf(i,s)||!~c.indexOf(n,s)&&~c.indexOf(i,s)){if(a=c.indexOf(n,s),o=c.indexOf(i,s),~a&&!~o||!~a&&~o){var h=t.slice(0,(r||1)+1).join(e);t=[h].concat(t.slice((r||1)+1))}s=(o>a?o:a)+1,r=0}else s=0}return t}function n(t,e){for(var n,r=0,s="";n=t.substr(r).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)r=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),s+=t.substr(0,n.index)+n[0];t=s+=t.substr(r);var a,o,c=t.match(/:([^\/]+)/gi);if(c){o=c.length;for(var h=0;o>h;h++)a=c[h],t="::"===a.slice(0,2)?a.slice(1):t.replace(a,i(a,e))}return t}function i(t,e,n){n=t;for(var i in e)if(e.hasOwnProperty(i)&&(n=e[i](t),n!==t))break;return n===t?"([._a-zA-Z0-9-]+)":n}function r(t,e,n){if(!t.length)return n();var i=0;!function r(){e(t[i],function(e){e||e===!1?(n(e),n=function(){}):(i+=1,i===t.length?n():r())})}()}function a(t){for(var e=[],n=0,i=t.length;i>n;n++)e=e.concat(t[n]);return e}function o(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n,t)===!1)return}function c(){return""===h.hash||"#"===h.hash}Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,s=this.length;s>r;r++)r in this&&t.call(e,n=this[r],r,this)&&i.push(n);return i}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var h=document.location,l={mode:"modern",hash:h.hash,history:!1,check:function(){var t=h.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function n(t){for(var e=0,n=u.listeners.length;n>e;e++)u.listeners[e](t)}var i=this;if(this.history=e,u.listeners||(u.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&i.check()}),window.setInterval(function(){i.check()},50),this.onHashChanged=n,this.mode="legacy"}return u.listeners.push(t),this.mode},destroy:function(t){if(u&&u.listeners)for(var e=u.listeners,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):h.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var t=this._hash;return t!=h.hash&&(h.hash=t),this},onHashChanged:function(){}},u=t.Router=function(t){return this instanceof u?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new u(t)};u.prototype.init=function(t){var e=this;if(this.handler=function(t){var n=t&&t.newURL||window.location.hash,i=e.history===!0?e.getPath():n.replace(/.*#/,"");e.dispatch("on","/"===i.charAt(0)?i:"/"+i)},l.init(this.handler,this.history),this.history===!1)c()&&t?h.hash=t:c()||e.dispatch("on","/"+h.hash.replace(/^(#\/|#|\/)/,""));else{var n=c()&&t?t:c()?null:h.hash.replace(/^#/,"");n&&window.history.replaceState({},document.title,n),(n||this.run_in_init===!0)&&this.handler()}return this},u.prototype.explode=function(){var t=this.history===!0?this.getPath():h.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},u.prototype.setRoute=function(t,e,n){var i=this.explode();return"number"==typeof t&&"string"==typeof e?i[t]=e:"string"==typeof n?i.splice(t,e,s):i=[t],l.setHash(i.join("/")),i},u.prototype.insertEx=function(t,e,n,i){return"once"===t&&(t="on",n=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(n)),this._insert(t,e,n,i)},u.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var n=this.explode();e=n.indexOf(t)}else e=this.explode();return e},u.prototype.destroy=function(){return l.destroy(this.handler),this},u.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t},u.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},u.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var n=new RegExp(t,"g");this.params[t]=function(t){return t.replace(n,e.source||e)}},u.prototype.on=u.prototype.route=function(t,n,i){var r=this;return!i&&"function"==typeof n&&(i=n,n=t,t="on"),Array.isArray(n)?n.forEach(function(e){r.on(t,e,i)}):(n.source&&(n=n.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){r.on(t.toLowerCase(),n,i)}):(n=n.split(new RegExp(this.delimiter)),n=e(n,this.delimiter),this.insert(t,this.scope.concat(n),i),void 0))},u.prototype.dispatch=function(t,e,n){function i(){s.last=a.after,s.invoke(s.runlist(a),s,n)}var r,s=this,a=this.traverse(t,e,this.routes,""),o=this._invoked;return this._invoked=!0,a&&0!==a.length?("forward"===this.recurse&&(a=a.reverse()),r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],r&&r.length>0&&o?(this.async?this.invoke(r,this,i):(this.invoke(r,this),i()),!0):(i(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},n),!1)},u.prototype.invoke=function(t,e,n){var i,s=this;this.async?(i=function(n,s){return Array.isArray(n)?r(n,i,s):void("function"==typeof n&&n.apply(e,t.captures.concat(s)))},r(t,i,function(){n&&n.apply(e,arguments)})):(i=function(n){return Array.isArray(n)?o(n,i):"function"==typeof n?n.apply(e,t.captures||[]):void("string"==typeof n&&s.resource&&s.resource[n].apply(e,t.captures||[]))},o(t,i))},u.prototype.traverse=function(t,e,n,i,r){function s(t){function e(t){for(var n=t.length-1;n>=0;n--)Array.isArray(t[n])?(e(t[n]),0===t[n].length&&t.splice(n,1)):r(t[n])||t.splice(n,1)}function n(t){for(var e=[],i=0;i<t.length;i++)e[i]=Array.isArray(t[i])?n(t[i]):t[i];return e}if(!r)return t;var i=n(t);return i.matched=t.matched,i.captures=t.captures,i.after=t.after.filter(r),e(i),i}var a,o,c,h,l=[];if(e===this.delimiter&&n[t])return h=[[n.before,n[t]].filter(Boolean)],h.after=[n.after].filter(Boolean),h.matched=!0,h.captures=[],s(h);for(var u in n)if(n.hasOwnProperty(u)&&(!this._methods[u]||this._methods[u]&&"object"==typeof n[u]&&!Array.isArray(n[u]))){if(a=o=i+this.delimiter+u,this.strict||(o+="["+this.delimiter+"]?"),c=e.match(new RegExp("^"+o)),!c)continue;if(c[0]&&c[0]==e&&n[u][t])return h=[[n[u].before,n[u][t]].filter(Boolean)],h.after=[n[u].after].filter(Boolean),h.matched=!0,h.captures=c.slice(1),this.recurse&&n===this.routes&&(h.push([n.before,n.on].filter(Boolean)),h.after=h.after.concat([n.after].filter(Boolean))),s(h);if(h=this.traverse(t,e,n[u],a),h.matched)return h.length>0&&(l=l.concat(h)),this.recurse&&(l.push([n[u].before,n[u].on].filter(Boolean)),h.after=h.after.concat([n[u].after].filter(Boolean)),n===this.routes&&(l.push([n.before,n.on].filter(Boolean)),h.after=h.after.concat([n.after].filter(Boolean)))),l.matched=!0,l.captures=h.captures,l.after=h.after,s(l)}return!1},u.prototype.insert=function(t,e,i,r){var s,a,o,c,h;if(e=e.filter(function(t){return t&&t.length>0}),r=r||this.routes,h=e.shift(),/\:|\*/.test(h)&&!/\\d|\\w/.test(h)&&(h=n(h,this.params)),e.length>0)return r[h]=r[h]||{},this.insert(t,e,i,r[h]);if(h||e.length||r!==this.routes){if(a=typeof r[h],o=Array.isArray(r[h]),r[h]&&!o&&"object"==a)switch(s=typeof r[h][t]){case"function":return void(r[h][t]=[r[h][t],i]);case"object":return void r[h][t].push(i);case"undefined":return void(r[h][t]=i)}else if("undefined"==a)return c={},c[t]=i,r[h]=c,void 0;throw new Error("Invalid route context: "+a)}switch(s=typeof r[t]){case"function":return void(r[t]=[r[t],i]);case"object":return void r[t].push(i);case"undefined":return void(r[t]=i)}},u.prototype.extend=function(t){function e(t){i._methods[t]=!0,i[t]=function(){var e=1===arguments.length?[t,""]:[t];i.on.apply(i,e.concat(Array.prototype.slice.call(arguments)))}}var n,i=this,r=t.length;for(n=0;r>n;n++)e(t[n])},u.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(a(t)):a(t);
return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},u.prototype.mount=function(t,n){function i(n,i){var s=n,a=n.split(r.delimiter),o=typeof t[n],c=""===a[0]||!r._methods[a[0]],h=c?"on":s;c&&(s=s.slice((s.match(new RegExp("^"+r.delimiter))||[""])[0].length),a.shift()),c&&"object"===o&&!Array.isArray(t[n])?(i=i.concat(a),r.mount(t[n],i)):(c&&(i=i.concat(s.split(r.delimiter)),i=e(i,r.delimiter)),r.insert(h,i,t[n]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var r=this;n=n||[],Array.isArray(n)||(n=n.split(r.delimiter));for(var s in t)t.hasOwnProperty(s)&&i(s,n.slice(0))}}}("object"==typeof exports?exports:window),t.Router=Router}.apply(t,arguments)})}(this),define("cs",{load:function(t){throw new Error("Dynamic load not allowed: "+t)}}),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,a=i.push,o=i.slice,c=i.concat,h=r.toString,l=r.hasOwnProperty,u=i.forEach,d=i.map,f=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,_=i.lastIndexOf,w=Array.isArray,b=Object.keys,x=s.bind,S=function(t){return t instanceof S?t:this instanceof S?void(this._wrapped=t):new S(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):t._=S,S.VERSION="1.6.0";var C=S.each=S.forEach=function(t,e,i){if(null==t)return t;if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var a=S.keys(t),r=0,s=a.length;s>r;r++)if(e.call(i,t[a[r]],a[r],t)===n)return;return t};S.map=S.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(C(t,function(t,r,s){i.push(e.call(n,t,r,s))}),i)};var K="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=S.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,s,a){r?n=e.call(i,n,t,s,a):(n=t,r=!0)}),!r)throw new TypeError(K);return n},S.reduceRight=S.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=S.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var a=S.keys(t);s=a.length}if(C(t,function(o,c,h){c=a?a[--s]:--s,r?n=e.call(i,n,t[c],c,h):(n=t[c],r=!0)}),!r)throw new TypeError(K);return n},S.find=S.detect=function(t,e,n){var i;return k(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},S.filter=S.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,r,s){e.call(n,t,r,s)&&i.push(t)}),i)},S.reject=function(t,e,n){return S.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},S.every=S.all=function(t,e,i){e||(e=S.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(C(t,function(t,s,a){return(r=r&&e.call(i,t,s,a))?void 0:n}),!!r)};var k=S.some=S.any=function(t,e,i){e||(e=S.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(C(t,function(t,s,a){return r||(r=e.call(i,t,s,a))?n:void 0}),!!r)};S.contains=S.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):k(t,function(t){return t===e})},S.invoke=function(t,e){var n=o.call(arguments,2),i=S.isFunction(e);return S.map(t,function(t){return(i?e:t[e]).apply(t,n)})},S.pluck=function(t,e){return S.map(t,S.property(e))},S.where=function(t,e){return S.filter(t,S.matches(e))},S.findWhere=function(t,e){return S.find(t,S.matches(e))},S.max=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return C(t,function(t,s,a){var o=e?e.call(n,t,s,a):t;o>r&&(i=t,r=o)}),i},S.min=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return C(t,function(t,s,a){var o=e?e.call(n,t,s,a):t;r>o&&(i=t,r=o)}),i},S.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=S.random(n++),i[n-1]=i[e],i[e]=t}),i},S.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=S.values(t)),t[S.random(t.length-1)]):S.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return null==t?S.identity:S.isFunction(t)?t:S.property(t)};S.sortBy=function(t,e,n){return e=T(e),S.pluck(S.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,i){var r={};return n=T(n),C(e,function(s,a){var o=n.call(i,s,a,e);t(r,o,s)}),r}};S.groupBy=P(function(t,e,n){S.has(t,e)?t[e].push(n):t[e]=[n]}),S.indexBy=P(function(t,e,n){t[e]=n}),S.countBy=P(function(t,e){S.has(t,e)?t[e]++:t[e]=1}),S.sortedIndex=function(t,e,n,i){n=T(n);for(var r=n.call(i,e),s=0,a=t.length;a>s;){var o=s+a>>>1;n.call(i,t[o])<r?s=o+1:a=o}return s},S.toArray=function(t){return t?S.isArray(t)?o.call(t):t.length===+t.length?S.map(t,S.identity):S.values(t):[]},S.size=function(t){return null==t?0:t.length===+t.length?t.length:S.keys(t).length},S.first=S.head=S.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:o.call(t,0,e)},S.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},S.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},S.rest=S.tail=S.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},S.compact=function(t){return S.filter(t,S.identity)};var F=function(t,e,n){return e&&S.every(t,S.isArray)?c.apply(n,t):(C(t,function(t){S.isArray(t)||S.isArguments(t)?e?a.apply(n,t):F(t,e,n):n.push(t)}),n)};S.flatten=function(t,e){return F(t,e,[])},S.without=function(t){return S.difference(t,o.call(arguments,1))},S.partition=function(t,e){var n=[],i=[];return C(t,function(t){(e(t)?n:i).push(t)}),[n,i]},S.uniq=S.unique=function(t,e,n,i){S.isFunction(e)&&(i=n,n=e,e=!1);var r=n?S.map(t,n,i):t,s=[],a=[];return C(r,function(n,i){(e?i&&a[a.length-1]===n:S.contains(a,n))||(a.push(n),s.push(t[i]))}),s},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(t){var e=o.call(arguments,1);return S.filter(S.uniq(t),function(t){return S.every(e,function(e){return S.contains(e,t)})})},S.difference=function(t){var e=c.apply(i,o.call(arguments,1));return S.filter(t,function(t){return!S.contains(e,t)})},S.zip=function(){for(var t=S.max(S.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=S.pluck(arguments,""+n);return e},S.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},S.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},S.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},S.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=new Array(i);i>r;)s[r++]=t,t+=n;return s};var D=function(){};S.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(o.call(arguments)));D.prototype=t.prototype;var r=new D;D.prototype=null;var s=t.apply(r,n.concat(o.call(arguments)));return Object(s)===s?s:r}},S.partial=function(t){var e=o.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,s=i.length;s>r;r++)i[r]===S&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},S.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,e){var n={};return e||(e=S.identity),function(){var i=e.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},S.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},S.defer=function(t){return S.delay.apply(S,[t,1].concat(o.call(arguments,1)))},S.throttle=function(t,e,n){var i,r,s,a=null,o=0;n||(n={});var c=function(){o=n.leading===!1?0:S.now(),a=null,s=t.apply(i,r),i=r=null};return function(){var h=S.now();o||n.leading!==!1||(o=h);var l=e-(h-o);return i=this,r=arguments,0>=l?(clearTimeout(a),a=null,o=h,s=t.apply(i,r),i=r=null):a||n.trailing===!1||(a=setTimeout(c,l)),s}},S.debounce=function(t,e,n){var i,r,s,a,o,c=function(){var h=S.now()-a;e>h?i=setTimeout(c,e-h):(i=null,n||(o=t.apply(s,r),s=r=null))};return function(){s=this,r=arguments,a=S.now();var h=n&&!i;return i||(i=setTimeout(c,e)),h&&(o=t.apply(s,r),s=r=null),o}},S.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},S.wrap=function(t,e){return S.partial(e,t)},S.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},S.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},S.keys=function(t){if(!S.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)S.has(t,n)&&e.push(n);return e},S.values=function(t){for(var e=S.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},S.pairs=function(t){for(var e=S.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},S.invert=function(t){for(var e={},n=S.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},S.functions=S.methods=function(t){var e=[];for(var n in t)S.isFunction(t[n])&&e.push(n);return e.sort()},S.extend=function(t){return C(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},S.pick=function(t){var e={},n=c.apply(i,o.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},S.omit=function(t){var e={},n=c.apply(i,o.call(arguments,1));for(var r in t)S.contains(n,r)||(e[r]=t[r]);return e},S.defaults=function(t){return C(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t};var A=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var r=h.call(t);if(r!=h.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var a=t.constructor,o=e.constructor;if(a!==o&&!(S.isFunction(a)&&a instanceof a&&S.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var c=0,l=!0;if("[object Array]"==r){if(c=t.length,l=c==e.length)for(;c--&&(l=A(t[c],e[c],n,i)););}else{for(var u in t)if(S.has(t,u)&&(c++,!(l=S.has(e,u)&&A(t[u],e[u],n,i))))break;if(l){for(u in e)if(S.has(e,u)&&!c--)break;l=!c}}return n.pop(),i.pop(),l};S.isEqual=function(t,e){return A(t,e,[],[])},S.isEmpty=function(t){if(null==t)return!0;if(S.isArray(t)||S.isString(t))return 0===t.length;for(var e in t)if(S.has(t,e))return!1;return!0},S.isElement=function(t){return!(!t||1!==t.nodeType)},S.isArray=w||function(t){return"[object Array]"==h.call(t)},S.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){S["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(t){return!(!t||!S.has(t,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(t){return"function"==typeof t}),S.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},S.isNaN=function(t){return S.isNumber(t)&&t!=+t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return l.call(t,e)},S.noConflict=function(){return t._=e,this},S.identity=function(t){return t},S.constant=function(t){return function(){return t}},S.property=function(t){return function(e){return e[t]}},S.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},S.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},S.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},S.now=Date.now||function(){return(new Date).getTime()};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};E.unescape=S.invert(E.escape);var N={escape:new RegExp("["+S.keys(E.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(E.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(t){S[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return E[t][e]})}}),S.result=function(t,e){if(null==t)return void 0;var n=t[e];return S.isFunction(n)?n.call(t):n},S.mixin=function(t){C(S.functions(t),function(e){var n=S[e]=t[e];S.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),I.call(this,n.apply(S,t))}})};var M=0;S.uniqueId=function(t){var e=++M+"";return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(t,e,n){var i;n=S.defaults({},n,S.templateSettings);var r=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(r,function(e,n,i,r,o){return a+=t.slice(s,o).replace(H,function(t){return"\\"+L[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),s=o+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(e)return i(e,S);var c=function(t){return i.call(this,t,S)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c},S.chain=function(t){return S(t).chain()};var I=function(t){return this._chain?S(t).chain():t};S.mixin(S),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];S.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],I.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];S.prototype[t]=function(){return I.call(this,e.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,r){t.Backbone=e(t,r,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){{var r=t.Backbone,s=[],a=(s.push,s.slice);s.splice}e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!h(this,"once",t,[e,i])||!e)return this;var r=this,s=n.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var r,s,a,o,c,l,u,d;if(!this._events||!h(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(o=t?[t]:n.keys(this._events),c=0,l=o.length;l>c;c++)if(t=o[c],a=this._events[t]){if(this._events[t]=r=[],e||i)for(u=0,d=a.length;d>u;u++)s=a[u],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&r.push(s);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var s=!e&&!i;i||"object"!=typeof e||(i=this),t&&((r={})[t._listenId]=t);for(var a in r)t=r[a],t.off(e,i,this),(s||n.isEmpty(t._events))&&delete this._listeningTo[a];return this}},c=/\s+/,h=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var s=n.split(c),a=0,o=s.length;o>a;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,a,o);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=n.uniqueId("l"));return s[a]=e,r||"object"!=typeof i||(r=this),e[t](i,r,this),this}}),o.bind=o.on,o.unbind=o.off,n.extend(e,o);var d=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var r,s,a,o,c,h,l,u;if(null==t)return this;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;a=i.unset,c=i.silent,o=[],h=this._changing,this._changing=!0,h||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],n.isEqual(u[r],e)||o.push(r),n.isEqual(l[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete u[r]:u[r]=e;if(!c){o.length&&(this._pending=i);for(var d=0,f=o.length;f>d;d++)this.trigger("change:"+o[d],this,u[o[d]],i)}if(h)return this;if(!c)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)n.isEqual(r[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,i){var r,s,a,o=this.attributes;if(null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},o,r)),void 0===i.parse&&(i.parse=!0);var c=this,h=i.success;return i.success=function(t){c.attributes=o;var e=c.parse(t,i);return i.wait&&(e=n.extend(r||{},e)),n.isObject(e)&&!c.set(e,i)?!1:(h&&h(c,t,i),void c.trigger("sync",c,t,i))},H(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=r),a=this.sync(s,this,i),r&&i.wait&&(this.attributes=o),a},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&r(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;H(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,m))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var r,s,a,o;for(r=0,s=t.length;s>r;r++)o=t[r]=this.get(t[r]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,g),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var r,s,a,o,c,h,l,u=e.at,f=this.model,p=this.comparator&&null==u&&e.sort!==!1,m=n.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},w=e.add,b=e.merge,x=e.remove,S=!p&&w&&x?[]:!1;for(r=0,s=t.length;s>r;r++){if(c=t[r]||{},a=c instanceof d?o=c:c[f.prototype.idAttribute||"id"],h=this.get(a))x&&(_[h.cid]=!0),b&&(c=c===o?o.attributes:c,e.parse&&(c=h.parse(c,e)),h.set(c,e),p&&!l&&h.hasChanged(m)&&(l=!0)),t[r]=h;else if(w){if(o=t[r]=this._prepareModel(c,e),!o)continue;v.push(o),this._addReference(o,e)}o=h||o,!S||!o.isNew()&&_[o.id]||S.push(o),_[o.id]=!0}if(x){for(r=0,s=this.length;s>r;++r)_[(o=this.models[r]).cid]||y.push(o);y.length&&this.remove(y,e)}if(v.length||S&&S.length)if(p&&(l=!0),this.length+=v.length,null!=u)for(r=0,s=v.length;s>r;r++)this.models.splice(u+r,0,v[r]);else{S&&(this.models.length=0);var C=S||v;for(r=0,s=C.length;s>r;r++)this.models.push(C[r])}if(l&&this.sort({silent:!0}),!e.silent){for(r=0,s=v.length;s>r;r++)(o=v[r]).trigger("add",o,this,e);(l||S&&S.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,r=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),r&&r(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){p.prototype[t]=function(e,i){var r=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,r,i)}});var _=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var r=e.match(w),s=r[1],a=r[2];i=n.bind(i,this),s+=".delegateEvents"+this.cid,""===a?this.$el.on(s,i):this.$el.on(s,a,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,r){var s=S[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||L()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){a.type="POST",r.emulateJSON&&(a.data._method=s);var o=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,c,r),c};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},K=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,T=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,o,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return e.history.route(t,function(n){var a=s._extractParameters(t,n);s.execute(r,a),s.trigger.apply(s,["route:"+i].concat(a)),s.trigger("route",i,a),e.history.trigger("route",s,i,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(K,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var F=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,E=/msie [\w.]+/,N=/\/$/,M=/#.*$/;F.started=!1,n.extend(F.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(N,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(D,"")},start:function(t){if(F.started)throw new Error("Backbone.history has already been started");F.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,s=E.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(A,"/"),s&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;
var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!F.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(M,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new F;var O=function(t,e){var i,r=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,t&&n.extend(i.prototype,t),i.__super__=r.prototype,i};d.extend=p.extend=C.extend=_.extend=F.extend=O;var L=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),function(t,e){"undefined"!=typeof exports?module.exports=e(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define("epoxy",["underscore","backbone"],e):e(t._,t.Backbone)}(this,function(t,e){function n(t,e,n){return t._super.prototype[e].apply(t,n)}function i(e,n,r,s){for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];if(e.hasComputed(a)){if(s.length&&t.contains(s,a))throw"Recursive setter: "+s.join(" > ");o=e.c()[a].set(o),o&&w(o)&&(r=i(e,o,r,s.concat(a)))}else r[a]=o}return r}function r(e,n,i,r){i=i||{},i.get&&_(i.get)&&(i._get=i.get),i.set&&_(i.set)&&(i._set=i.set),delete i.get,delete i.set,t.extend(this,i),this.model=e,this.name=n,this.deps=this.deps||[],r||this.init()}function s(e){return _(e)?e():(w(e)&&(e=t.clone(e),t.each(e,function(t,n){e[n]=s(t)})),e)}function a(t){return _(t)?{set:t}:t}function o(e){return function(){var n=arguments,i=_(e)?e:e.get,r=e.set;return function(e){return y(e)?i.apply(this,t.map(n,s)):n[0]((r?r:i).call(this,e))}}}function c(e,n,i,r,s){return(e=t.result(e,r))?(x(e)?(s=s?s+"_":"",n["$"+r]=function(){return E&&E.push([e,"change"]),e},t.each(e.toJSON({computed:!0}),function(t,r){n[s+r]=function(t){return h(e,r,t,i)}})):S(e)&&(n["$"+r]=function(){return E&&E.push([e,"reset add remove sort update"]),e}),e):void 0}function h(e,n,i,r){if(E&&E.push([e,"change:"+n]),!y(i)){if(!w(i)||b(i)||t.isDate(i)){var s=i;i={},i[n]=s}return r&&r.save?e.save(i,r):e.set(i,r)}return e.get(n)}function l(t,e){if(":el"===e)return t.$el;var n=t.$(e);return t.$el.is(e)&&(n=n.add(t.$el)),n}function u(e,n,i,r,s,a){try{var o=P[i]||(P[i]=Function("$f","$c","with($f){with($c){return{"+i+"}}}")),c=o(a,r)}catch(h){throw'Error parsing bindings: "'+i+'"\n>> '+h}var l=t.map(t.union(c.events||[],["change"]),function(t){return t+".epoxy"}).join(" ");t.each(c,function(t,i){if(s.hasOwnProperty(i))e.b().push(new p(e,n,s[i],t,l,r,c));else if(!A.hasOwnProperty(i))throw'binding handler "'+i+'" is not defined.'})}function d(t,e,n){return t&&t.hasOwnProperty(e)?y(n)?s(t[e]):t[e](n):void 0}function f(t,e){var n=[];if(e&&t)for(var i=0,r=e.length;r>i;i++)n.push(e[i]in t?t[e[i]]():null);return n}function p(e,n,i,r,a,o,c){var h=this,l=n[0].tagName.toLowerCase(),u="input"==l||"select"==l||"textarea"==l||"true"==n.prop("contenteditable"),d=[],f=function(t){h.set(h.$el,s(r),t)};if(h.view=e,h.$el=n,h.evt=a,t.extend(h,i),r=h.init(h.$el,s(r),o,c)||r,E=d,f(),E=null,u&&i.get&&_(r)&&h.$el.on(a,function(t){r(h.get(h.$el,s(r),t))}),d.length)for(var p=0,g=d.length;g>p;p++)h.listenTo(d[p][0],d[p][1],f)}var g,m=e.Epoxy={},v=Array.prototype,y=t.isUndefined,_=t.isFunction,w=t.isObject,b=t.isArray,x=function(t){return t instanceof e.Model},S=function(t){return t instanceof e.Collection},C=function(){},K={mixin:function(t){t=t||{};for(var e in this.prototype)this.prototype.hasOwnProperty(e)&&"constructor"!==e&&(t[e]=this.prototype[e]);return t}},k=["computeds"];m.Model=e.Model.extend({_super:e.Model,constructor:function(e,i){t.extend(this,t.pick(i||{},k)),n(this,"constructor",arguments),this.initComputeds(e,i)},getCopy:function(e){return t.clone(this.get(e))},get:function(t){return g&&g.push(["change:"+t,this]),this.hasComputed(t)?this.c()[t].get():n(this,"get",arguments)},set:function(e,r,s){var a=e;a&&!w(a)?(a={},a[e]=r):s=r,s=s||{};var o=this._setting=[];s.unset||(a=i(this,a,{},[])),delete this._setting;var c=n(this,"set",[a,s]);return s.silent||(t.each(o,function(t){this.trigger.apply(this,t)},this),this.hasChanged()||this.trigger("change",this)),c},toJSON:function(e){var i=n(this,"toJSON",arguments);return e&&e.computed&&t.each(this.c(),function(t,e){i[e]=t.value}),i},destroy:function(){return this.clearComputeds(),n(this,"destroy",arguments)},c:function(){return this._c||(this._c={})},initComputeds:function(e){this.clearComputeds();var n=t.result(this,"computeds")||{};n=t.extend(n,t.pick(e||{},t.keys(n))),t.each(n,function(t,e){t._init=1,this.addComputed(e,t)},this),t.invoke(this.c(),"init")},addComputed:function(t,e,n){this.removeComputed(t);var i=e,s=i._init;if(_(e)){var a=2;i={},i._get=e,_(n)&&(i._set=n,a++),i.deps=v.slice.call(arguments,a)}return this.c()[t]=new r(this,t,i,s),this},hasComputed:function(t){return this.c().hasOwnProperty(t)},removeComputed:function(t){return this.hasComputed(t)&&(this.c()[t].dispose(),delete this.c()[t]),this},clearComputeds:function(){for(var t in this.c())this.removeComputed(t);return this},modifyArray:function(t,e,n){var i=this.get(t);if(b(i)&&_(v[e])){var r=v.slice.call(arguments,2),s=v[e].apply(i,r);return n=n||{},n.silent||this.trigger("change:"+t+" change",this,v,n),s}return null},modifyObject:function(t,e,n,i){var r=this.get(t),s=!1;return w(r)?(i=i||{},y(n)&&r.hasOwnProperty(e)?(delete r[e],s=!0):r[e]!==n&&(r[e]=n,s=!0),s&&!i.silent&&this.trigger("change:"+t+" change",this,r,i),r):null}},K),t.extend(r.prototype,e.Events,{init:function(){var e={},n=g=[];this.get(!0),g=null,n.length&&(t.each(n,function(n){var i=n[0],r=n[1];e[i]?t.contains(e[i],r)||e[i].push(r):e[i]=[r]}),t.each(e,function(e,n){for(var i=0,r=e.length;r>i;i++)this.listenTo(e[i],n,t.bind(this.get,this,!0))},this))},val:function(t){return this.model.get(t)},get:function(e){if(e===!0&&this._get){var n=this._get.apply(this.model,t.map(this.deps,this.val,this));this.change(n)}return this.value},set:function(t){if(this._get){if(this._set)return this._set.apply(this.model,arguments);throw"Cannot set read-only computed attribute."}return this.change(t),null},change:function(e){if(!t.isEqual(e,this.value)){this.value=e;var n=["change:"+this.name,this.model,e];this.model._setting?this.model._setting.push(n):(n[0]+=" change",this.model.trigger.apply(this.model,n))}},dispose:function(){this.stopListening(),this.off(),this.model=this.value=null}});var T={optionText:"label",optionValue:"value"},P={},F={attr:a(function(t,e){t.attr(e)}),checked:a({get:function(e,n){var i=!!e.prop("checked"),r=e.val();if(this.isRadio(e))return r;if(b(n)){n=n.slice();var s=t.indexOf(n,r);return i&&0>s?n.push(r):!i&&s>-1&&n.splice(s,1),n}return i},set:function(e,n){var i=!!n;this.isRadio(e)?i=n==e.val():b(n)&&(i=t.contains(n,e.val())),e.prop("checked",i)},isRadio:function(t){return"radio"===t.attr("type").toLowerCase()}}),classes:a(function(e,n){t.each(n,function(t,n){e.toggleClass(n,!!t)})}),collection:a({init:function(t,e){if(!S(e))throw'Binding "collection" requires a Collection.';if(!_(this.view.itemView))throw'Binding "collection" requires an itemView.';this.v={}},set:function(e,n,i){var r,s=this.v,a=this.view.itemView,o=n.models,c=E;if(E=null,i=i||n,x(i))if(s.hasOwnProperty(i.cid))s[i.cid].remove(),delete s[i.cid];else{s[i.cid]=r=new a({model:i});var h=t.indexOf(o,i),l=e.children();l.length>h?l.eq(h).before(r.$el):e.append(r.$el)}else if(S(i)){var u=o.length===t.size(s)&&n.every(function(t){return s.hasOwnProperty(t.cid)});e.children().detach();var d=document.createDocumentFragment();u?n.each(function(t){d.appendChild(s[t.cid].el)}):(this.clean(),n.each(function(t){s[t.cid]=r=new a({model:t}),d.appendChild(r.el)})),e.append(d)}E=c},clean:function(){for(var t in this.v)this.v.hasOwnProperty(t)&&(this.v[t].remove(),delete this.v[t])}}),css:a(function(t,e){t.css(e)}),disabled:a(function(t,e){t.prop("disabled",!!e)}),enabled:a(function(t,e){t.prop("disabled",!e)}),html:a(function(t,e){t.html(e)}),options:a({init:function(t,e,n,i){this.e=i.optionsEmpty,this.d=i.optionsDefault,this.v=i.value},set:function(e,n){var i=this,r=s(i.e),a=s(i.d),o=s(i.v),c=S(n)?n.models:n,h=c.length,l=!0,u="";h||a||!r?(a&&(c=[a].concat(c)),t.each(c,function(t){u+=i.opt(t,h)})):(u+=i.opt(r,h),l=!1),e.html(u).prop("disabled",!l).val(o);var d=e.val();i.v&&!t.isEqual(o,d)&&i.v(d)},opt:function(t){var e=t,n=t,i=T.optionText,r=T.optionValue;return w(t)&&(e=x(t)?t.get(i):t[i],n=x(t)?t.get(r):t[r]),['<option value="',n,'">',e,"</option>"].join("")},clean:function(){this.d=this.e=this.v=0}}),template:a({init:function(e,n,i){var r=e.find("script,template");return this.t=t.template(r.length?r.html():e.html()),b(n)?t.pick(i,n):void 0},set:function(t,e){e=x(e)?e.toJSON({computed:!0}):e,t.html(this.t(e))},clean:function(){this.t=null}}),text:a(function(t,e){t.text(e)}),toggle:a(function(t,e){t.toggle(!!e)}),value:a({get:function(t){return t.val()},set:function(t,e){try{t.val()!=e&&t.val(e)}catch(n){}}})},D={all:o(function(){for(var t=arguments,e=0,n=t.length;n>e;e++)if(!t[e])return!1;return!0}),any:o(function(){for(var t=arguments,e=0,n=t.length;n>e;e++)if(t[e])return!0;return!1}),length:o(function(t){return t.length||0}),none:o(function(){for(var t=arguments,e=0,n=t.length;n>e;e++)if(t[e])return!1;return!0}),not:o(function(t){return!t}),format:o(function(t){for(var e=arguments,n=1,i=e.length;i>n;n++)t=t.replace(RegExp("\\$"+n,"g"),e[n]);return t}),select:o(function(t,e,n){return t?e:n}),csv:o({get:function(t){return t+="",t?t.split(","):[]},set:function(t){return b(t)?t.join(","):t}}),integer:o(function(t){return t?parseInt(t,10):0}),decimal:o(function(t){return t?parseFloat(t):0})},A={events:1,optionsDefault:1,optionsEmpty:1};m.binding={allowedParams:A,addHandler:function(t,e){F[t]=a(e)},addFilter:function(t,e){D[t]=o(e)},config:function(e){t.extend(T,e)},emptyCache:function(){P={}}};var E,N=["viewModel","bindings","bindingFilters","bindingHandlers","bindingSources","computeds"];return m.View=e.View.extend({_super:e.View,constructor:function(e){t.extend(this,t.pick(e||{},N)),n(this,"constructor",arguments),this.applyBindings()},b:function(){return this._b||(this._b=[])},bindings:"data-bind",setterOptions:null,applyBindings:function(){this.removeBindings();var n=this,i=t.clone(t.result(n,"bindingSources")),r=n.bindings,s=n.setterOptions,h=t.clone(F),d=t.clone(D),p=n._c={};t.each(t.result(n,"bindingHandlers")||{},function(t,e){h[e]=a(t)}),t.each(t.result(n,"bindingFilters")||{},function(t,e){d[e]=o(t)}),n.model=c(n,p,s,"model"),n.viewModel=c(n,p,s,"viewModel"),n.collection=c(n,p,s,"collection"),n.collection&&n.collection.view&&(n.itemView=n.collection.view),i&&(t.each(i,function(t,e){i[e]=c(i,p,s,e,e)}),n.bindingSources=i),t.each(t.result(n,"computeds")||{},function(t,e){var i=_(t)?t:t.get,r=t.set,s=t.deps;p[e]=function(t){return!y(t)&&r?r.call(n,t):i.apply(n,f(n._c,s))}}),w(r)?t.each(r,function(t,e){var i=l(n,e);i.length&&u(n,i,t,p,h,d)}):l(n,"["+r+"]").each(function(){var t=e.$(this);u(n,t,t.attr(r),p,h,d)})},getBinding:function(t){return d(this._c,t)},setBinding:function(t,e){return d(this._c,t,e)},removeBindings:function(){if(this._c=null,this._b)for(;this._b.length;)this._b.pop().dispose()},remove:function(){this.removeBindings(),n(this,"remove",arguments)}},K),t.extend(p.prototype,e.Events,{init:C,get:C,set:C,clean:C,dispose:function(){this.clean(),this.stopListening(),this.$el.off(this.evt),this.$el=this.view=null}}),m}),function(t,e){"object"==typeof exports&&module?module.exports=e():"function"==typeof define&&define.amd?define("pubsub",e):t.PubSub=e()}("object"==typeof window&&window||this,function(){function t(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}function e(t){return function(){throw t}}function n(t,n,i){try{t(n,i)}catch(r){setTimeout(e(r),0)}}function i(t,e,n){t(e,n)}function r(t,e,r,s){var a,o=h[e],c=s?i:n;if(h.hasOwnProperty(e))for(a in o)o.hasOwnProperty(a)&&c(o[a],t,r)}function s(t,e,n){return function(){var i=String(t),s=i.lastIndexOf(".");for(r(t,t,e,n);-1!==s;)i=i.substr(0,s),s=i.lastIndexOf("."),r(t,i,e)}}function a(e){for(var n=String(e),i=Boolean(h.hasOwnProperty(n)&&t(h[n])),r=n.lastIndexOf(".");!i&&-1!==r;)n=n.substr(0,r),r=n.lastIndexOf("."),i=Boolean(h.hasOwnProperty(n)&&t(h[n]));return i}function o(t,e,n,i){var r=s(t,e,i),o=a(t);return o?(n===!0?r():setTimeout(r,0),!0):!1}var c={},h={},l=-1;return c.publish=function(t,e){return o(t,e,!1,c.immediateExceptions)},c.publishSync=function(t,e){return o(t,e,!0,c.immediateExceptions)},c.subscribe=function(t,e){if("function"!=typeof e)return!1;h.hasOwnProperty(t)||(h[t]={});var n="uid_"+String(++l);return h[t][n]=e,n},c.unsubscribe=function(t){var e,n,i,r="string"==typeof t,s=!1;for(e in h)if(h.hasOwnProperty(e)){if(n=h[e],r&&n[t]){delete n[t],s=t;break}if(!r)for(i in n)n.hasOwnProperty(i)&&n[i]===t&&(delete n[i],s=!0)}return s},c}),function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(t,e){function n(){ce.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var i=!0;return c(function(){return i&&(n(),i=!1),e.apply(this,arguments)},e)}function i(t,e){return function(n){return u(t.call(this,n),e)}}function r(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function s(){}function a(t){C(t),c(this,t)}function o(t){var e=v(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,a=e.day||0,o=e.hour||0,c=e.minute||0,h=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*h+6e4*c+36e5*o,this._days=+a+7*s,this._months=+r+3*i+12*n,this._data={},this._bubble()}function c(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function h(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&xe.hasOwnProperty(e)&&(n[e]=t[e]);return n}function l(t){return 0>t?Math.ceil(t):Math.floor(t)}function u(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function d(t,e,n,i){var r=e._milliseconds,s=e._days,a=e._months;i=null==i?!0:i,r&&t._d.setTime(+t._d+r*n),s&&ie(t,"Date",ne(t,"Date")+s*n),a&&ee(t,ne(t,"Month")+a*n),i&&ce.updateOffset(t,s||a)}function f(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function g(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&_(t[i])!==_(e[i]))&&a++;return a+s}function m(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Qe[t]||Je[e]||e}return t}function v(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=m(n),e&&(i[e]=t[n]));return i}function y(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}ce[e]=function(r,s){var a,o,c=ce.fn._lang[e],h=[];if("number"==typeof r&&(s=r,r=t),o=function(t){var e=ce().utc().set(i,t);return c.call(ce.fn._lang,e,r||"")},null!=s)return o(s);for(a=0;n>a;a++)h.push(o(a));return h}}function _(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function w(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function b(t,e,n){return J(ce([t,11,31+e-n]),e,n).week}function x(t){return S(t)?366:365}function S(t){return t%4===0&&t%100!==0||t%400===0}function C(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[ge]<0||t._a[ge]>11?ge:t._a[me]<1||t._a[me]>w(t._a[pe],t._a[ge])?me:t._a[ve]<0||t._a[ve]>23?ve:t._a[ye]<0||t._a[ye]>59?ye:t._a[_e]<0||t._a[_e]>59?_e:t._a[we]<0||t._a[we]>999?we:-1,t._pf._overflowDayOfYear&&(pe>e||e>me)&&(e=me),t._pf.overflow=e)}function K(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function k(t){return t?t.toLowerCase().replace("_","-"):t}function T(t,e){return e._isUTC?ce(t).zone(e._offset||0):ce(t).local()}function P(t,e){return e.abbr=t,be[t]||(be[t]=new s),be[t].set(e),be[t]}function F(t){delete be[t]}function D(t){var e,n,i,r,s=0,a=function(t){if(!be[t]&&Se)try{require("./lang/"+t)}catch(e){}return be[t]};if(!t)return ce.fn._lang;if(!f(t)){if(n=a(t))return n;t=[t]}for(;s<t.length;){for(r=k(t[s]).split("-"),e=r.length,i=k(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=a(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&g(r,i,!0)>=e-1)break;e--}s++}return ce.fn._lang}function A(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function E(t){var e,n,i=t.match(Te);for(e=0,n=i.length;n>e;e++)i[e]=nn[i[e]]?nn[i[e]]:A(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function N(t,e){return t.isValid()?(e=M(e,t.lang()),Ze[e]||(Ze[e]=E(e)),Ze[e](t)):t.lang().invalidDate()}function M(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Pe.lastIndex=0;i>=0&&Pe.test(t);)t=t.replace(Pe,n),Pe.lastIndex=0,i-=1;return t}function O(t,e){var n,i=e._strict;switch(t){case"Q":return Re;case"DDDD":return je;case"YYYY":case"GGGG":case"gggg":return i?Be:Ae;case"Y":case"G":case"g":return Ue;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?$e:Ee;case"S":if(i)return Re;case"SS":if(i)return Ge;case"SSS":if(i)return je;case"DDD":return De;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Me;case"a":case"A":return D(e._l)._meridiemParse;case"X":return He;case"Z":case"ZZ":return Oe;case"T":return Le;case"SSSS":return Ne;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ge:Fe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Fe;case"Do":return Ie;default:return n=new RegExp($(B(t.replace("\\","")),"i"))}}function L(t){t=t||"";var e=t.match(Oe)||[],n=e[e.length-1]||[],i=(n+"").match(ze)||["-",0,0],r=+(60*i[1])+_(i[2]);return"+"===i[0]?-r:r}function H(t,e,n){var i,r=n._a;switch(t){case"Q":null!=e&&(r[ge]=3*(_(e)-1));break;case"M":case"MM":null!=e&&(r[ge]=_(e)-1);break;case"MMM":case"MMMM":i=D(n._l).monthsParse(e),null!=i?r[ge]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[me]=_(e));break;case"Do":null!=e&&(r[me]=_(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=_(e));break;case"YY":r[pe]=ce.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[pe]=_(e);break;case"a":case"A":n._isPm=D(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[ve]=_(e);break;case"m":case"mm":r[ye]=_(e);break;case"s":case"ss":r[_e]=_(e);break;case"S":case"SS":case"SSS":case"SSSS":r[we]=_(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=L(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function I(t){var e,n,i,r,s,a,o,c,h,l,u=[];if(!t._d){for(i=G(t),t._w&&null==t._a[me]&&null==t._a[ge]&&(s=function(e){var n=parseInt(e,10);return e?e.length<3?n>68?1900+n:2e3+n:n:null==t._a[pe]?ce().weekYear():t._a[pe]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?o=Z(s(a.GG),a.W||1,a.E,4,1):(c=D(t._l),h=null!=a.d?z(a.d,c):null!=a.e?parseInt(a.e,10)+c._week.dow:0,l=parseInt(a.w,10)||1,null!=a.d&&h<c._week.dow&&l++,o=Z(s(a.gg),l,h,c._week.doy,c._week.dow)),t._a[pe]=o.year,t._dayOfYear=o.dayOfYear),t._dayOfYear&&(r=null==t._a[pe]?i[pe]:t._a[pe],t._dayOfYear>x(r)&&(t._pf._overflowDayOfYear=!0),n=q(r,0,t._dayOfYear),t._a[ge]=n.getUTCMonth(),t._a[me]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=u[e]=i[e];for(;7>e;e++)t._a[e]=u[e]=null==t._a[e]?2===e?1:0:t._a[e];u[ve]+=_((t._tzm||0)/60),u[ye]+=_((t._tzm||0)%60),t._d=(t._useUTC?q:W).apply(null,u)}}function R(t){var e;t._d||(e=v(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],I(t))}function G(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function j(t){t._a=[],t._pf.empty=!0;var e,n,i,r,s,a=D(t._l),o=""+t._i,c=o.length,h=0;for(i=M(t._f,a).match(Te)||[],e=0;e<i.length;e++)r=i[e],n=(o.match(O(r,t))||[])[0],n&&(s=o.substr(0,o.indexOf(n)),s.length>0&&t._pf.unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),h+=n.length),nn[r]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(r),H(r,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=c-h,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[ve]<12&&(t._a[ve]+=12),t._isPm===!1&&12===t._a[ve]&&(t._a[ve]=0),I(t),C(t)}function B(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})}function $(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(t){var n,i,r,s,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)a=0,n=c({},t),n._pf=e(),n._f=t._f[s],j(n),K(n)&&(a+=n._pf.charsLeftOver,a+=10*n._pf.unusedTokens.length,n._pf.score=a,(null==r||r>a)&&(r=a,i=n));c(t,i||n)}function V(t){var e,n,i=t._i,r=Ve.exec(i);if(r){for(t._pf.iso=!0,e=0,n=We.length;n>e;e++)if(We[e][1].exec(i)){t._f=We[e][0]+(r[6]||" ");break}for(e=0,n=qe.length;n>e;e++)if(qe[e][1].exec(i)){t._f+=qe[e][0];break}i.match(Oe)&&(t._f+="Z"),j(t)}else ce.createFromInputFallback(t)}function Y(e){var n=e._i,i=Ce.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?V(e):f(n)?(e._a=n.slice(0),I(e)):p(n)?e._d=new Date(+n):"object"==typeof n?R(e):"number"==typeof n?e._d=new Date(n):ce.createFromInputFallback(e)}function W(t,e,n,i,r,s,a){var o=new Date(t,e,n,i,r,s,a);return 1970>t&&o.setFullYear(t),o}function q(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function z(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function X(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Q(t,e,n){var i=fe(Math.abs(t)/1e3),r=fe(i/60),s=fe(r/60),a=fe(s/24),o=fe(a/365),c=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===s&&["h"]||22>s&&["hh",s]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",fe(a/30)]||1===o&&["y"]||["yy",o];return c[2]=e,c[3]=t>0,c[4]=n,X.apply({},c)}function J(t,e,n){var i,r=n-e,s=n-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=ce(t).add("d",s),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Z(t,e,n,i,r){var s,a,o=q(t,0,1).getUTCDay();return n=null!=n?n:r,s=r-o+(o>i?7:0)-(r>o?7:0),a=7*(e-1)+(n-r)+s+1,{year:a>0?t:t-1,dayOfYear:a>0?a:x(t-1)+a}}function te(e){var n=e._i,i=e._f;return null===n||i===t&&""===n?ce.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=D().preparse(n)),ce.isMoment(n)?(e=h(n),e._d=new Date(+n._d)):i?f(i)?U(e):j(e):Y(e),new a(e))}function ee(t,e){var n;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),w(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function ne(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ie(t,e,n){return"Month"===e?ee(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function re(t,e){return function(n){return null!=n?(ie(this,t,n),ce.updateOffset(this,e),this):ne(this,t)}}function se(t){ce.duration.fn[t]=function(){return this._data[t]}}function ae(t,e){ce.duration.fn["as"+t]=function(){return+this/e}}function oe(t){"undefined"==typeof ender&&(he=de.moment,de.moment=t?n("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ce):ce)}for(var ce,he,le,ue="2.6.0",de="undefined"!=typeof global?global:this,fe=Math.round,pe=0,ge=1,me=2,ve=3,ye=4,_e=5,we=6,be={},xe={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Se="undefined"!=typeof module&&module.exports,Ce=/^\/?Date\((\-?\d+)/i,Ke=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ke=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Te=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Pe=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Fe=/\d\d?/,De=/\d{1,3}/,Ae=/\d{1,4}/,Ee=/[+\-]?\d{1,6}/,Ne=/\d+/,Me=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Oe=/Z|[\+\-]\d\d:?\d\d/gi,Le=/T/i,He=/[\+\-]?\d+(\.\d{1,3})?/,Ie=/\d{1,2}/,Re=/\d/,Ge=/\d\d/,je=/\d{3}/,Be=/\d{4}/,$e=/[+-]?\d{6}/,Ue=/[+-]?\d+/,Ve=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ye="YYYY-MM-DDTHH:mm:ssZ",We=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],qe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ze=/([\+\-]|\d\d)/gi,Xe=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Qe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Je={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ze={},tn="DDD w W M D d".split(" "),en="M D H h m s w W".split(" "),nn={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+u(Math.abs(t),6)},gg:function(){return u(this.weekYear()%100,2)},gggg:function(){return u(this.weekYear(),4)},ggggg:function(){return u(this.weekYear(),5)},GG:function(){return u(this.isoWeekYear()%100,2)},GGGG:function(){return u(this.isoWeekYear(),4)},GGGGG:function(){return u(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return _(this.milliseconds()/100)},SS:function(){return u(_(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},SSSS:function(){return u(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(_(t/60),2)+":"+u(_(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(_(t/60),2)+u(_(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},rn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];tn.length;)le=tn.pop(),nn[le+"o"]=r(nn[le],le);for(;en.length;)le=en.pop(),nn[le+le]=i(nn[le],2);for(nn.DDDD=i(nn.DDD,3),c(s.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=ce.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=ce([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)
},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return J(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ce=function(n,i,r,s){var a;return"boolean"==typeof r&&(s=r,r=t),a={},a._isAMomentObject=!0,a._i=n,a._f=i,a._l=r,a._strict=s,a._isUTC=!1,a._pf=e(),te(a)},ce.suppressDeprecationWarnings=!1,ce.createFromInputFallback=n("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),ce.utc=function(n,i,r,s){var a;return"boolean"==typeof r&&(s=r,r=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=r,a._i=n,a._f=i,a._strict=s,a._pf=e(),te(a).utc()},ce.unix=function(t){return ce(1e3*t)},ce.duration=function(t,e){var n,i,r,s=t,a=null;return ce.isDuration(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(a=Ke.exec(t))?(n="-"===a[1]?-1:1,s={y:0,d:_(a[me])*n,h:_(a[ve])*n,m:_(a[ye])*n,s:_(a[_e])*n,ms:_(a[we])*n}):(a=ke.exec(t))&&(n="-"===a[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},s={y:r(a[2]),M:r(a[3]),d:r(a[4]),h:r(a[5]),m:r(a[6]),s:r(a[7]),w:r(a[8])}),i=new o(s),ce.isDuration(t)&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},ce.version=ue,ce.defaultFormat=Ye,ce.momentProperties=xe,ce.updateOffset=function(){},ce.lang=function(t,e){var n;return t?(e?P(k(t),e):null===e?(F(t),t="en"):be[t]||D(t),n=ce.duration.fn._lang=ce.fn._lang=D(t),n._abbr):ce.fn._lang._abbr},ce.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),D(t)},ce.isMoment=function(t){return t instanceof a||null!=t&&t.hasOwnProperty("_isAMomentObject")},ce.isDuration=function(t){return t instanceof o},le=rn.length-1;le>=0;--le)y(rn[le]);ce.normalizeUnits=function(t){return m(t)},ce.invalid=function(t){var e=ce.utc(0/0);return null!=t?c(e._pf,t):e._pf.userInvalidated=!0,e},ce.parseZone=function(){return ce.apply(null,arguments).parseZone()},ce.parseTwoDigitYear=function(t){return _(t)+(_(t)>68?1900:2e3)},c(ce.fn=a.prototype,{clone:function(){return ce(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=ce(this).utc();return 0<t.year()&&t.year()<=9999?N(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return K(this)},isDSTShifted:function(){return this._a?this.isValid()&&g(this._a,(this._isUTC?ce.utc(this._a):ce(this._a)).toArray())>0:!1},parsingFlags:function(){return c({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=N(this,t||ce.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?ce.duration(+e,t):ce.duration(t,e),d(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?ce.duration(+e,t):ce.duration(t,e),d(this,n,-1),this},diff:function(t,e,n){var i,r,s=T(t,this),a=6e4*(this.zone()-s.zone());return e=m(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+s.daysInMonth()),r=12*(this.year()-s.year())+(this.month()-s.month()),r+=(this-ce(this).startOf("month")-(s-ce(s).startOf("month")))/i,r-=6e4*(this.zone()-ce(this).startOf("month").zone()-(s.zone()-ce(s).startOf("month").zone()))/i,"year"===e&&(r/=12)):(i=this-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?r:l(r)},from:function(t,e){return ce.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ce(),t)},calendar:function(){var t=T(ce(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return S(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=z(t,this.lang()),this.add({d:t-e})):e},month:re("Month",!0),startOf:function(t){switch(t=m(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=m(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ce(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ce(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+T(t,this).startOf(e)},min:function(t){return t=ce.apply(null,arguments),this>t?this:t},max:function(t){return t=ce.apply(null,arguments),t>this?this:t},zone:function(t,e){var n=this._offset||0;return null==t?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof t&&(t=L(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,n!==t&&(!e||this._changeInProgress?d(this,ce.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ce.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ce(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return w(this.year(),this.month())},dayOfYear:function(t){var e=fe((ce(this).startOf("day")-ce(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=J(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=J(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=J(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return b(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return b(this.year(),t.dow,t.doy)},get:function(t){return t=m(t),this[t]()},set:function(t,e){return t=m(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=D(e),this)}}),ce.fn.millisecond=ce.fn.milliseconds=re("Milliseconds",!1),ce.fn.second=ce.fn.seconds=re("Seconds",!1),ce.fn.minute=ce.fn.minutes=re("Minutes",!1),ce.fn.hour=ce.fn.hours=re("Hours",!0),ce.fn.date=re("Date",!0),ce.fn.dates=n("dates accessor is deprecated. Use date instead.",re("Date",!0)),ce.fn.year=re("FullYear",!0),ce.fn.years=n("years accessor is deprecated. Use year instead.",re("FullYear",!0)),ce.fn.days=ce.fn.day,ce.fn.months=ce.fn.month,ce.fn.weeks=ce.fn.week,ce.fn.isoWeeks=ce.fn.isoWeek,ce.fn.quarters=ce.fn.quarter,ce.fn.toJSON=ce.fn.toISOString,c(ce.duration.fn=o.prototype,{_bubble:function(){var t,e,n,i,r=this._milliseconds,s=this._days,a=this._months,o=this._data;o.milliseconds=r%1e3,t=l(r/1e3),o.seconds=t%60,e=l(t/60),o.minutes=e%60,n=l(e/60),o.hours=n%24,s+=l(n/24),o.days=s%30,a+=l(s/30),o.months=a%12,i=l(a/12),o.years=i},weeks:function(){return l(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)},humanize:function(t){var e=+this,n=Q(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=ce.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=ce.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=m(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=m(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ce.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"}});for(le in Xe)Xe.hasOwnProperty(le)&&(ae(le,Xe[le]),se(le.toLowerCase()));ae("Weeks",6048e5),ce.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ce.lang("en",{ordinal:function(t){var e=t%10,n=1===_(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Se?module.exports=ce:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(de.moment=he),ce}),oe(!0)):oe()}.call(this);var Kinetic={};!function(t){var e=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var e=t.navigator&&t.navigator.userAgent||"",n=e.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],r=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:i[1]||"",version:i[2]||"0",mobile:r}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var n=this.names[t];if(void 0!==n){for(var i=0;i<n.length;i++){var r=n[i];r._id===e&&n.splice(i,1)}0===n.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t}}}(this),function(t,e){if("object"==typeof exports){var n=require("canvas"),i=require("jsdom").jsdom,r=i("<!DOCTYPE html><html><head></head><body></body></html>"),s=e();return Kinetic.document=r,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=n.Image,Kinetic.root=t,Kinetic._nodeCanvas=n,void(module.exports=s)}"function"==typeof define&&define.amd&&define("kinetic",e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,n=0;for(this.length=e;e>n;n++)this[n]=t[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;n>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,n=new Kinetic.Collection,i=t.length;for(e=0;i>e;e++)n.push(t[e]);return n},Kinetic.Collection._mapMethod=function(t){Kinetic.Collection.prototype[t]=function(){var e,n=this.length,i=[].slice.call(arguments);for(e=0;n>e;e++)this[e][t].apply(this[e],i);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var n in e)Kinetic.Collection._mapMethod(n)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,s=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=s,this.m[3]=a,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,s=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=s,this.m[5]=a,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,r=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=s,this.m[5]=a,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var n=this.m[0],i=this.m[1],r=this.m[2],s=this.m[3],a=this.m[4],o=this.m[5],c=(n*(e-o)-i*(t-a))/(n*s-i*r),h=(t-a-r*c)/n;return this.translate(h,c)}};var t="2d",e="[object Array]",n="[object Number]",i="[object String]",r=Math.PI/180,s=180/Math.PI,a="#",o="",c="0",h="Kinetic warning: ",l="Kinetic error: ",u="rgb(",d={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},f=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==e},_isNumber:function(t){return Object.prototype.toString.call(t)==n},_isString:function(t){return Object.prototype.toString.call(t)==i},_throttle:function(t,e,n){var i,r,s,a=null,o=0;n||(n={});var c=function(){o=n.leading===!1?0:(new Date).getTime(),a=null,s=t.apply(i,r),i=r=null};return function(){var h=(new Date).getTime();o||n.leading!==!1||(o=h);var l=e-(h-o);return i=this,r=arguments,0>=l?(clearTimeout(a),a=null,o=h,s=t.apply(i,r),i=r=null):a||n.trailing===!1||(a=setTimeout(c,l)),s}},_hasMethods:function(t){var e,n=[];for(e in t)this._isFunction(t[e])&&n.push(e);return n.length>0},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");return t.style=t.style||{},t},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){var e,n,i=[],r=t.length,s=Kinetic.Util;for(e=0;r>e;e++)n=t[e],s._isNumber(n)?n=Math.round(1e3*n)/1e3:s._isString(n)||(n=n.toString()),i.push(n);return i},_getImage:function(e,n){var i,r;if(e)if(this._isElement(e))n(e);else if(this._isString(e))i=new Kinetic.window.Image,i.onload=function(){n(i)},i.src=e;else if(e.data){r=Kinetic.Util.createCanvasElement(),r.width=e.width,r.height=e.height;var s=r.getContext(t);s.putImageData(e,0,0),this._getImage(r.toDataURL(),n)}else n(null);else n(null)},_getRGBAString:function(t){var e=t.red||0,n=t.green||0,i=t.blue||0,r=t.alpha||1;return["rgba(",e,",",n,",",i,",",r,")"].join(o)},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(a,o);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=c+t;return a+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in d?(e=d[t],{r:e[0],g:e[1],b:e[2]}):t[0]===a?this._hexToRgb(t.substring(1)):t.substr(0,4)===u?(e=f.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var n=this._clone(e);for(var i in t)n[i]=this._isObject(t[i])?this._merge(t[i],n[i]):t[i];return n},cloneObject:function(t){var e={};for(var n in t)e[n]=this._isObject(t[n])?this.cloneObject(t[n]):this._isArray(t[n])?this.cloneArray(t[n]):t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(l+t)},warn:function(t){Kinetic.root.console&&console.warn&&console.warn(h+t)},extend:function(t,e){for(var n in e.prototype)n in t.prototype||(t.prototype[n]=e.prototype[n])},addMethods:function(t,e){var n;for(n in e)t.prototype[n]=e[n]},_getControlPoints:function(t,e,n,i,r,s,a){var o=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),c=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-i,2)),h=a*o/(o+c),l=a*c/(o+c),u=n-h*(r-t),d=i-h*(s-e),f=n+l*(r-t),p=i+l*(s-e);return[u,d,f,p]},_expandPoints:function(t,e){var n,i,r=t.length,s=[];for(n=2;r-2>n;n+=2)i=Kinetic.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),s.push(i[0]),s.push(i[1]),s.push(t[n]),s.push(t[n+1]),s.push(i[2]),s.push(i[3]);return s},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=Kinetic.Util.createCanvasElement(),e=t.getContext("2d"),n=Kinetic.UA.mobile?function(){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}():1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||n;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(i){return Kinetic.Util.warn("Unable to get data URL. "+i.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,n)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),n.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),n.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,n=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,n)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=",",e="(",n=")",i="([",r="])",s=";",a="()",o="=",c=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(c){var h,l,u,d,f=this.traceArr,p=f.length,g="";for(h=0;p>h;h++)l=f[h],u=l.method,u?(d=l.args,g+=u,g+=c?a:Kinetic.Util._isArray(d[0])?i+d.join(t)+r:e+d.join(t)+n):(g+=l.property,c||(g+=o+l.val)),g+=s;return g},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,n=this.traceArr;n.push(t),e=n.length,e>=Kinetic.traceArrMax&&n.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,n=this,i=c.length,r=Kinetic.Util._simplifyArray,s=this.setAttr,a=function(t){var i,s=n[t];n[t]=function(){return e=r(Array.prototype.slice.call(arguments,0)),i=s.apply(n,arguments),n._trace({method:t,args:e}),i}};for(t=0;i>t;t++)a(c[t]);n.setAttr=function(){s.apply(n,arguments),n._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),n=t.getFillPatternX(),i=t.getFillPatternY(),r=t.getFillPatternScale(),s=Kinetic.getAngle(t.getFillPatternRotation()),a=t.getFillPatternOffset(),o=t.getFillPatternRepeat();(n||i)&&this.translate(n||0,i||0),s&&this.rotate(s),r&&this.scale(r.x,r.y),a&&this.translate(-1*a.x,-1*a.y),this.setAttr("fillStyle",this.createPattern(e,o||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),n=t.getFillLinearGradientEndPoint(),i=t.getFillLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var s=0;s<i.length;s+=2)r.addColorStop(i[s],i[s+1]);this.setAttr("fillStyle",r),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),n=t.getFillRadialGradientEndPoint(),i=t.getFillRadialGradientStartRadius(),r=t.getFillRadialGradientEndRadius(),s=t.getFillRadialGradientColorStops(),a=this.createRadialGradient(e.x,e.y,i,n.x,n.y,r),o=0;o<s.length;o+=2)a.addColorStop(s[o],s[o+1]);this.setAttr("fillStyle",a),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),n=t.getFillPatternImage(),i=t.getFillLinearGradientColorStops(),r=t.getFillRadialGradientColorStops(),s=t.getFillPriority();e&&"color"===s?this._fillColor(t):n&&"pattern"===s?this._fillPattern(t):i&&"linear-gradient"===s?this._fillLinearGradient(t):r&&"radial-gradient"===s?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();t.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),n||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,n=t.getAbsoluteOpacity(),i=e.get(t.getShadowColor(),"black"),r=e.get(t.getShadowBlur(),5),s=e.get(t.getShadowOpacity(),1),a=e.get(t.getShadowOffset(),{x:0,y:0});s&&this.setAttr("globalAlpha",s*n),this.setAttr("shadowColor",i),this.setAttr("shadowBlur",r),this.setAttr("shadowOffsetX",a.x),this.setAttr("shadowOffsetY",a.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,n,i,r){this.addGetter(t,e,n),this.addSetter(t,e,i,r),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,n,i){var r=t+Kinetic.Util._capitalize(n);e.prototype[r]=function(){var t=this.attrs[n];return void 0===t?i:t}},addSetter:function(t,n,i,r){var s=e+Kinetic.Util._capitalize(n);t.prototype[s]=function(t){return i&&(t=i.call(this,t)),this._setAttr(n,t),r&&r.call(this),this}},addComponentsGetterSetter:function(n,i,r,s,a){var o,c,h=r.length,l=Kinetic.Util._capitalize,u=t+l(i),d=e+l(i);n.prototype[u]=function(){var t={};for(o=0;h>o;o++)c=r[o],t[c]=this.getAttr(i+l(c));return t},n.prototype[d]=function(t){var e,n=this.attrs[i];s&&(t=s.call(this,t));for(e in t)this._setAttr(i+l(e),t[e]);return this._fireChangeEvent(i,n,t),a&&a.call(this),this},this.addOverloadedGetterSetter(n,i)},addOverloadedGetterSetter:function(n,i){var r=Kinetic.Util._capitalize(i),s=e+r,a=t+r;n.prototype[i]=function(){return arguments.length?(this[s](arguments[0]),this):this[a]()}},backCompat:function(t,e){var n;for(n in e)t.prototype[n]=t.prototype[e[n]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),function(){var t="absoluteOpacity",e="absoluteTransform",n="Change",i="children",r=".",s="",a="get",o="id",c="kinetic",h="listening",l="mouseenter",u="mouseleave",d="name",f="set",p="Shape",g=" ",m="stage",v="transform",y="Stage",_="visible",w=["id"],b=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(g);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(n){var i=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(n),this.on(b,function(){this._clearCache(v),i._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){i._clearSelfAndDescendantCache(_)}),this.on("listeningChange.kinetic",function(){i._clearSelfAndDescendantCache(h)}),this.on("opacityChange.kinetic",function(){i._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var n=this._cache[t];return void 0===n&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},n=e.x||0,i=e.y||0,r=e.width||this.width(),s=e.height||this.height(),a=e.drawBorder||!1;if(this.getLayer(),0===r||0===s)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var o=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:s}),c=new Kinetic.SceneCanvas({pixelRatio:1,width:r,height:s}),h=new Kinetic.HitCanvas({width:r,height:s}),l=(this.transformsEnabled(),this.x(),this.y(),o.getContext()),u=h.getContext();return this.clearCache(),l.save(),u.save(),a&&(l.save(),l.beginPath(),l.rect(0,0,r,s),l.closePath(),l.setAttr("strokeStyle","red"),l.setAttr("lineWidth",5),l.stroke(),l.restore()),l.translate(-1*n,-1*i),u.translate(-1*n,-1*i),"Shape"===this.nodeType&&(l.translate(-1*this.x(),-1*this.y()),u.translate(-1*this.x(),-1*this.y())),this.drawScene(o,this),this.drawHit(h,this),l.restore(),u.restore(),this._cache.canvas={scene:o,filter:c,hit:h},this
},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,n,i,r=this.filters(),s=this._cache.canvas,a=s.scene,o=s.filter,c=o.getContext();if(r){if(!this._filterUpToDate){try{for(t=r.length,c.clear(),c.drawImage(a._canvas,0,0),e=c.getImageData(0,0,o.getWidth(),o.getHeight()),n=0;t>n;n++)i=r[n],i.call(this,e),c.putImageData(e,0,0)}catch(h){Kinetic.Util.warn("Unable to apply filter. "+h.message)}this._filterUpToDate=!0}return o}return a},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,n=e.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(n._canvas,0,0),t.restore()},on:function(t,e){var n,i,a,o,c,h=t.split(g),l=h.length;for(n=0;l>n;n++)i=h[n],a=i.split(r),o=a[0],c=a[1]||s,this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:c,handler:e});return this},off:function(t){var e,n,i,s,a,o,c=t.split(g),h=c.length;for(e=0;h>e;e++)if(i=c[e],s=i.split(r),a=s[0],o=s[1],a)this.eventListeners[a]&&this._off(a,o);else for(n in this.eventListeners)this._off(n,o);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},remove:function(){var n=this.getParent();return n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=a+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,n;if(t)for(e in t)e===i||(n=f+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(h,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(_,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(c){for(e=[],n=c.length,i=0;n>i;i++)r=c[i],o++,r.nodeType!==p&&(e=e.concat(r.getChildren().toArray())),r._id===a._id&&(i=n);e.length>0&&e[0].getDepth()<=s&&t(e)}var e,n,i,r,s=this.getDepth(),a=this,o=0;return a.nodeType!==y&&t(a.getStage().getChildren()),o},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,n=this.offset();return e.m=t.slice(),e.translate(n.x,n.y),e.getTranslation()},setAbsolutePosition:function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},_setTransform:function(t){var n;for(n in t)this.attrs[n]=t[n];this._clearCache(v),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(v),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,n=t.y,i=this.getX(),r=this.getY();return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this},_eachAncestorReverse:function(t,e){var n,i,r=[],s=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(r.unshift(this);s&&(!e||s._id!==e._id);)r.unshift(s),s=s.parent;for(n=r.length,i=0;n>i;i++)t(r[i])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,n,i,r=Kinetic.Util,s={},a=this.getAttrs();s.attrs={};for(t in a)e=a[t],r._isFunction(e)||r._isElement(e)||r._isObject(e)&&r._hasMethods(e)||(n=this[t],delete a[t],i=n?n.call(this):null,a[t]=e,i!==e&&(s.attrs[t]=e));return s.className=this.getClassName(),s},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(m,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,n){return n?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,n,i=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),n=t.getTransform(),"all"===e?i.multiply(n):"position"===e&&i.translate(t.x(),t.y())},t),i},getTransform:function(){return this._getCache(v,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),n=this.getY(),i=Kinetic.getAngle(this.getRotation()),r=this.getScaleX(),s=this.getScaleY(),a=this.getSkewX(),o=this.getSkewY(),c=this.getOffsetX(),h=this.getOffsetY();return(0!==e||0!==n)&&t.translate(e,n),0!==i&&t.rotate(i),(0!==a||0!==o)&&t.skew(a,o),(1!==r||1!==s)&&t.scale(r,s),(0!==c||0!==h)&&t.translate(-1*c,-1*h),t},clone:function(t){var e,n,i,r,s,a=this.getClassName(),o=Kinetic.Util.cloneObject(this.attrs);for(var h in w){var l=w[h];delete o[l]}for(e in t)o[e]=t[e];var u=new Kinetic[a](o);for(e in this.eventListeners)for(n=this.eventListeners[e],i=n.length,r=0;i>r;r++)s=n[r],s.name.indexOf(c)<0&&(u.eventListeners[e]||(u.eventListeners[e]=[]),u.eventListeners[e].push(s));return u},toDataURL:function(t){t=t||{};var e=t.mimeType||null,n=t.quality||null,i=this.getStage(),r=t.x||0,s=t.y||0,a=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(i?i.getWidth():0),height:t.height||this.getHeight()||(i?i.getHeight():0),pixelRatio:1}),o=a.getContext();return o.save(),(r||s)&&o.translate(-1*r,-1*s),this.drawScene(a),o.restore(),a.toDataURL(e,n)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var n,i,r=this.eventListeners[t];for(n=0;n<r.length;n++)if(i=r[n].name,!("kinetic"===i&&"kinetic"!==e||e&&i!==e)){if(r.splice(n,1),0===r.length){delete this.eventListeners[t];break}n--}},_fireChangeEvent:function(t,e,i){this._fire(t+n,{oldVal:e,newVal:i})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(o,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(d,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=t[1],i=f+Kinetic.Util._capitalize(e),r=this[i];return Kinetic.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this},_setAttr:function(t,e){var n;void 0!==e&&(n=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,n,e))},_setComponentAttr:function(t,e,n){var i;void 0!==n&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))},_fireAndBubble:function(t,e,n){var i=!0;e&&this.nodeType===p&&(e.target=this),t===l&&n&&this._id===n._id?i=!1:t===u&&n&&this._id===n._id&&(i=!1),i&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var n,i=this.eventListeners[t];if(e.type=t,i)for(n=0;n<i.length;n++)i[n].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var n,i,r,s=Kinetic.Node.prototype.getClassName.call(t),a=t.children;if(e&&(t.attrs.container=e),n=new Kinetic[s](t.attrs),a)for(i=a.length,r=0;i>r;r++)n.add(this._createNode(a[r]));return n},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(t){var e,n,i=t.data,r=i.length;for(e=0;r>e;e+=4)n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=n,i[e+1]=n,i[e+2]=n}}(),function(){Kinetic.Filters.Brighten=function(t){var e,n=255*this.brightness(),i=t.data,r=i.length;for(e=0;r>e;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(t){var e,n=t.data,i=n.length;for(e=0;i>e;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,r){var s,a,o,c,h,l,u,d,f,p,g,m,v,y,_,w,b,x,S,C,K,k,T,P,F=e.data,D=e.width,A=e.height,E=r+r+1,N=D-1,M=A-1,O=r+1,L=O*(O+1)/2,H=new t,I=null,R=H,G=null,j=null,B=n[r],$=i[r];for(o=1;E>o;o++)R=R.next=new t,o==O&&(I=R);for(R.next=H,u=l=0,a=0;A>a;a++){for(w=b=x=S=d=f=p=g=0,m=O*(C=F[l]),v=O*(K=F[l+1]),y=O*(k=F[l+2]),_=O*(T=F[l+3]),d+=L*C,f+=L*K,p+=L*k,g+=L*T,R=H,o=0;O>o;o++)R.r=C,R.g=K,R.b=k,R.a=T,R=R.next;for(o=1;O>o;o++)c=l+((o>N?N:o)<<2),d+=(R.r=C=F[c])*(P=O-o),f+=(R.g=K=F[c+1])*P,p+=(R.b=k=F[c+2])*P,g+=(R.a=T=F[c+3])*P,w+=C,b+=K,x+=k,S+=T,R=R.next;for(G=H,j=I,s=0;D>s;s++)F[l+3]=T=g*B>>$,0!==T?(T=255/T,F[l]=(d*B>>$)*T,F[l+1]=(f*B>>$)*T,F[l+2]=(p*B>>$)*T):F[l]=F[l+1]=F[l+2]=0,d-=m,f-=v,p-=y,g-=_,m-=G.r,v-=G.g,y-=G.b,_-=G.a,c=u+((c=s+r+1)<N?c:N)<<2,w+=G.r=F[c],b+=G.g=F[c+1],x+=G.b=F[c+2],S+=G.a=F[c+3],d+=w,f+=b,p+=x,g+=S,G=G.next,m+=C=j.r,v+=K=j.g,y+=k=j.b,_+=T=j.a,w-=C,b-=K,x-=k,S-=T,j=j.next,l+=4;u+=D}for(s=0;D>s;s++){for(b=x=S=w=f=p=g=d=0,l=s<<2,m=O*(C=F[l]),v=O*(K=F[l+1]),y=O*(k=F[l+2]),_=O*(T=F[l+3]),d+=L*C,f+=L*K,p+=L*k,g+=L*T,R=H,o=0;O>o;o++)R.r=C,R.g=K,R.b=k,R.a=T,R=R.next;for(h=D,o=1;r>=o;o++)l=h+s<<2,d+=(R.r=C=F[l])*(P=O-o),f+=(R.g=K=F[l+1])*P,p+=(R.b=k=F[l+2])*P,g+=(R.a=T=F[l+3])*P,w+=C,b+=K,x+=k,S+=T,R=R.next,M>o&&(h+=D);for(l=s,G=H,j=I,a=0;A>a;a++)c=l<<2,F[c+3]=T=g*B>>$,T>0?(T=255/T,F[c]=(d*B>>$)*T,F[c+1]=(f*B>>$)*T,F[c+2]=(p*B>>$)*T):F[c]=F[c+1]=F[c+2]=0,d-=m,f-=v,p-=y,g-=_,m-=G.r,v-=G.g,y-=G.b,_-=G.a,c=s+((c=a+O)<M?c:M)*D<<2,d+=w+=G.r=F[c],f+=b+=G.g=F[c+1],p+=x+=G.b=F[c+2],g+=S+=G.a=F[c+3],G=G.next,m+=C=j.r,v+=K=j.g,y+=k=j.b,_+=T=j.a,w-=C,b-=K,x-=k,S-=T,j=j.next,l+=D}}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var n=Math.round(this.blurRadius());n>0&&e(t,n)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,n){var i=4*(n*t.width+e),r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function n(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function i(i,r){var s=t(i,0,0),a=t(i,i.width-1,0),o=t(i,0,i.height-1),c=t(i,i.width-1,i.height-1),h=r||10;if(e(s,a)<h&&e(a,c)<h&&e(c,o)<h&&e(o,s)<h){for(var l=n([a,s,c,o]),u=[],d=0;d<i.width*i.height;d++){var f=e(l,[i.data[4*d],i.data[4*d+1],i.data[4*d+2]]);u[d]=h>f?0:255}return u}}function r(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function s(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[],o=0;n>o;o++)for(var c=0;e>c;c++){for(var h=o*e+c,l=0,u=0;r>u;u++)for(var d=0;r>d;d++){var f=o+u-s,p=c+d-s;if(f>=0&&n>f&&p>=0&&e>p){var g=f*e+p,m=i[u*r+d];l+=t[g]*m}}a[h]=2040===l?255:0}return a}function a(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[],o=0;n>o;o++)for(var c=0;e>c;c++){for(var h=o*e+c,l=0,u=0;r>u;u++)for(var d=0;r>d;d++){var f=o+u-s,p=c+d-s;if(f>=0&&n>f&&p>=0&&e>p){var g=f*e+p,m=i[u*r+d];l+=t[g]*m}}a[h]=l>=1020?255:0}return a}function o(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[],o=0;n>o;o++)for(var c=0;e>c;c++){for(var h=o*e+c,l=0,u=0;r>u;u++)for(var d=0;r>d;d++){var f=o+u-s,p=c+d-s;if(f>=0&&n>f&&p>=0&&e>p){var g=f*e+p,m=i[u*r+d];l+=t[g]*m}}a[h]=l}return a}Kinetic.Filters.Mask=function(t){var e=this.threshold(),n=i(t,e);return n&&(n=s(n,t.width,t.height),n=a(n,t.width,t.height),n=o(n,t.width,t.height),r(t,n)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(t){var e,n,i=t.data,r=i.length,s=this.red(),a=this.green(),o=this.blue();for(e=0;r>e;e+=4)n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=n*s,i[e+1]=n*a,i[e+2]=n*o,i[e+3]=i[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(t){var e,n,i,r,s,a=t.data,o=a.length,c=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=c*h*Math.cos(l*Math.PI/180),d=c*h*Math.sin(l*Math.PI/180),f=.299*c+.701*u+.167*d,p=.587*c-.587*u+.33*d,g=.114*c-.114*u-.497*d,m=.299*c-.299*u-.328*d,v=.587*c+.413*u+.035*d,y=.114*c-.114*u+.293*d,_=.299*c-.3*u+1.25*d,w=.587*c-.586*u-1.05*d,b=.114*c+.886*u-.2*d;for(e=0;o>e;e+=4)n=a[e+0],i=a[e+1],r=a[e+2],s=a[e+3],a[e+0]=f*n+p*i+g*r,a[e+1]=m*n+v*i+y*r,a[e+2]=_*n+w*i+b*r,a[e+3]=s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(t){var e,n,i,r,s,a=t.data,o=a.length,c=1,h=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=127*this.luminance(),d=c*h*Math.cos(l*Math.PI/180),f=c*h*Math.sin(l*Math.PI/180),p=.299*c+.701*d+.167*f,g=.587*c-.587*d+.33*f,m=.114*c-.114*d-.497*f,v=.299*c-.299*d-.328*f,y=.587*c+.413*d+.035*f,_=.114*c-.114*d+.293*f,w=.299*c-.3*d+1.25*f,b=.587*c-.586*d-1.05*f,x=.114*c+.886*d-.2*f;for(e=0;o>e;e+=4)n=a[e+0],i=a[e+1],r=a[e+2],s=a[e+3],a[e+0]=p*n+g*i+m*r+u,a[e+1]=v*n+y*i+_*r+u,a[e+2]=w*n+b*i+x*r+u,a[e+3]=s}}(),function(){Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),r=this.embossBlend(),s=0,a=0,o=t.data,c=t.width,h=t.height,l=4*c,u=h;switch(i){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1}do{var d=(u-1)*l,f=s;1>u+f&&(f=0),u+f>h&&(f=0);var p=(u-1+f)*c*4,g=c;do{var m=d+4*(g-1),v=a;1>g+v&&(v=0),g+v>c&&(v=0);var y=p+4*(g-1+v),_=o[m]-o[y],w=o[m+1]-o[y+1],b=o[m+2]-o[y+2],x=_,S=x>0?x:-x,C=w>0?w:-w,K=b>0?b:-b;if(C>S&&(x=w),K>S&&(x=b),x*=e,r){var k=o[m]+x,T=o[m+1]+x,P=o[m+2]+x;o[m]=k>255?255:0>k?0:k,o[m+1]=T>255?255:0>T?0:T,o[m+2]=P>255?255:0>P?0:P}else{var F=n-x;0>F?F=0:F>255&&(F=255),o[m]=o[m+1]=o[m+2]=F}}while(--g)}while(--u)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,n,i,r){var s,a=n-e,o=r-i;return 0===a?i+o/2:0===o?i:(s=(t-e)/a,s=o*s+i)}Kinetic.Filters.Enhance=function(e){var n,i,r,s,a=e.data,o=a.length,c=a[0],h=c,l=a[1],u=l,d=a[2],f=d,p=a[3],g=p,m=this.enhance();if(0!==m){for(s=0;o>s;s+=4)n=a[s+0],c>n?c=n:n>h&&(h=n),i=a[s+1],l>i?l=i:i>u&&(u=i),r=a[s+2],d>r?d=r:r>f&&(f=r);h===c&&(h=255,c=0),u===l&&(u=255,l=0),f===d&&(f=255,d=0),g===p&&(g=255,p=0);var v,y,_,w,b,x,S,C,K,k,T,P;for(m>0?(y=h+m*(255-h),_=c-m*(c-0),b=u+m*(255-u),x=l-m*(l-0),C=f+m*(255-f),P=d-m*(d-0),T=g+m*(255-g),K=p-m*(p-0)):(v=.5*(h+c),y=h+m*(h-v),_=c+m*(c-v),w=.5*(u+l),b=u+m*(u-w),x=l+m*(l-w),S=.5*(f+d),C=f+m*(f-S),P=d+m*(d-S),k=.5*(g+p),T=g+m*(g-k),K=p+m*(p-k)),s=0;o>s;s+=4)a[s+0]=t(a[s+0],c,h,_,y),a[s+1]=t(a[s+1],l,u,x,b),a[s+2]=t(a[s+2],d,f,P,C)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,r=i.length,s=255/n;for(e=0;r>e;e+=1)i[e]=Math.floor(i[e]/s)*s},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(t){var e,n=255*this.noise(),i=t.data,r=i.length,s=n/2;for(e=0;r>e;e+=4)i[e+0]+=s-2*s*Math.random(),i[e+1]+=s-2*s*Math.random(),i[e+2]+=s-2*s*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(t){var e,n,i,r,s,a,o,c,h,l,u,d,f,p,g=Math.ceil(this.pixelSize()),m=t.width,v=t.height,y=Math.ceil(m/g),_=Math.ceil(v/g);for(t=t.data,d=0;y>d;d+=1)for(f=0;_>f;f+=1){for(r=0,s=0,a=0,o=0,c=d*g,h=c+g,l=f*g,u=l+g,p=0,e=c;h>e;e+=1)if(!(e>=m))for(n=l;u>n;n+=1)n>=v||(i=4*(m*n+e),r+=t[i+0],s+=t[i+1],a+=t[i+2],o+=t[i+3],p+=1);for(r/=p,s/=p,a/=p,e=c;h>e;e+=1)if(!(e>=m))for(n=l;u>n;n+=1)n>=v||(i=4*(m*n+e),t[i+0]=r,t[i+1]=s,t[i+2]=a,t[i+3]=o)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(t){var e,n=255*this.threshold(),i=t.data,r=i.length;for(e=0;r>e;e+=1)i[e]=i[e]<n?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(t){var e,n,i,r,s,a,o,c,h,l=t.data,u=t.width,d=t.height,f=4*u;do{e=(d-1)*f,n=u;do i=e+4*(n-1),r=l[i],s=l[i+1],a=l[i+2],o=.393*r+.769*s+.189*a,c=.349*r+.686*s+.168*a,h=.272*r+.534*s+.131*a,l[i]=o>255?255:o,l[i+1]=c>255?255:c,l[i+2]=h>255?255:h,l[i+3]=l[i+3];while(--n)}while(--d)}}(),function(){Kinetic.Filters.Solarize=function(t){var e=t.data,n=t.width,i=t.height,r=4*n,s=i;do{var a=(s-1)*r,o=n;do{var c=a+4*(o-1),h=e[c],l=e[c+1],u=e[c+2];h>127&&(h=255-h),l>127&&(l=255-l),u>127&&(u=255-u),e[c]=h,e[c+1]=l,e[c+2]=u}while(--o)}while(--s)}}(),function(){var t=function(t,e,n){var i,r,s,a,o=t.data,c=e.data,h=t.width,l=t.height,u=n.polarCenterX||h/2,d=n.polarCenterY||l/2,f=0,p=0,g=0,m=0,v=Math.sqrt(u*u+d*d);r=h-u,s=l-d,a=Math.sqrt(r*r+s*s),v=a>v?a:v;var y,_,w,b,x=l,S=h,C=360/S*Math.PI/180;for(_=0;S>_;_+=1)for(w=Math.sin(_*C),b=Math.cos(_*C),y=0;x>y;y+=1)r=Math.floor(u+v*y/x*b),s=Math.floor(d+v*y/x*w),i=4*(s*h+r),f=o[i+0],p=o[i+1],g=o[i+2],m=o[i+3],i=4*(_+y*h),c[i+0]=f,c[i+1]=p,c[i+2]=g,c[i+3]=m},e=function(t,e,n){var i,r,s,a,o,c,h=t.data,l=e.data,u=t.width,d=t.height,f=n.polarCenterX||u/2,p=n.polarCenterY||d/2,g=0,m=0,v=0,y=0,_=Math.sqrt(f*f+p*p);r=u-f,s=d-p,c=Math.sqrt(r*r+s*s),_=c>_?c:_;var w,b,x,S,C=d,K=u,k=n.polarRotation||0;for(r=0;u>r;r+=1)for(s=0;d>s;s+=1)a=r-f,o=s-p,w=Math.sqrt(a*a+o*o)*C/_,b=(180*Math.atan2(o,a)/Math.PI+360+k)%360,b=b*K/360,x=Math.floor(b),S=Math.floor(w),i=4*(S*u+x),g=h[i+0],m=h[i+1],v=h[i+2],y=h[i+3],i=4*(s*u+r),l[i+0]=g,l[i+1]=m,l[i+2]=v,l[i+3]=y},n=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(i){var r,s,a,o,c,h,l,u,d,f,p=i.width,g=i.height,m=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),y=Math.floor(p*(v%360)/360);if(!(1>m)){n.width=p,n.height=g;var _=n.getContext("2d").getImageData(0,0,p,g);t(i,_,{polarCenterX:p/2,polarCenterY:g/2});for(var w=p/Math.pow(2,m);8>=w;)w=2*w,m-=1;w=Math.ceil(w);var b=w,x=0,S=b,C=1;for(y+w>p&&(x=b,S=0,C=-1),s=0;g>s;s+=1)for(r=x;r!==S;r+=C)a=Math.round(r+y)%p,d=4*(p*s+a),c=_.data[d+0],h=_.data[d+1],l=_.data[d+2],u=_.data[d+3],f=4*(p*s+r),_.data[f+0]=c,_.data[f+1]=h,_.data[f+2]=l,_.data[f+3]=u;for(s=0;g>s;s+=1)for(b=Math.floor(w),o=0;m>o;o+=1){for(r=0;b+1>r;r+=1)d=4*(p*s+r),c=_.data[d+0],h=_.data[d+1],l=_.data[d+2],u=_.data[d+3],f=4*(p*s+2*b-r-1),_.data[f+0]=c,_.data[f+1]=h,_.data[f+2]=l,_.data[f+3]=u;b*=2}e(_,i,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){Kinetic.root.setTimeout(t,1e3/60)}function e(){return r.apply(Kinetic.root,arguments)}var n=500,i=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),r=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t}();Kinetic.Animation=function(t,e){var n=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,n,i=this.layers;if(i){for(e=i.length,n=0;e>n;n++)if(i[n]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){var t,e=Kinetic.Animation,n=e.animations,i=n.length;for(t=0;i>t;t++)if(n[t].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;r>e;e++)if(i[e].id===n){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var t,e,n,r,s,a,o,c,h={},l=this.animations;for(r=0;r<l.length;r++){for(t=l[r],e=t.layers,n=t.func,t._updateFrameObject(i()),a=e.length,s=0;a>s;s++)o=e[s],void 0!==o._id&&(h[o._id]=o);n&&n.call(t,t.frame)}for(c in h)h[c].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(e(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var s=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){s.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&i()-t.lastBatchDrawTime>n&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=i(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}((1,eval)("this")),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,n=2,i=3,r=0;Kinetic.Tween=function(e){var n,i=this,a=e.node,o=a._id,c=e.duration||1,h=e.easing||Kinetic.Easings.Linear,l=!!e.yoyo;this.node=a,this._id=r++,this.anim=new Kinetic.Animation(function(){i.tween.onEnterFrame()},a.getLayer()),this.tween=new s(n,function(t){i._tweenFunc(t)},h,0,1,1e3*c,l),this._addListeners(),Kinetic.Tween.attrs[o]||(Kinetic.Tween.attrs[o]={}),Kinetic.Tween.attrs[o][this._id]||(Kinetic.Tween.attrs[o][this._id]={}),Kinetic.Tween.tweens[o]||(Kinetic.Tween.tweens[o]={});for(n in e)void 0===t[n]&&this._addAttr(n,e[n]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var n,i,r,s,a,o=this.node,c=o._id;if(r=Kinetic.Tween.tweens[c][t],r&&delete Kinetic.Tween.attrs[c][r][t],n=o.getAttr(t),Kinetic.Util._isArray(e))for(i=[],a=e.length,s=0;a>s;s++)i.push(e[s]-n[s]);else i=e-n;Kinetic.Tween.attrs[c][this._id][t]={start:n,diff:i},Kinetic.Tween.tweens[c][t]=this._id},_tweenFunc:function(t){var e,n,i,r,s,a,o,c=this.node,h=Kinetic.Tween.attrs[c._id][this._id];for(e in h){if(n=h[e],i=n.start,r=n.diff,Kinetic.Util._isArray(i))for(s=[],o=i.length,a=0;o>a;a++)s.push(i[a]+r[a]*t);else s=i+r*t;c.setAttr(e,s)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()
}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.node,this.tween.reset(),this},seek:function(t){return this.node,this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.node,this.tween.finish(),this},destroy:function(){var t,e=this.node._id,n=this._id,i=Kinetic.Tween.tweens[e];this.pause();for(t in i)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][n]}};var s=function(t,e,n,i,r,s,a){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()};s.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=i,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===n?this.setTime(t):this.state===i&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,n,i){var r=1.70158;return n*(t/=i)*t*((r+1)*t-r)+e},BackEaseOut:function(t,e,n,i){var r=1.70158;return n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut:function(t,e,n,i){var r=1.70158;return(t/=i/2)<1?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn:function(t,e,n,i,r,s){var a=0;return 0===t?e:1==(t/=i)?e+n:(s||(s=.3*i),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/s))+e)},ElasticEaseOut:function(t,e,n,i,r,s){var a=0;return 0===t?e:1==(t/=i)?e+n:(s||(s=.3*i),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin(2*(t*i-a)*Math.PI/s)+n+e)},ElasticEaseInOut:function(t,e,n,i,r,s){var a=0;return 0===t?e:2==(t/=i/2)?e+n:(s||(s=.3*i*1.5),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/s)+e:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-a)*Math.PI/s)*.5+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,n,i){return n-Kinetic.Easings.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut:function(t,e,n,i){return i/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,n,i)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+e},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,n=e.node;if(n){if(!e.isDragging){var i=n.getStage().getPointerPosition(),r=n.dragDistance(),s=Math.max(Math.abs(i.x-e.startPointerPos.x),Math.abs(i.y-e.startPointerPos.y));if(r>s)return}n._setDragPosition(t),e.isDragging||(e.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:t},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)}},_endDragBefore:function(t){var e,n,i=Kinetic.DD,r=i.node;r&&(e=r.nodeType,n=r.getLayer(),i.anim.stop(),i.isDragging&&(i.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=r)),delete i.node,(n||r).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),n=this.getLayer(),i=e.getPointerPosition(),r=this.getAbsolutePosition();i&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=i,t.offset.x=i.x-r.x,t.offset.y=i.y-r.y,t.anim.setLayers(n||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,n=this.getStage().getPointerPosition(),i=this.getDragBoundFunc();if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y};void 0!==i&&(r=i.call(this,r,t)),this.setAbsolutePosition(r)}},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=Kinetic.document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(t){if(t){var e=new Kinetic.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(!(arguments.length>1)){if(t.getParent())return void t.moveTo(this);var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this}for(var n=0;n<arguments.length;n++)this.add(arguments[n])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,n,i,r,s,a,o,c=[],h=t.replace(/ /g,"").split(","),l=h.length;for(e=0;l>e;e++)if(i=h[e],"#"===i.charAt(0))s=this._getNodeById(i.slice(1)),s&&c.push(s);else if("."===i.charAt(0))r=this._getNodesByName(i.slice(1)),c=c.concat(r);else for(a=this.getChildren(),o=a.length,n=0;o>n;n++)c=c.concat(a[n]._get(i));return Kinetic.Collection.toCollection(c)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),n=this.getChildren(),i=n.length,r=0;i>r;r++)e=e.concat(n[r]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;n>i;i++){var r=e[i];t.children.push(r.toObject())}return t},_getDescendants:function(t){for(var e=[],n=t.length,i=0;n>i;i++){var r=t[i];this.isAncestorOf(r)&&e.push(r)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas(),r=i&&i.getContext(),s=this._cache.canvas,a=s&&s.scene;return this.isVisible()&&(a?this._drawCachedSceneCanvas(r):this._drawChildren(i,"drawScene",e)),this},drawHit:function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas,r=i&&i.getContext(),s=this._cache.canvas,a=s&&s.hit;return this.shouldDrawHit()&&(a?this._drawCachedHitCanvas(r):this._drawChildren(i,"drawHit",e)),this},_drawChildren:function(t,e,n){var i,r,s=this.getLayer(),a=t&&t.getContext(),o=this.getClipWidth(),c=this.getClipHeight(),h=o&&c;h&&s&&(i=this.getClipX(),r=this.getClipY(),a.save(),s._applyTransform(this,a),a.beginPath(),a.rect(i,r,o,c),a.clip(),a.reset()),this.children.each(function(i){i[e](t,n)}),h&&a.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function n(t){t.fill()}function i(t){t.stroke()}function r(){this._clearCache(s)}var s="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(s){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=n,this._strokeFuncHit=i;for(var a,o=Kinetic.shapes;a=Kinetic.Util.getRandomColor(),!a||a in o;);this.colorKey=a,o[a]=this,Kinetic.Node.call(this,s),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",r)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(s,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,n=this.getStage(),i=n.bufferHitCanvas;return i.getContext().clear(),this.drawScene(i),e=i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var n,i,r,s=this.getLayer(),a=t||s.getCanvas(),o=a.getContext(),c=this._cache.canvas,h=this.sceneFunc(),l=this.hasShadow();return this.isVisible()&&(c?this._drawCachedSceneCanvas(o):h&&(o.save(),this._useBufferCanvas()?(n=this.getStage(),i=n.bufferCanvas,r=i.getContext(),r.clear(),r.save(),r._applyLineJoin(this),s._applyTransform(this,r,e),h.call(this,r),r.restore(),l&&(o.save(),o._applyShadow(this),o.drawImage(i._canvas,0,0),o.restore()),o._applyOpacity(this),o.drawImage(i._canvas,0,0)):(o._applyLineJoin(this),s._applyTransform(this,o,e),l&&(o.save(),o._applyShadow(this),h.call(this,o),o.restore()),o._applyOpacity(this),h.call(this,o)),o.restore())),this},drawHit:function(t,e){var n=this.getLayer(),i=t||n.hitCanvas,r=i.getContext(),s=this.hitFunc()||this.sceneFunc(),a=this._cache.canvas,o=a&&a.hit;return this.shouldDrawHit()&&(o?this._drawCachedHitCanvas(r):s&&(r.save(),r._applyLineJoin(this),n._applyTransform(this,r,e),s.call(this,r),r.restore())),this},drawHitFromCache:function(t){var e,n,i,r,s,a,o,c,h=t||0,l=this._cache.canvas,u=this._getCachedSceneCanvas(),d=u.getContext(),f=l.hit,p=f.getContext(),g=u.getWidth(),m=u.getHeight();p.clear();try{for(e=d.getImageData(0,0,g,m),n=e.data,i=p.getImageData(0,0,g,m),r=i.data,s=n.length,a=Kinetic.Util._hexToRgb(this.colorKey),o=0;s>o;o+=4)c=n[o+3],c>h&&(r[o]=a.r,r[o+1]=a.g,r[o+2]=a.b,r[o+3]=255);p.putImageData(i,0,0)}catch(v){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function t(t,e){t.content.addEventListener(e,function(n){t[M+e](n)},!1)}var e="Stage",n="string",i="px",r="mouseout",s="mouseleave",a="mouseover",o="mouseenter",c="mousemove",h="mousedown",l="mouseup",u="click",d="dblclick",f="touchstart",p="touchend",g="tap",m="dbltap",v="touchmove",y="contentMouseout",_="contentMouseover",w="contentMousemove",b="contentMousedown",x="contentMouseup",S="contentClick",C="contentDblclick",K="contentTouchstart",k="contentTouchend",T="contentDbltap",P="contentTouchmove",F="div",D="relative",A="inline-block",E="kineticjs-content",N=" ",M="_",O="container",L="",H=[h,c,l,r,f,v,p,a],I=H.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if(typeof t===n){var e=t;if(t=Kinetic.document.getElementById(t),!t)throw"Can not find container in document with id "+e}return this._setAttr(O,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,n=e.length;for(t=0;n>t;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Kinetic.document.createElement(F),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);e>-1&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(r){var s=c[r],h=s.toDataURL(),l=new Kinetic.window.Image;l.onload=function(){o.drawImage(l,0,0),r<c.length-1?e(r+1):t.callback(a.toDataURL(n,i))},l.src=h}t=t||{};var n=t.mimeType||null,i=t.quality||null,r=t.x||0,s=t.y||0,a=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),o=a.getContext()._context,c=this.children;(r||s)&&o.translate(-1*r,-1*s),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,n,i=this.getChildren(),r=i.length,s=r-1;for(e=s;e>=0;e--)if(n=i[e].getIntersection(t))return n;return null},_resizeDOM:function(){if(this.content){var t,e,n=this.getWidth(),r=this.getHeight(),s=this.getChildren(),a=s.length;for(this.content.style.width=n+i,this.content.style.height=r+i,this.bufferCanvas.setSize(n,r),this.bufferHitCanvas.setSize(n,r),t=0;a>t;t++)e=s[t],e.getCanvas().setSize(n,r),e.hitCanvas.setSize(n,r),e.draw()}},add:function(t){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;for(var e=0;e<arguments.length;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var e=0;I>e;e++)t(this,H[e])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire(_,{evt:t}))},_mouseout:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(r,{evt:t}),e._fireAndBubble(s,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire(y,{evt:t})}},_mousemove:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===n._id?n._fireAndBubble(c,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(r,{evt:t},n),this.targetShape._fireAndBubble(s,{evt:t},n)),n._fireAndBubble(a,{evt:t},this.targetShape),n._fireAndBubble(o,{evt:t},this.targetShape),this.targetShape=n):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(r,{evt:t}),this.targetShape._fireAndBubble(s,{evt:t}),this.targetShape=null),this._fire(w,{evt:t}),e&&e._drag(t)}t.preventDefault&&t.preventDefault()},_mousedown:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(h,{evt:t})),this._fire(b,{evt:t})}t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(l,{evt:t}),Kinetic.listenClickTap&&n&&n._id===e._id&&(e._fireAndBubble(u,{evt:t}),i&&e._fireAndBubble(d,{evt:t}))),this._fire(x,{evt:t}),Kinetic.listenClickTap&&(this._fire(S,{evt:t}),i&&this._fire(C,{evt:t})),Kinetic.listenClickTap=!1}t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(f,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(K,{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(p,{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(g,{evt:t}),n&&e._fireAndBubble(m,{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(k,{evt:t}),n&&this._fire(T,{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()&&(n._fireAndBubble(v,{evt:t}),n.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(P,{evt:t}),e&&e._drag(t)},_setPointerPosition:function(t){var e,n=this._getContentPosition(),i=t.offsetX,r=t.clientX,s=null,a=null;t=t?t:window.event,void 0!==t.touches?t.touches.length>0&&(e=t.touches[0],s=e.clientX-n.left,a=e.clientY-n.top):void 0!==i?(s=i,a=t.offsetY):"mozilla"===Kinetic.UA.browser?(s=t.layerX,a=t.layerY):void 0!==r&&n&&(s=r-n.left,a=t.clientY-n.top),null!==s&&null!==a&&(this.pointerPos={x:s,y:a})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";t=Kinetic.document.createElement(F)}t.innerHTML=L,this.content=Kinetic.document.createElement(F),this.content.style.position=D,this.content.style.display=A,this.content.className=E,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var n,i,r=t.split(N),s=r.length;for(n=0;s>n;n++)i=r[n],this.content.addEventListener(i,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var t="#",e="beforeDraw",n="draw",i=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],r=i.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,n,s,a;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(n=0;r>n;n++){if(s=i[n],e=this._getIntersection({x:t.x+s.x,y:t.y+s.y}),a=e.shape)return a;if(!e.antialiased)return null}},_getIntersection:function(e){var n,i,r=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,s=r[3];return 255===s?(n=Kinetic.Util._rgbToHex(r[0],r[1],r[2]),i=Kinetic.shapes[t+n],{shape:i}):s>0?{antialiased:!0}:{}},drawScene:function(t,i){var r=this.getLayer(),s=t||r&&r.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&s.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,s,i),this._fire(n,{node:this}),this},_applyTransform:function(t,e,n){var i=t.getAbsoluteTransform(n).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},drawHit:function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,i,e),this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){var e=t.getType();"Shape"!==e&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),n=t||e&&e.getCanvas();
return this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n),this},_applyTransform:function(t,e,n){if(!n||n._id!==this._id){var i=t.getTransform().getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),n=this.getWidth(),i=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(n-e,0),t.arc(n-e,e,e,3*Math.PI/2,0,!1),t.lineTo(n,i-e),t.arc(n-e,i-e,e,0,Math.PI/2,!1),t.lineTo(e,i),t.arc(e,i-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var n=this.getRadius(),i=n.x,r=n.y;e.beginPath(),e.save(),i!==r&&e.scale(1,r/i),e.arc(0,0,i,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var t=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setOuterRadius(t/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180,Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=Kinetic.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,n),t.arc(0,0,this.getInnerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,n,i,r,s=this.getWidth(),a=this.getHeight(),o=this.getImage();o&&(e=this.getCrop(),n=e.width,i=e.height,r=n&&i?[o,e.x,e.y,n,i,0,0,s,a]:[o,0,0,s,a]),t.beginPath(),t.rect(0,0,s,a),t.closePath(),t.fillStrokeShape(this),o&&t.drawImage.apply(t,r)},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="auto",i="center",r="Change.kinetic",s="2d",a="-",o="",c="left",h="text",l="Text",u="middle",d="normal",f="px ",p=" ",g="right",m="word",v="char",y="none",_=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],w=_.length,b=Kinetic.Util.createCanvasElement().getContext(s);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(i){var s=this;void 0===i.width&&(i.width=n),void 0===i.height&&(i.height=n),Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this.className=l;for(var a=0;w>a;a++)this.on(_[a]+r,s._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,n=this.getPadding(),r=this.getTextHeight(),s=this.getLineHeight()*r,a=this.textArr,o=a.length,h=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",u),t.setAttr("textAlign",c),t.save(),t.translate(n,0),t.translate(0,n+r/2),e=0;o>e;e++){var l=a[e],d=l.text,f=l.width;t.save(),this.getAlign()===g?t.translate(h-f-2*n,0):this.getAlign()===i&&t.translate((h-f-2*n)/2,0),this.partialText=d,t.fillStrokeShape(this),t.restore(),t.translate(0,s)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr(h,e),this},getWidth:function(){return this.attrs.width===n?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===n?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,n=b,i=this.getFontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:parseInt(i,10)}},_getContextFont:function(){return this.getFontStyle()+p+this.getFontVariant()+p+this.getFontSize()+f+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return b.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),i=0,r=this.getLineHeight()*e,s=this.attrs.width,o=this.attrs.height,c=s!==n,h=o!==n,l=this.getPadding(),u=s-2*l,d=o-2*l,f=0,g=this.getWrap(),m=g!==y,_=g!==v&&m;this.textArr=[],b.save(),b.font=this._getContextFont();for(var w=0,x=t.length;x>w;++w){var S=t[w],C=this._getTextWidth(S);if(c&&C>u)for(;S.length>0;){for(var K=0,k=S.length,T="",P=0;k>K;){var F=K+k>>>1,D=S.slice(0,F+1),A=this._getTextWidth(D);u>=A?(K=F+1,T=D,P=A):k=F}if(!T)break;if(_){var E=Math.max(T.lastIndexOf(p),T.lastIndexOf(a))+1;E>0&&(K=E,T=T.slice(0,K),P=this._getTextWidth(T))}if(this._addTextLine(T,P),i=Math.max(i,P),f+=r,!m||h&&f+r>d)break;if(S=S.slice(K),S.length>0&&(C=this._getTextWidth(S),u>=C)){this._addTextLine(S,C),f+=r,i=Math.max(i,C);break}}else this._addTextLine(S,C),f+=r,i=Math.max(i,C);if(h&&f+r>d)break}b.restore(),this.textHeight=e,this.textWidth=i}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",d),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",d),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",c),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",m),Kinetic.Factory.addGetter(Kinetic.Text,"text",o),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,i,r=this.getPoints(),s=r.length,a=this.getTension(),o=this.getClosed();if(t.beginPath(),t.moveTo(r[0],r[1]),0!==a&&s>4){for(e=this.getTensionPoints(),n=e.length,i=o?0:4,o||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n-2>i;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);o||t.quadraticCurveTo(e[n-2],e[n-1],r[s-2],r[s-1])}else for(i=2;s>i;i+=2)t.lineTo(r[i],r[i+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,n=this.getTension(),i=Kinetic.Util,r=i._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),s=i._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),a=Kinetic.Util._expandPoints(t,n),o=[r[2],r[3]].concat(a).concat([s[0],s[1],t[e-2],t[e-1],s[2],s[3],r[0],r[1],t[0],t[1]]);return o}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),i=4*n,r=this.getAnimations()[e],s=r[i+0],a=r[i+1],o=r[i+2],c=r[i+3],h=this.getImage();h&&t.drawImage(h,s,a,o,c,0,0,o,c)},_hitFunc:function(t){var e=this.getAnimation(),n=this.frameIndex(),i=4*n,r=this.getAnimations()[e],s=r[i+2],a=r[i+3];t.beginPath(),t.rect(0,0,s,a),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),n=this.getAnimations(),i=n[e],r=i.length/4;this.frameIndex(r-1>t?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,n=!1;t.beginPath();for(var i=0;i<e.length;i++){var r=e[i].command,s=e[i].points;switch(r){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var a=s[0],o=s[1],c=s[2],h=s[3],l=s[4],u=s[5],d=s[6],f=s[7],p=c>h?c:h,g=c>h?1:c/h,m=c>h?h/c:1;t.translate(a,o),t.rotate(d),t.scale(g,m),t.arc(0,0,p,l,l+u,1-f),t.scale(1/g,1/m),t.rotate(-d),t.translate(-a,-o);break;case"z":t.closePath(),n=!0}}n?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},Kinetic.Path.getPointOnLine=function(t,e,n,i,r,s,a){void 0===s&&(s=e),void 0===a&&(a=n);var o=(r-n)/(i-e+1e-8),c=Math.sqrt(t*t/(1+o*o));e>i&&(c*=-1);var h,l=o*c;if(i===e)h={x:s,y:a+l};else if((a-n)/(s-e+1e-8)===o)h={x:s+c,y:a+l};else{var u,d,f=this.getLineLength(e,n,i,r);if(1e-8>f)return void 0;var p=(s-e)*(i-e)+(a-n)*(r-n);p/=f*f,u=e+p*(i-e),d=n+p*(r-n);var g=this.getLineLength(s,a,u,d),m=Math.sqrt(t*t-g*g);c=Math.sqrt(m*m/(1+o*o)),e>i&&(c*=-1),l=o*c,h={x:u+c,y:d+l}}return h},Kinetic.Path.getPointOnCubicBezier=function(t,e,n,i,r,s,a,o,c){function h(t){return t*t*t}function l(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}var f=o*h(t)+s*l(t)+i*u(t)+e*d(t),p=c*h(t)+a*l(t)+r*u(t)+n*d(t);return{x:f,y:p}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,n,i,r,s,a){function o(t){return t*t}function c(t){return 2*t*(1-t)}function h(t){return(1-t)*(1-t)}var l=s*o(t)+i*c(t)+e*h(t),u=a*o(t)+r*c(t)+n*h(t);return{x:l,y:u}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,n,i,r,s){var a=Math.cos(s),o=Math.sin(s),c={x:n*Math.cos(r),y:i*Math.sin(r)};return{x:t+(c.x*a-c.y*o),y:e+(c.x*o+c.y*a)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var r=e.split("|"),s=[],a=0,o=0;for(i=1;i<r.length;i++){var c=r[i],h=c.charAt(0);c=c.slice(1),c=c.replace(new RegExp(",-","g"),"-"),c=c.replace(new RegExp("-","g"),",-"),c=c.replace(new RegExp("e,-","g"),"e-");var l=c.split(",");l.length>0&&""===l[0]&&l.shift();for(var u=0;u<l.length;u++)l[u]=parseFloat(l[u]);for(;l.length>0&&!isNaN(l[0]);){var d,f,p,g,m,v,y,_,w,b,x=null,S=[],C=a,K=o;switch(h){case"l":a+=l.shift(),o+=l.shift(),x="L",S.push(a,o);break;case"L":a=l.shift(),o=l.shift(),S.push(a,o);break;case"m":var k=l.shift(),T=l.shift();if(a+=k,o+=T,x="M",s.length>2&&"z"===s[s.length-1].command)for(var P=s.length-2;P>=0;P--)if("M"===s[P].command){a=s[P].points[0]+k,o=s[P].points[1]+T;break}S.push(a,o),h="l";break;case"M":a=l.shift(),o=l.shift(),x="M",S.push(a,o),h="L";break;case"h":a+=l.shift(),x="L",S.push(a,o);break;case"H":a=l.shift(),x="L",S.push(a,o);break;case"v":o+=l.shift(),x="L",S.push(a,o);break;case"V":o=l.shift(),x="L",S.push(a,o);break;case"C":S.push(l.shift(),l.shift(),l.shift(),l.shift()),a=l.shift(),o=l.shift(),S.push(a,o);break;case"c":S.push(a+l.shift(),o+l.shift(),a+l.shift(),o+l.shift()),a+=l.shift(),o+=l.shift(),x="C",S.push(a,o);break;case"S":f=a,p=o,d=s[s.length-1],"C"===d.command&&(f=a+(a-d.points[2]),p=o+(o-d.points[3])),S.push(f,p,l.shift(),l.shift()),a=l.shift(),o=l.shift(),x="C",S.push(a,o);break;case"s":f=a,p=o,d=s[s.length-1],"C"===d.command&&(f=a+(a-d.points[2]),p=o+(o-d.points[3])),S.push(f,p,a+l.shift(),o+l.shift()),a+=l.shift(),o+=l.shift(),x="C",S.push(a,o);break;case"Q":S.push(l.shift(),l.shift()),a=l.shift(),o=l.shift(),S.push(a,o);break;case"q":S.push(a+l.shift(),o+l.shift()),a+=l.shift(),o+=l.shift(),x="Q",S.push(a,o);break;case"T":f=a,p=o,d=s[s.length-1],"Q"===d.command&&(f=a+(a-d.points[0]),p=o+(o-d.points[1])),a=l.shift(),o=l.shift(),x="Q",S.push(f,p,a,o);break;case"t":f=a,p=o,d=s[s.length-1],"Q"===d.command&&(f=a+(a-d.points[0]),p=o+(o-d.points[1])),a+=l.shift(),o+=l.shift(),x="Q",S.push(f,p,a,o);break;case"A":g=l.shift(),m=l.shift(),v=l.shift(),y=l.shift(),_=l.shift(),w=a,b=o,a=l.shift(),o=l.shift(),x="A",S=this.convertEndpointToCenterParameterization(w,b,a,o,y,_,g,m,v);break;case"a":g=l.shift(),m=l.shift(),v=l.shift(),y=l.shift(),_=l.shift(),w=a,b=o,a+=l.shift(),o+=l.shift(),x="A",S=this.convertEndpointToCenterParameterization(w,b,a,o,y,_,g,m,v)}s.push({command:x||h,points:S,start:{x:C,y:K},pathLength:this.calcLength(C,K,x||h,S)})}("z"===h||"Z"===h)&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},Kinetic.Path.calcLength=function(t,e,n,i){var r,s,a,o,c=Kinetic.Path;switch(n){case"L":return c.getLineLength(t,e,i[0],i[1]);case"C":for(r=0,s=c.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),o=.01;1>=o;o+=.01)a=c.getPointOnCubicBezier(o,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;return r;case"Q":for(r=0,s=c.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),o=.01;1>=o;o+=.01)a=c.getPointOnQuadraticBezier(o,t,e,i[0],i[1],i[2],i[3]),r+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;return r;case"A":r=0;var h=i[4],l=i[5],u=i[4]+l,d=Math.PI/180;if(Math.abs(h-u)<d&&(d=Math.abs(h-u)),s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),0>l)for(o=h-d;o>u;o-=d)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),r+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(o=h+d;u>o;o+=d)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),r+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),r+=c.getLineLength(s.x,s.y,a.x,a.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,n,i,r,s,a,o,c){var h=c*(Math.PI/180),l=Math.cos(h)*(t-n)/2+Math.sin(h)*(e-i)/2,u=-1*Math.sin(h)*(t-n)/2+Math.cos(h)*(e-i)/2,d=l*l/(a*a)+u*u/(o*o);d>1&&(a*=Math.sqrt(d),o*=Math.sqrt(d));var f=Math.sqrt((a*a*o*o-a*a*u*u-o*o*l*l)/(a*a*u*u+o*o*l*l));r===s&&(f*=-1),isNaN(f)&&(f=0);var p=f*a*u/o,g=f*-o*l/a,m=(t+n)/2+Math.cos(h)*p-Math.sin(h)*g,v=(e+i)/2+Math.sin(h)*p+Math.cos(h)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},w=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},b=w([1,0],[(l-p)/a,(u-g)/o]),x=[(l-p)/a,(u-g)/o],S=[(-1*l-p)/a,(-1*u-g)/o],C=w(x,S);return _(x,S)<=-1&&(C=Math.PI),_(x,S)>=1&&(C=0),0===s&&C>0&&(C-=2*Math.PI),1===s&&0>C&&(C+=2*Math.PI),[m,v,a,o,b,C,h,s]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var n="",i="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(n){var i=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){i.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",i._setTextData),i._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,n=0;n<e.length;n++){t.save();var i=e[n].p0;t.translate(i.x,i.y),t.rotate(e[n].rotation),this.partialText=e[n].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,n=e.getContext("2d");n.save(),n.font=this._getContextFont();var i=n.measureText(t);return n.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var n,i,r,s=this.attrs.text.split(""),a=-1,o=0,c=function(){o=0;for(var e=t.dataArray,i=a+1;i<e.length;i++){if(e[i].pathLength>0)return a=i,e[i];"M"==e[i].command&&(n={x:e[i].points[0],y:e[i].points[1]})}return{}},h=function(e){var s=t._getTextSize(e).width,a=0,h=0;for(i=void 0;Math.abs(s-a)/s>.01&&25>h;){h++;for(var l=a;void 0===r;)r=c(),r&&l+r.pathLength<s&&(l+=r.pathLength,r=void 0);if(r==={}||void 0===n)return void 0;var u=!1;switch(r.command){case"L":Kinetic.Path.getLineLength(n.x,n.y,r.points[0],r.points[1])>s?i=Kinetic.Path.getPointOnLine(s,n.x,n.y,r.points[0],r.points[1],n.x,n.y):r=void 0;break;case"A":var d=r.points[4],f=r.points[5],p=r.points[4]+f;0===o?o=d+1e-8:s>a?o+=Math.PI/180*f/Math.abs(f):o-=Math.PI/360*f/Math.abs(f),(0>f&&p>o||f>=0&&o>p)&&(o=p,u=!0),i=Kinetic.Path.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],o,r.points[6]);break;case"C":0===o?o=s>r.pathLength?1e-8:s/r.pathLength:s>a?o+=(s-a)/r.pathLength:o-=(a-s)/r.pathLength,o>1&&(o=1,u=!0),i=Kinetic.Path.getPointOnCubicBezier(o,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3],r.points[4],r.points[5]);break;case"Q":0===o?o=s/r.pathLength:s>a?o+=(s-a)/r.pathLength:o-=(a-s)/r.pathLength,o>1&&(o=1,u=!0),i=Kinetic.Path.getPointOnQuadraticBezier(o,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3])}void 0!==i&&(a=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y)),u&&(u=!1,r=void 0)}},l=0;l<s.length&&(h(s[l]),void 0!==n&&void 0!==i);l++){var u=Kinetic.Path.getLineLength(n.x,n.y,i.x,i.y),d=0,f=Kinetic.Path.getPointOnLine(d+u/2,n.x,n.y,i.x,i.y),p=Math.atan2(i.y-n.y,i.x-n.x);this.glyphInfo.push({transposeX:f.x,transposeY:f.y,text:s[l],rotation:p,p0:n,p1:i}),n=i}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",i),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",i),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",n),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,n,i,r=this.attrs.sides,s=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-s),e=1;r>e;e++)n=s*Math.sin(2*e*Math.PI/r),i=-1*s*Math.cos(2*e*Math.PI/r),t.lineTo(n,i);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var r=1;2*i>r;r++){var s=r%2===0?n:e,a=s*Math.sin(r*Math.PI/i),o=-1*s*Math.cos(r*Math.PI/i);t.lineTo(a,o)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",n="none",i="up",r="right",s="down",a="left",o="Label",c=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=o,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(n){var i,r=this,s=function(){r._sync()};for(i=0;c>i;i++)n.on(t[i]+e,s)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,n,o,c,h,l,u=this.getText(),d=this.getTag();if(u&&d){switch(t=u.getWidth(),e=u.getHeight(),n=d.getPointerDirection(),o=d.getPointerWidth(),l=d.getPointerHeight(),c=0,h=0,n){case i:c=t/2,h=-1*l;break;case r:c=t+o,h=e/2;break;case s:c=t/2,h=e+l;break;case a:c=-1*o,h=e/2}d.setAttrs({x:-1*c,y:-1*h,width:t,height:e}),u.setAttrs({x:-1*c,y:-1*h})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),n=this.getHeight(),o=this.getPointerDirection(),c=this.getPointerWidth(),h=this.getPointerHeight();t.beginPath(),t.moveTo(0,0),o===i&&(t.lineTo((e-c)/2,0),t.lineTo(e/2,-1*h),t.lineTo((e+c)/2,0)),t.lineTo(e,0),o===r&&(t.lineTo(e,(n-h)/2),t.lineTo(e+c,n/2),t.lineTo(e,(n+h)/2)),t.lineTo(e,n),o===s&&(t.lineTo((e+c)/2,n),t.lineTo(e/2,n+h),t.lineTo((e-c)/2,n)),t.lineTo(0,n),o===a&&(t.lineTo(0,(n+h)/2),t.lineTo(-1*c,n/2),t.lineTo(0,(n-h)/2)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),function(t){define("handlebars",[],function(){return function(){var e=function(){var t=function(){function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){function e(t){return o[t]||"&amp;"}function n(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function i(t){return t instanceof a?t.toString():t||0===t?(t=""+t,h.test(t)?t.replace(c,e):t):""}function r(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var s={},a=t,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,h=/[&<>"'`]/;s.extend=n;var l=Object.prototype.toString;s.toString=l;var u=function(t){return"function"==typeof t};u(/x/)&&(u=function(t){return"function"==typeof t&&"[object Function]"===l.call(t)});var u;s.isFunction=u;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===l.call(t):!1};return s.isArray=d,s.escapeExpression=i,s.isEmpty=r,s}(t),n=function(){function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),s=0;s<n.length;s++)this[n[s]]=r[n[s]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new o("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},r=n.fn;return d(e)&&(e=e.call(this)),e===!0?r(this):e===!1||null==e?i(this):u(e)?e.length>0?t.helpers.each(e,n):i(this):r(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,r=e.inverse,s=0,a="";if(d(t)&&(t=t.call(this)),e.data&&(n=m(e.data)),t&&"object"==typeof t)if(u(t))for(var o=t.length;o>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===t.length-1),a+=i(t[s],{data:n});else for(var c in t)t.hasOwnProperty(c)&&(n&&(n.key=c,n.index=s,n.first=0===s),a+=i(t[c],{data:n}),s++);return 0===s&&(a=r(this)),a}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||a.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),a.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function r(t,e){g.log(t,e)}var s={},a=t,o=e,c="1.3.0";s.VERSION=c;var h=4;s.COMPILER_REVISION=h;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=l;var u=a.isArray,d=a.isFunction,f=a.toString,p="[object Object]";s.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:r,registerHelper:function(t,e,n){if(f.call(t)===p){if(n||e)throw new o("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e
},registerPartial:function(t,e){f.call(t)===p?a.extend(this.partials,t):this.partials[t]=e}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(g.level<=t){var n=g.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};s.logger=g,s.log=r;var m=function(t){var e={};return a.extend(e,t),e};return s.createFrame=m,s}(e,n),r=function(t,e,n){function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=f[n],r=f[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new u("No environment passed to template");var n=function(t,n,i,r,s,a){var o=e.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(e.compile){var c={helpers:r,partials:s,data:a};return s[n]=e.compile(t,{data:void 0!==a},e),s[n](i,c)}throw new u("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:l.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=a(t,e,n):i||(i=this.programs[t]=a(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},l.extend(n,e),l.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var s,a,o=r.partial?r:e;r.partial||(s=r.helpers,a=r.partials);var c=t.call(i,o,n,s,a,r.data);return r.partial||e.VM.checkRevision(i.compilerInfo),c}}function s(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r}function a(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function o(t,e,n,i,r,s){var a={partial:!0,helpers:i,partials:r,data:s};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(n,a):void 0}function c(){return""}var h={},l=t,u=e,d=n.COMPILER_REVISION,f=n.REVISION_CHANGES;return h.checkRevision=i,h.template=r,h.programWithDepth=s,h.program=a,h.invokePartial=o,h.noop=c,h}(e,n,i),s=function(t,e,n,i,r){var s,a=t,o=e,c=n,h=i,l=r,u=function(){var t=new a.HandlebarsEnvironment;return h.extend(t,a),t.SafeString=o,t.Exception=c,t.Utils=h,t.VM=l,t.template=function(e){return l.template(e,t)},t},d=u();return d.create=u,s=d}(i,t,n,e,r),a=function(t){function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,r={ProgramNode:function(t,n,i,s){var a,o;3===arguments.length?(s=i,i=null):2===arguments.length&&(s=n,n=null),e.call(this,s),this.type="program",this.statements=t,this.strip={},i?(o=i[0],o?(a={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new r.ProgramNode(i,n,a)):this.inverse=new r.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(t,n,i,s,a){if(e.call(this,a),this.type="mustache",this.strip=s,null!=i&&i.charAt){var o=i.charAt(3)||i.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!i;this.sexpr=t instanceof r.SexprNode?t:new r.SexprNode(t,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=t[0],s=this.params=t.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(s.length||n)},PartialNode:function(t,n,i,r){e.call(this,r),this.type="partial",this.partialName=t,this.context=n,this.strip=i},BlockNode:function(t,n,r,s,a){if(e.call(this,a),t.sexpr.id.original!==s.path.original)throw new i(t.sexpr.id.original+" doesn't match "+s.path.original,this);this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.strip={left:t.strip.left,right:s.strip.right},(n||r).strip.left=t.strip.right,(r||n).strip.right=s.strip.left,r&&!n&&(this.isInverse=!0)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var r="",s=[],a=0,o=0,c=t.length;c>o;o++){var h=t[o].part;if(r+=(t[o].separator||"")+h,".."===h||"."===h||"this"===h){if(s.length>0)throw new i("Invalid path: "+r,this);".."===h?a++:this.isScoped=!0}else s.push(h)}this.original=r,this.parts=s,this.string=s.join("."),this.depth=a,this.isSimple=1===t.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,n){e.call(this,n),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t}};return n=r}(n),o=function(){var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,n,i,r,s,a){var o=a.length-1;switch(s){case 1:return new r.ProgramNode(a[o-1],this._$);case 2:return new r.ProgramNode([],this._$);case 3:this.$=new r.ProgramNode([],a[o-1],a[o],this._$);break;case 4:this.$=new r.ProgramNode(a[o-2],a[o-1],a[o],this._$);break;case 5:this.$=new r.ProgramNode(a[o-1],a[o],[],this._$);break;case 6:this.$=new r.ProgramNode(a[o],this._$);break;case 7:this.$=new r.ProgramNode([],this._$);break;case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[a[o]];break;case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 11:this.$=new r.BlockNode(a[o-2],a[o-1].inverse,a[o-1],a[o],this._$);break;case 12:this.$=new r.BlockNode(a[o-2],a[o-1],a[o-1].inverse,a[o],this._$);break;case 13:this.$=a[o];break;case 14:this.$=a[o];break;case 15:this.$=new r.ContentNode(a[o],this._$);break;case 16:this.$=new r.CommentNode(a[o],this._$);break;case 17:this.$=new r.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 18:this.$=new r.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 19:this.$={path:a[o-1],strip:t(a[o-2],a[o])};break;case 20:this.$=new r.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 21:this.$=new r.MustacheNode(a[o-1],null,a[o-2],t(a[o-2],a[o]),this._$);break;case 22:this.$=new r.PartialNode(a[o-2],a[o-1],t(a[o-3],a[o]),this._$);break;case 23:this.$=t(a[o-1],a[o]);break;case 24:this.$=new r.SexprNode([a[o-2]].concat(a[o-1]),a[o],this._$);break;case 25:this.$=new r.SexprNode([a[o]],null,this._$);break;case 26:this.$=a[o];break;case 27:this.$=new r.StringNode(a[o],this._$);break;case 28:this.$=new r.IntegerNode(a[o],this._$);break;case 29:this.$=new r.BooleanNode(a[o],this._$);break;case 30:this.$=a[o];break;case 31:a[o-1].isHelper=!0,this.$=a[o-1];break;case 32:this.$=new r.HashNode(a[o],this._$);break;case 33:this.$=[a[o-2],a[o]];break;case 34:this.$=new r.PartialNameNode(a[o],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(a[o],this._$),this._$);break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(a[o],this._$));break;case 37:this.$=new r.DataNode(a[o],this._$);break;case 38:this.$=new r.IdNode(a[o],this._$);break;case 39:a[o-2].push({part:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 40:this.$=[{part:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 47:this.$=[a[o]];break;case 48:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],s=[],a=this.table,o="",c=0,h=0,l=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;s.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,p,g,m,v,y,_,w,b,x={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===f||"undefined"==typeof f)&&(f=e()),m=a[g]&&a[g][f]),"undefined"==typeof m||!m.length||!m[0]){var S="";if(!l){b=[];for(y in a[g])this.terminals_[y]&&y>2&&b.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:u,expected:b})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+f);switch(m[0]){case 1:i.push(f),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(m[1]),f=null,p?(f=p,p=null):(h=this.lexer.yyleng,o=this.lexer.yytext,c=this.lexer.yylineno,u=this.lexer.yylloc,l>0&&l--);break;case 2:if(_=this.productions_[m[1]][1],x.$=r[r.length-_],x._$={first_line:s[s.length-(_||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(_||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(_||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(x,o,h,c,this.yy,m[1],r,s),"undefined"!=typeof v)return v;_&&(i=i.slice(0,-1*_*2),r=r.slice(0,-1*_),s=s.slice(0,-1*_)),i.push(this.productions_[m[1]][0]),r.push(x.$),s.push(x._$),w=a[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(n=this._input.match(this.rules[s[a]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n){function i(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),c=function(t,e){function n(t){return t.constructor===s.ProgramNode?t:(r.yy=s,r.parse(t))}var i={},r=t,s=e;return i.parser=r,i.parse=n,i}(o,a),h=function(t){function e(){}function n(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i=n.parse(t),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)}function i(t,e,n){function i(){var i=n.parse(t),r=(new n.Compiler).compile(i,e),s=(new n.JavaScriptCompiler).compile(r,e,void 0,!0);return n.template(s)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}}var r={},s=t;return r.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],s=0,a=i.length;a>s;s++)if(t=i[s],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var o=0;o<t.args.length;o++)n=t.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var s=0;s<i.args.length;s++)if(i.args[s]!==r.args[s])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,s=n.depths.list.length;s>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=e.sexpr,s=this.classifySexpr(r);"helper"===s?this.helperSexpr(r,n,i):"simple"===s?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,s=i.length;s>r;r++)e=i[r],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,n){var i=t.id,r=i.parts[0],s=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new s("You specified knownHelpersOnly, but used the unknown helper "+r,t);this.opcode("invokeHelper",i.length,r,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new s("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},r.precompile=n,r.compile=i,r}(n),l=function(t,e){function n(t){this.value=t}function i(){}var r,s=t.COMPILER_REVISION,a=t.REVISION_CHANGES,o=t.log,c=e;i.prototype={nameLookup:function(t,e){var n,r;return 0===t.indexOf("depth")&&(n=!0),r=/^[0-9]+$/.test(e)?t+"["+e+"]":i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",n?"("+t+" && "+r+")":r},compilerInfo:function(){var t=s,e=a[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,s=t.opcodes;this.i=0;for(var a=s.length;this.i<a;this.i++)r=s[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,s=this.environment.depths.list.length;s>r;r++)i.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),t)return i.push(a),Function.apply(this,i);var c="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return o("debug",c+"\n\n"),c},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))
},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),r=this.nameLookup("depth"+this.lastContext,e,"context"),s="helper = "+i.name+" || "+r;i.paramsInit&&(s+=","+i.paramsInit),this.push("("+s+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),s=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+s+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+r+"; "+s+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,r=t.children,s=0,a=r.length;a>s;s++){n=r[s],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,e,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],s=0,a=i.length;a>s;s++)e=i[s],r.push(1===e?"depth0":"depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,r,s="",a=this.isInline();if(a){var o=this.popStack(!0);if(o instanceof n)e=o.value,r=!0;else{i=!this.stackSlot;var c=i?this.incrStack():this.topStackName();s="("+this.push(c)+" = "+o+"),",e=this.topStack()}}else e=this.topStack();var h=t.call(this,e);return a?(r||this.popStack(),i&&this.stackSlot--,this.push("("+s+h+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+s+h+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var r=t[e];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new c("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[],r=this.setupParams(t,i,n),s=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:r,name:s,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,r,s=[],a=[],o=[];s.push("hash:"+this.popStack()),this.options.stringParams&&(s.push("hashTypes:"+this.popStack()),s.push("hashContexts:"+this.popStack())),i=this.popStack(),r=this.popStack(),(r||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),s.push("inverse:"+i),s.push("fn:"+r));for(var c=0;t>c;c++)n=this.popStack(),e.push(n),this.options.stringParams&&(o.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+o.join(",")+"]")),this.options.data&&s.push("data:data"),s},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=i.RESERVED_WORDS={},u=0,d=h.length;d>u;u++)l[h[u]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},r=i}(i,n),u=function(t,e,n,i,r){var s,a=t,o=e,c=n.parser,h=n.parse,l=i.Compiler,u=i.compile,d=i.precompile,f=r,p=a.create,g=function(){var t=p();return t.compile=function(e,n){return u(e,n,t)},t.precompile=function(e,n){return d(e,n,t)},t.AST=o,t.Compiler=l,t.JavaScriptCompiler=f,t.Parser=c,t.parse=h,t};return a=g(),a.create=g,s=a}(s,a,c,h,l);return u}();return t.Handlebars=e}.apply(t,arguments)})}(this),function(t){define("thorax",["handlebars","backbone"],function(){return function(){return function(){function t(){var t=this._constructorArg,n=this;this._referenceCount=0,this._objectOptionsByCid={},this._boundDataObjectsByCid={},_.each(ue,function(t){n[t.name]=[]}),ce[this.cid]=this,this.children={},this._renderCount=0,_.extend(this,t||{}),e.call(this),_.each(ue,function(t){t.configure&&t.configure.call(this)},this),this.trigger("configure")}function e(){this.helpers&&_.each(this.helpers,function(t,e){var n=this;this.helpers[e]=function(){var e=_.toArray(arguments),i=_.last(e);return i.context=this,t.apply(n,e)}},this)}function n(t){return'Error "'+t+'". For more information visit http://thoraxjs.org/error-codes.html#'+t}function i(t,e){var n=t.extend;t.extend=function(){var t=n.apply(this,arguments);return t.prototype.name&&(e[t.prototype.name]=t),t}}function r(t,e,n,i){var r,s=t[e];if(_.indexOf(n,".")>=0){var a=n.split(/\./);n=a.pop(),_.each(a,function(t){s=s[t]})}if(s&&(r=s[n]),!r&&!i)throw new Error(e+": "+n+" does not exist.");return r}function s(t,e){var n;if(_.isString(this[t])?n=he.Util.getViewClass(this[t],!0):this.name&&!_.isFunction(this[t])&&(n=he.Util.getViewClass(this.name+(e.extension||""),!0)),n&&!_.isFunction(this[t])&&(this[t]=n),e.required&&!_.isFunction(this[t]))throw new Error("View "+(this.name||this.cid)+" requires: "+t)}function a(t,e){var n;if(_.isString(this[t])?n=he.Util.getTemplate(this[t],!0):this.name&&!_.isFunction(this[t])&&(n=he.Util.getTemplate(this.name+(e.extension||""),!0)),!n&&"template"===t&&this._defaultTemplate&&(n=this._defaultTemplate),n&&!_.isFunction(this[t])&&(this[t]=n),e.required&&!_.isFunction(this[t])){var i=new Error("view-requires: "+t);throw i.info={name:this.name||this.cid,parent:this.parent&&(this.parent.name||this.parent.cid),helperName:this._helperName},i}}function o(t,e,n){return t&&t[e]?_.isFunction(t[e])?t[e].call(n||t):t[e]:null}function c(t){_.each(ue,function(e){t[e.name]||(t[e.name]=[])})}function h(t){_.each(ue,function(e){t[e.name]=[]})}function l(t,e,n,i){var r=[];_.has(t,e)&&r.push(t);var s=t;if(n)for(;s=s.__parent__;)_.has(s,e)&&r.push(s);else for(s=s.constructor;s;)s.prototype&&_.has(s.prototype,e)&&r.push(s.prototype),s=s.__super__&&s.__super__.constructor;for(var a=r.length;a--;)_.each(o(r[a],e,t),i)}function u(t,e,n,i){if(_.isObject(n)){var r=ue[e];if(r&&r.event)return t&&t.listenTo&&t[e]&&t[e].cid?f(t,n,i,e):f(t["_"+e+"Events"],n,i),!0}}function d(t,e,n,i,r){function s(){if(t.el)a.apply(r,arguments);else{if(o)throw new Error("destroyed-event:"+t.name+":"+n);o++}}var a=F(i,t),o=0;s._callback=a._callback||a,s._thoraxBind=!0,t.listenTo(e,n,s)}function f(t,e,n,i){function r(e,r){i?d(t,t[i],r,e,n||t):t.push([r,e,n])}_.each(e,function(t,e){_.isArray(t)?_.each(t,function(t){r(t,e)}):r(t,e)})}function p(t){if(!t||!t.data)throw new Error(n("handlebars-no-data"));return t.data}function g(t){t.tag&&(t.tagName=t.tag,delete t.tag),t["class"]&&(t.className=t["class"],delete t["class"])}function m(t){if(!le){var e="area,base,br,col,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr";le={},_.each(e.split(","),function(t){le[t]=!0})}return le[t]}function v(t){ge.push.apply(ge,t),fe=new RegExp("^(nested\\s+)?("+ge.join("|")+")(?:\\s|$)")}function y(t,e){return function(n){var i=$(n.target).view({helper:!1});return i&&i.cid===e?(n.originalContext=this,t(n)):void 0}}function w(t,e){t+=e.originalName;var n=e.handler,i=_.isFunction(n)?n:this[n];if(!i)throw new Error('Event "'+n+'" does not exist '+(this.name||this.cid)+":"+t);var r=e.context||this,s=he.bindSection("thorax-event",{view:r.name||r.cid,eventName:t},_.bind(i,r));return s._callback=i,s._thoraxBind=!0,s}function b(t,e,n){var i={originalName:t,handler:_.isString(e)?this[e]:e};if(t.match(fe)){var r=pe.exec(t);i.nested=!!r[1],i.name=r[2],i.type="DOM",i.selector=r[3]}else i.name=t,i.type="view";return i.context=n,i}function x(t){for(;t._helperName&&"view"!==t._helperName;)t=t.parent;return t}function S(t,e){return e["expand-tokens"]?(delete e["expand-tokens"],_.each(e,function(n,i){e[i]=he.Util.expandToken(n,t)}),!0):void 0}function C(t){var e=_.pick(t,"fn","inverse","hash","data");return e.data=_.omit(t.data,"cid","view","yield","root","_parent"),e}function K(t,e){function n(t,e){return _.every(t,function(t,n){return e[n]===t})}return t._helperName!==e._helperName?!1:(t=t._helperOptions,e=e._helperOptions,t.args.length===e.args.length&&n(t.args,e.args)&&_.isEqual(_.keys(t.options),_.keys(e.options))&&_.every(t.options,function(i,r){if("data"===r||"hash"===r)return n(t.options[r],e.options[r]);if("fn"===r||"inverse"===r){if(e.options[r]===i)return!0;var s=e.options[r]||{};return i&&_.has(i,"program")&&!i.depth&&s.program===i.program}return e.options[r]===i}))}function k(t,e){function n(n,i){var r=this[t],s=o(this,e.$el);return n===r?this:(r&&this.unbindDataObject(r),n?(this[t]=n,e.loading&&e.loading.call(this),this.bindDataObject(t,n,_.extend({},this.options,i)),s&&s.attr(e.cidAttrName,n.cid),n.trigger("set",n,r)):(this[t]=!1,e.change&&e.change.call(this,!1),s&&s.removeAttr(e.cidAttrName)),this.trigger("change:data-object",t,n,r),this)}e=ue[t]=_.defaults({name:"_"+t+"Events",event:!0},e),e.ctor=function(){if(this[t]){var n=this[t];this[t]=null,this[e.set](n)}},he.View.prototype[e.set]=n}function T(t,e,n){var i=this;l(n,"_"+t+"Events",!0,function(t){d(i,e,t[0],t[1],t[2]||i)})}function P(t,e){t.load?t.load(function(){e&&e.success&&e.success(t)},e):t.fetch(e)}function F(t,e){return _.isFunction(t)?t:e[t]}function D(t,e){if(!e||!e.serializing){var n=this.getObjectOptions(t)||{};this.conditionalRender(n.render)}}function A(t){var e=this.getObjectOptions(t)||void 0;this.shouldRender(e&&e.render)&&this.renderCollection&&this.renderCollection()}function E(t){var e=this.getObjectOptions(t)||void 0;this.shouldRender(e&&e.render)&&this.ensureRendered()}function N(){this.itemFilter&&this.collection.forEach(M,this)}function M(t){var e=this.getCollectionElement();this.itemFilter&&e.find("["+_e+'="'+t.cid+'"]')[O.call(this,t)?"show":"hide"]()}function O(t){return this.itemFilter.call(this,t,this.collection.indexOf(t))}function L(){var t=this.getCollectionElement();this.emptyClass&&t.removeClass(this.emptyClass),t.removeAttr(Ce),t.empty()}function H(){var t=this.getCollectionElement();this.emptyClass&&t.addClass(this.emptyClass),t.attr(Ce,!0),this.appendEmpty()}function I(t,e){return _.each(t,function(n,i){return _.isObject(n)?I(n,e):void(e(n,i,t)===!1&&delete t[i])}),t}function R(){B.call(this),this.model&&this.model.previousAttributes&&this.model.set(this.model.previousAttributes(),{silent:!0})}function G(t,e,n){var i=0;$("select,input,textarea",e.root||t.el).each(function(){(e.children||t===$(this).view({helper:!1}))&&"button"!==this.type&&"cancel"!==this.type&&"submit"!==this.type&&this.name&&(n(this,i),++i)})}function j(t,e,n,i){for(var r,s=t,a=e.split("["),o=n.mode,c=0;c<a.length-1;++c){if(r=a[c].replace("]",""),!s[r]){if("serialize"!==o)return i(void 0,r);s[r]={}}s=s[r]}r=a[a.length-1].replace("]",""),i(s,r)}function B(){this.$("form").removeAttr("data-submit-wait")}function U(t){var e=t.getObjectOptions(t.model)||{};return e.populate===!0?{}:e.populate}function V(t,e){e=e||{},e.target=this,this.trigger(t,e),_.each(this.children,function(n){n.trigger(t,e)})}function Y(){++this._renderCount,this.$el.attr(Pe,this.cid)}function W(){if(!this.$("["+Pe+'="'+this.cid+'"]')[0])throw new Error("No layout element found in "+(this.name||this.cid))}function q(){return this.$("["+Pe+'="'+this.cid+'"]')[0]||this.el[0]||this.el}function z(t){return function(){var e=_.toArray(arguments);e.unshift(t),this.parent.trigger.apply(this.parent,e)}}function X(t){var e=x(this);if(!this[t]){var n=e[t];n&&(this[t]=n)}}function Q(t){var e=$(this),n=e.view({helper:!1}),i=e.attr(De),r=e.attr(Ae),s=!1;i&&(s=n[i].call(n,t)),r&&n.trigger(r,t),"A"===this.tagName&&s===!1&&t.preventDefault()}function J(){Z(),Ee=he._fastClickEventName||"click",$(document).on(Ee,Ne,Q)}function Z(){Ee&&$(document).off(Ee,Ne,Q)}function te(t,e){function n(){r!==Backbone.history.getFragment()&&(s=!0,a.cancel(),e&&e())}function i(){Backbone.history.off("route",n),s||t.apply(this,arguments)}var r=Backbone.history.getFragment(),s=!1;Backbone.history.on("route",n);var a=_.bind(i,this);return a.cancel=function(){Backbone.history.off("route",n)},a}function ee(t,e,n){if(this.isPopulated())return _.defer(t,this);2===arguments.length&&!_.isFunction(e)&&_.isObject(e)&&(n=e,e=!1);var i=this,r=!1,s=te(_.bind(t,i),function(){r=!0,i._request&&(i._aborted=!0,i._request.abort()),e&&e.call(i,!1)});this.fetch(_.defaults({success:s,error:function(){s.cancel(),!r&&e&&e.apply(i,[!0].concat(_.toArray(arguments)))}},n))}function ne(t,e){if(t.resetQueue)this.fetchQueue=void 0;else if(this.fetchQueue){var i=(this.fetchQueue[0]||{}).reset;if(i!==t.reset)throw new Error(n("mixed-fetch"))}if(!this.fetchQueue){if(this.fetchQueue=[t],t=_.defaults({success:ie(this,this.fetchQueue,"success"),error:ie(this,this.fetchQueue,"error"),complete:ie(this,this.fetchQueue,"complete")},t),e){var r=e.call(this,t);return this.fetchQueue&&(this.fetchQueue._promise=r),r}return t}return this.fetchQueue.push(t),this.fetchQueue._promise}function ie(t,e,n){return function(){var i=arguments;_.each(e,function(t){t[n]&&t[n].apply(this,i)},this),t.fetchQueue===e&&(t.fetchQueue=void 0)}}function re(){this.render()}$.fn.forEach||($.fn.forEach=function(t,e){$.fn.each.call(this,function(n){t.call(e||this,this,n)})});var se="data-view-name",ae="data-view-cid",oe="data-view-helper",ce={};Handlebars.templates||(Handlebars.templates={});var he=this.Thorax={templatePathPrefix:"",Views:{},bindSection:function(t,e,n){return n||(n=e,e=void 0),function(){try{return n.apply(this,arguments)}catch(i){he.onException(t,i,e)}}},runSection:function(t,e,n){return he.bindSection(t,e,n)()},onException:function(t,e){throw e},templates:Handlebars.templates};he.View=Backbone.View.extend({constructor:function(){this._constructorArg=arguments[0];var t=Backbone.View.apply(this,arguments);return delete this._constructorArg,_.each(ue,function(e){e.ctor&&e.ctor.call(this,t)},this),t},_configure:function(){},_ensureElement:function(){return t.call(this),Backbone.View.prototype._ensureElement.call(this)},toString:function(){return"[object View."+this.name+"]"},setElement:function(){var t=Backbone.View.prototype.setElement.apply(this,arguments);return this.name&&this.$el.attr(se,this.name),this.$el.attr(ae,this.cid),t},_addChild:function(t){return this.children[t.cid]?t:(t.retain(),this.children[t.cid]=t,t.parent&&t.parent!==this&&!t._helperOptions&&t.parent._removeChild(t),t.parent=this,this.trigger("child",t),t)},_removeChild:function(t){return delete this.children[t.cid],t.parent=null,t.release(),t},_destroy:function(){_.each(this._boundDataObjectsByCid,this.unbindDataObject,this),this.trigger("destroyed"),delete ce[this.cid],_.each(this.children,function(t){this._removeChild(t)},this),this.el&&(this.undelegateEvents(),this.remove(),this.off()),this.el=this.$el=void 0,this.parent=void 0,this.model=this.collection=this._collection=void 0,this._helperOptions=void 0},render:function(t){var e=this;if(e.el)return he.runSection("thorax-render",{name:e.name},function(){if(e._rendering)throw new Error(n("nested-render"));e._previousHelpers=_.filter(e.children,function(t){return t._helperOptions});var i={};_.each(e.children,function(t,e){t._helperOptions||(i[e]=t)}),e.children=i,e.trigger("before:rendered"),e._rendering=!0;try{!_.isUndefined(t)&&(_.isElement(t)||he.Util.is$(t)||t&&t.el||_.isString(t)||_.isFunction(t))?_.isFunction(t)&&(t=e.renderTemplate(t)):(a.call(e,"template",{required:!0}),t=e.renderTemplate(e.template)),_.each(e._previousHelpers,function(t){e._removeChild(t)},e),e._previousHelpers=void 0,e.html(t&&t.el||t&&t.string||t),++e._renderCount,e.trigger("rendered")}finally{e._rendering=!1}}),t},context:function(){return _.extend({},this.model&&this.model.attributes||{})},_getContext:function(){return _.extend({},this,o(this,"context")||{})},_getData:function(t){return{view:this,cid:_.uniqueId("t"),"yield":function(){return t.fn&&t.fn(t)}}},renderTemplate:function(t,e,n){var i;return e=e||this._getContext(),i=_.isFunction(t)?t:he.Util.getTemplate(t,n),i?i(e,{helpers:this.helpers,data:this._getData(e)}):""},ensureRendered:function(){!this._renderCount&&this.render()},shouldRender:function(t){return t||null==t&&this._renderCount},conditionalRender:function(t){this.shouldRender(t)&&this.render()},appendTo:function(t){this.ensureRendered(),$(t).append(this.el),this.trigger("ready",{target:this})},html:function(t){if(_.isUndefined(t))return this.el.innerHTML;this.trigger("before:append");var e=this._replaceHTML(t);return this.trigger("append"),e},release:function(){--this._referenceCount,this._referenceCount<=0&&this._destroy()},retain:function(t){++this._referenceCount,t&&this.listenTo(t,"destroyed",t.release)},_replaceHTML:function(t){return this.el.innerHTML="",this.$el.append(t)},_anchorClick:function(t){var e=$(t.currentTarget),n=e.attr("href");return n&&("#"===n[0]||"/"===n[0]&&"/"!==n[1])?(Backbone.history.navigate(n,{trigger:!0}),!1):!0}}),he.View.extend=function(){c(this);var t=Backbone.View.extend.apply(this,arguments);return t.__parent__=this,h(t),t},i(he.View,he.Views),$.fn.view=function(t){t=_.defaults(t||{},{helper:!0});var e="["+ae+"]";t.helper||(e+=":not(["+oe+"])");var n=$(this).closest(e);return n&&ce[n.attr(ae)]||!1};var le,ue={};he.Util={getViewInstance:function(t,e){var n=he.Util.getViewClass(t,!0);return n?new n(e||{}):t},getViewClass:function(t,e){return _.isString(t)?r(he,"Views",t,e):_.isFunction(t)?t:!1},getTemplate:function(t,e){var n,i=he.templatePathPrefix;if(i&&t.substr(0,i.length)!==i&&(t=i+t),t=t.replace(/\.handlebars$/,""),n=Handlebars.templates[t],n||(t+=".handlebars",n=Handlebars.templates[t]),!n&&!e)throw new Error("templates: "+t+" does not exist.");return n},is$:function(t){return _.isObject(t)&&"length"in t},expandToken:function(t,e,n){function i(t,e){if(t.match(/^("|')/)&&t.match(/("|')$/))return t.replace(/(^("|')|('|")$)/g,"");for(var i=t.split("."),r=i.length,s=0;e&&r>s;s++)"this"!==i[s]&&(e=e[i[s]]);return n&&_.isString(e)?encodeURIComponent(e):e}if(t&&t.indexOf&&t.indexOf("{{")>=0){for(var r,s=/(?:\{?[^{]+)|(?:\{\{([^}]+)\}\})/g,a=[];r=s.exec(t);)if(r[1]){var o=r[1].split(/\s+/);if(o.length>1){var c=o.shift();o=_.map(o,function(t){return i(t,e)}),a.push(Handlebars.helpers[c]?Handlebars.helpers[c].apply(e,o):r[0])}else a.push(i(o[0],e))}else a.push(r[0]);t=a.join("")}return t},tag:function(t,e,i){var r=_.omit(t,"tagName"),s=t.tagName||"div",a=m(s);if(a&&e)throw new Error(n("void-tag-content"));var o="<"+s+" "+_.map(r,function(t,e){if(_.isUndefined(t)||"expand-tokens"===e)return"";var n=t;return i&&(n=he.Util.expandToken(t,i)),("className"===e?"class":e)+'="'+Handlebars.Utils.escapeExpression(n)+'"'}).join(" ")+">";return a?o:o+(_.isUndefined(e)?"":e)+"</"+s+">"}},he.Mixins={},_.extend(he.View,{mixin:function(t){he.Mixins[t](this)},registerMixin:function(t,e,n){he.Mixins[t]=function(t){var i=!!t.cid;n&&_.extend(i?t:t.prototype,n),i?e.call(t):t.on("configure",e)}}}),he.View.prototype.mixin=function(t){he.Mixins[t](this)};var de=he.View.prototype.on;ue.event={name:"_events",configure:function(){var t=this;l(this.constructor,"_events",!0,function(e){t.on.apply(t,e)}),l(this,"events",!1,function(e,n){t.on(n,e,t)})}},_.extend(he.View,{on:function(t,e){return c(this),u(this,t,e)?this:(_.isObject(t)?_.each(t,function(t,e){this.on(e,t)},this):_.isArray(e)?_.each(e,function(e){this._events.push([t,e])},this):this._events.push([t,e]),this)}}),_.extend(he.View.prototype,{on:function(t,e,n){return u(this,t,e,n)?this:(_.isObject(t)&&arguments.length<3?_.each(t,function(t,n){this.on(n,t,e||this)},this):_.each(_.isArray(e)?e:[e],function(e){var i=b.call(this,t,e,n||this);"DOM"!==i.type||this._eventsDelegated?this._addEvent(i):(this._eventsToDelegate||(this._eventsToDelegate=[]),this._eventsToDelegate.push(i))},this),this)},delegateEvents:function(t){this.undelegateEvents(),t&&(_.isFunction(t)&&(t=t.call(this)),this._eventsToDelegate=[],this.on(t)),this._eventsToDelegate&&_.each(this._eventsToDelegate,this._addEvent,this),this._eventsDelegated=!0},_addEvent:function(t){if(t.handler._thoraxBind)return de.call(this,t.name,t.handler,t.context||this);var e=w.call(this,t.type+"-event:",t);if("view"===t.type)t.context&&t.context!==this&&t.context instanceof he.View?d(t.context,this,t.name,e,t.context):de.call(this,t.name,e,t.context||this);else{t.nested||(e=y(e,this.cid));var n=t.name+".delegateEvents"+this.cid;t.selector?this.$el.on(n,t.selector,e):this.$el.on(n,e)}}}),he.View.prototype.bind=he.View.prototype.on,he.View.on("ready",function(t){function e(e){e._isReady||e.trigger("ready",t)}this._isReady||(this._isReady=!0,_.each(this.children,e),this.on("child",e))});var fe,pe=/^(nested\s+)?(\S+)(?:\s+(.+))?/,ge=[];v(["mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchend","touchmove","click","dblclick","keyup","keydown","keypress","submit","change","input","focus","blur"]);var me="data-view-tmp",ve={},ye={_ensureElement:function(){he.View.prototype._ensureElement.apply(this,arguments),this.$el.attr(oe,this._helperName)},_getContext:function(){return this.parent._getContext.apply(this.parent,arguments)}};he.HelperView=he.View.extend(ye),Handlebars.registerViewHelper=function(t,e,n){2===arguments.length&&(e.factory?n=e.callback:(n=e,e=he.HelperView));var i=e.attributeWhiteList;Handlebars.registerHelper(t,function(){var r=_.toArray(arguments),s=r.pop(),a=p(s).view,o=S(this,s.hash),c={inverse:s.inverse,options:s.hash,declaringView:a,parent:x(a),_helperName:t,_helperOptions:{options:C(s),args:_.clone(r)}};g(s.hash);var h=_.clone(s.hash);_.each(i,function(t,e){delete h[e],_.isUndefined(s.hash[e])||(c[t]=s.hash[e])}),h.tagName&&(c.tagName=h.tagName),c.attributes=function(){var t=e.prototype&&e.prototype.attributes||{};return _.isFunction(t)&&(t=t.apply(this,arguments)),_.extend(t,_.omit(h,["tagName"])),t.className&&(t["class"]=t.className,delete t.className),t},s.fn?c.template=s.fn:e&&e.prototype&&!e.prototype.template&&(c.template=Handlebars.VM.noop);var l=_.find(a._previousHelpers,function(t){return K(c,t)});if(l){if(!l.el)throw new Error("insert-destroyed");a._previousHelpers=_.without(a._previousHelpers,l),a.children[l.cid]=l}else{if(e.factory){if(l=e.factory(r,c),!l)return"";l._helperName=c._helperName,l._helperOptions=c._helperOptions}else l=new e(c);if(!l.el)throw new Error("insert-destroyed-factory");a._previousHelpers=_.without(a._previousHelpers,l),r.push(l),a._addChild(l),a.trigger.apply(a,["helper",t].concat(r)),a.trigger.apply(a,["helper:"+t].concat(r)),n&&n.apply(this,r)}return h[me]=l.cid,e.modifyHTMLAttributes&&e.modifyHTMLAttributes(h,l),new Handlebars.SafeString(he.Util.tag(h,"",o?this:null))});var r=Handlebars.helpers[t];return r},he.View.on("append",function(t,e){(t||this.$el).find("["+me+"]").forEach(function(t){var n=t.getAttribute(me),i=this.children[n];i&&(ve[n]?(i.render(ve[n]),delete ve[n]):i.ensureRendered(),$(t).replaceWith(i.el),e&&e(i.el))},this)}),_.extend(he.View.prototype,{getObjectOptions:function(t){return t&&this._objectOptionsByCid[t.cid]},bindDataObject:function(t,e,n){if(this._boundDataObjectsByCid[e.cid])return!1;this._boundDataObjectsByCid[e.cid]=e;var n=this._modifyDataObjectOptions(e,_.extend({},ue[t].defaultOptions,n));this._objectOptionsByCid[e.cid]=n,T.call(this,t,e,this.constructor),T.call(this,t,e,this);var i=ue[t];return i.bindCallback&&i.bindCallback.call(this,e,n),e.shouldFetch&&e.shouldFetch(n)?P(e,n):ue[t].change&&ue[t].change.call(this,e,n),!0},unbindDataObject:function(t){return this._boundDataObjectsByCid[t.cid]?(delete this._boundDataObjectsByCid[t.cid],this.stopListening(t),delete this._objectOptionsByCid[t.cid],!0):!1},_modifyDataObjectOptions:function(t,e){return e}});var _e="data-model-cid";he.Model=Backbone.Model.extend({isEmpty:function(){return!this.isPopulated()},isPopulated:function(){var t=_.clone(this.attributes),e=o(this,"defaults")||{};for(var n in e){if(t[n]!=e[n])return!0;delete t[n]}var i=_.keys(t);return i.length>1||1===i.length&&i[0]!==this.idAttribute},shouldFetch:function(t){var e;try{e=o(this,"url")}catch(n){e=!1}return t.fetch&&!!e&&!this.isPopulated()}}),he.Models={},i(he.Model,he.Models),k("model",{set:"setModel",defaultOptions:{render:void 0,fetch:!0,success:!1,invalid:!0},change:D,$el:"$el",cidAttrName:_e}),he.View.on({model:{invalid:function(t,e){this.getObjectOptions(t).invalid&&this.trigger("invalid",e,t)},error:function(t,e){this.trigger("error",e,t)},change:function(t,e){ue.model.change.call(this,t,e)}}}),$.fn.model=function(t){var e=$(this),n=e.closest("["+_e+"]"),i=n&&n.attr(_e);if(i){var t=t||e.view();if(t&&t.model&&t.model.cid===i)return t.model||!1;var r=e.collection(t);if(r)return r.get(i)}return!1};var we=Backbone.Collection.prototype.fetch,be=Backbone.Collection.prototype.set,xe=he.View.prototype._replaceHTML,Se="data-collection-cid",Ce="data-collection-empty",Ke="data-collection-element",ke=1;he.Collection=Backbone.Collection.extend({model:he.Model||Backbone.Model,initialize:function(){return this.cid=_.uniqueId("collection"),Backbone.Collection.prototype.initialize.apply(this,arguments)},isEmpty:function(){return this.length>0?!1:0===this.length&&this.isPopulated()},isPopulated:function(){return this._fetched||this.length>0||!this.length&&!o(this,"url")},shouldFetch:function(t){return t.fetch&&!!o(this,"url")&&!this.isPopulated()},fetch:function(t){t=t||{};var e=t.success;return t.success=function(t,n){t._fetched=!0,e&&e(t,n)},we.apply(this,arguments)},set:function(t,e){return this._fetched=!!t,be.call(this,t,e)}}),_.extend(he.View.prototype,{getCollectionViews:function(t){return _.filter(this.children,function(e){return e instanceof he.CollectionView?!t||e.collection===t:!1})},updateFilter:function(t){_.invoke(this.getCollectionViews(t),"updateFilter")}}),he.Collections={},i(he.Collection,he.Collections),k("collection",{set:"setCollection",bindCallback:E,defaultOptions:{render:void 0,fetch:!0,success:!1,invalid:!0,change:!0},change:A,$el:"getCollectionElement",cidAttrName:Se}),he.CollectionView=he.View.extend({_defaultTemplate:Handlebars.VM.noop,_collectionSelector:"["+Ke+"]",_replaceHTML:function(t){if(!(this.collection&&this.getObjectOptions(this.collection)&&this._renderCount))return xe.call(this,t);var e,n=this.getCollectionElement();e=xe.call(this,t),n.attr("data-view-cid")||this.getCollectionElement().replaceWith(n)},render:function(){var t=this.shouldRender();he.View.prototype.render.apply(this,arguments),t||this.renderCollection()},appendItem:function(t,e,n){if(t){var i,r=this.getCollectionElement(),s=this.collection;if(n=_.defaults(n||{},{filter:!0}),e&&e.el&&(e=r.children().indexOf(e.el)+1),t.el||_.isString(t)?(i=t,t=!1):(e=e||s.indexOf(t)||0,i=this.renderItem.call(this,t,e)),i){i.cid&&(i.ensureRendered(),this._addChild(i)),_.isString(i)&&!i.match(/^\s*</m)&&(i="<div>"+i+"</div>");var a=i.$el||$($.trim(i)).filter(function(){return this.nodeType===ke});t&&a.attr(_e,t.cid);var o=e>0?s.at(e-1):!1;if(o){var c=r.children("["+_e+'="'+o.cid+'"]').last();c.after(a)}else r.prepend(a);this.trigger("append",null,function(e){e.setAttribute(_e,t.cid)}),n.silent||this.trigger("rendered:item",this,s,t,a,e),n.filter&&M.call(this,t)}return i}},updateItem:function(t){var e=this.getCollectionElement(),n=e.find("["+_e+'="'+t.cid+'"]');n.attr(ae)||(this.removeItem(n),this.appendItem(t))},removeItem:function(t){var e=t;if(t.cid){var n=this.getCollectionElement();e=n.find("["+_e+'="'+t.cid+'"]')}if(!e.length)return!1;var i=e.find("["+ae+"]").map(function(t,e){return $(e).attr(ae)});return e.remove(),i.push(e.attr(ae)),_.each(i,function(t){var e=this.children[t];e&&this._removeChild(e)},this),!0},renderCollection:function(){this.collection?(this.collection.isEmpty()?H.call(this):(L.call(this),this.collection.forEach(function(t,e){this.appendItem(t,e)},this)),this.trigger("rendered:collection",this,this.collection)):H.call(this)},emptyClass:"empty",renderEmpty:function(){if(this.emptyView||s.call(this,"emptyView",{extension:"-empty"}),!this.emptyTemplate&&!this.emptyView&&a.call(this,"emptyTemplate",{extension:"-empty",required:!1}),this.emptyView){var t={};
this.emptyTemplate&&(t.template=this.emptyTemplate);var e=he.Util.getViewInstance(this.emptyView,t);return e.ensureRendered(),e}return this.emptyTemplate&&this.renderTemplate(this.emptyTemplate)},renderItem:function(t,e){if(this.itemView||s.call(this,"itemView",{extension:"-item",required:!1}),!this.itemTemplate&&!this.itemView&&a.call(this,"itemTemplate",{extension:"-item",required:!this.itemView}),this.itemView){var n={model:t};return this.itemTemplate&&(n.template=this.itemTemplate),he.Util.getViewInstance(this.itemView,n)}return this.renderTemplate(this.itemTemplate,this.itemContext.call(this,t,e))},itemContext:function(t){return t.attributes},appendEmpty:function(){var t=this.getCollectionElement();t.empty();var e=this.renderEmpty.call(this);e&&this.appendItem(e,0,{silent:!0,filter:!1}),this.trigger("rendered:empty",this,this.collection)},getCollectionElement:function(){var t=this.$(this._collectionSelector);return 0===t.length?this.$el:t},updateFilter:function(){N.call(this)}}),he.CollectionView.on({collection:{reset:A,sort:A,change:function(t){var e=this.getObjectOptions(this.collection);e&&e.change&&this.updateItem(t),M.call(this,t)},add:function(t){var e=this.getCollectionElement();if(e.length){1===this.collection.length&&L.call(this);var n=this.collection.indexOf(t);this.appendItem(t,n)}},remove:function(t){var e=this.getCollectionElement();this.removeItem(t),0===this.collection.length&&e.length&&H.call(this)}}}),he.View.on({collection:{invalid:function(t,e){this.getObjectOptions(t).invalid&&this.trigger("invalid",e,t)},error:function(t,e){this.trigger("error",e,t)}}}),$.fn.collection=function(t){if(t&&t.collection)return t.collection;var e=$(this),n=e.closest("["+Se+"]"),i=n&&n.attr(Se);return i&&(t=e.view())?t.collection:!1},ue.model.defaultOptions.populate=!0;var Te=ue.model.change;ue.model.change=function(t,e){if(this._isChanging=!0,Te.apply(this,arguments),this._isChanging=!1,!e||!e.serializing){var n=U(this);this._renderCount&&n&&this.populate(!n.context&&this.model.attributes,n)}},_.extend(he.View.prototype,{serialize:function(){for(var t,e,n,i=0;i<arguments.length;++i)_.isFunction(arguments[i])?t=arguments[i]:_.isObject(arguments[i])&&("stopPropagation"in arguments[i]&&"preventDefault"in arguments[i]?n=arguments[i]:e=arguments[i]);if(!n||this._preventDuplicateSubmission(n)){e=_.extend({set:!0,validate:!0,children:!0},e||{});var r=e.attributes||{},s=this,a=[];if(G(this,e,function(t){var n=s._getInputValue(t,e,a);_.isUndefined(n)||j(r,t.name,{mode:"serialize"},function(t,e){t[e]?_.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n})}),e._silent||this.trigger("serialize",r,e),e.validate){var o=this.validateInput(r);if(o&&o.length&&(a=a.concat(o)),this.trigger("validate",r,a,e),a.length)return void this.trigger("invalid",a)}return e.set&&this.model&&!this.model.set(r,{silent:e.silent,serializing:!0})?!1:(t&&t.call(this,r,_.bind(B,this)),r)}},_preventDuplicateSubmission:function(t,e){t.preventDefault();var n=$(t.target);return"form"!==(t.target.tagName||"").toLowerCase()&&(n=$(t.target).closest("form")),n.attr("data-submit-wait")?!1:(n.attr("data-submit-wait","true"),e&&e.call(this,t),!0)},populate:function(t,e){e=_.extend({children:!0},e||{});var n,t=t||this._getContext();G(this,e,function(e){j(t,e.name,{mode:"populate"},function(t,i){if(n=t&&t[i],!_.isUndefined(n)){var r="checkbox"===e.type||"radio"===e.type;r&&_.isBoolean(n)?e.checked=n:r?e.checked=n==e.value:e.value=n}})}),++this._populateCount,e._silent||this.trigger("populate",t)},validateInput:function(){},_getInputValue:function(t){if("checkbox"!==t.type&&"radio"!==t.type){if(t.multiple===!0){var e=[];return $("option",t).each(function(){this.selected&&e.push(this.value)}),e}return t.value}return t.checked?t.getAttribute("value")||!0:void 0},_populateCount:0}),he.View.on({"before:rendered":function(){if(this._renderCount&&(this.model&&this.model.cid)===this._formModelCid){var t=this.getObjectOptions(this.model);this.previousFormData=I(this.serialize(_.extend({set:!1,validate:!1,_silent:!0},t)),function(t){return""!==t&&null!=t})}},rendered:function(){var t=U(this);t&&!this._isChanging&&!this._populateCount&&this.populate(!t.context&&this.model.attributes,t),this.previousFormData&&this.populate(this.previousFormData,_.extend({_silent:!0},t)),this._formModelCid=this.model&&this.model.cid,this.previousFormData=null}}),he.View.on({invalid:R,error:R,deactivated:function(){this.$el&&B.call(this)}});var Pe="data-layout-cid";he.LayoutView=he.View.extend({_defaultTemplate:Handlebars.VM.noop,render:function(){var t=he.View.prototype.render.apply(this,arguments);return this.template===Handlebars.VM.noop?Y.call(this):W.call(this),t},setView:function(t,e){e=_.extend({scroll:!0},e||{}),_.isString(t)&&(t=new(he.Util.registryGet(he,"Views",t,!1))),this.ensureRendered();var n,i,r,s=this._view;return t===s?!1:(this.trigger("change:view:start",t,s,e),i=_.bind(function(){s&&(s.$el&&s.$el.remove(),V.call(s,"deactivated",e),this._removeChild(s))},this),n=_.bind(function(){if(t){t.ensureRendered(),V.call(this,"activated",e),t.trigger("activated",e),this._view=t;var n=q.call(this);this._view.appendTo(n),this._addChild(t)}else this._view=void 0},this),r=_.bind(function(){this.trigger("change:view:end",t,s,e)},this),e.transition?e.transition(t,s,n,i,r):(i(),n(),r()),t)},getView:function(){return this._view}}),Handlebars.registerHelper("layout-element",function(t){var e=p(t).view;if(!e.getView)throw new Error(n("layout-element-helper"));return t.hash[Pe]=e.cid,g(t.hash),new Handlebars.SafeString(he.Util.tag.call(this,t.hash,"",this))}),he.CollectionHelperView=he.CollectionView.extend({events:{"rendered:item":z("rendered:item"),"rendered:collection":z("rendered:collection"),"rendered:empty":z("rendered:empty")},getCollectionElement:function(){return this.$el},constructor:function(t){t.options["item-template"]&&(t.itemTemplate=he.Util.getTemplate(t.options["item-template"])),t.options["empty-template"]&&(t.emptyTemplate=he.Util.getTemplate(t.options["empty-template"])),!t.itemTemplate&&t.template&&t.template!==Handlebars.VM.noop&&(t.itemTemplate=t.template,t.template=Handlebars.VM.noop),!t.emptyTemplate&&t.inverse&&t.inverse!==Handlebars.VM.noop&&(t.emptyTemplate=t.inverse,t.inverse=Handlebars.VM.noop);var e=_.isFunction(t.itemContext),n=_.isFunction(t.itemFilter),i=he.HelperView.call(this,t);return e?this.itemContext=_.bind(this.itemContext,this.parent):_.isString(this.itemContext)&&(this.itemContext=_.bind(this.parent[this.itemContext],this.parent)),n?this.itemFilter=_.bind(this.itemFilter,this.parent):_.isString(this.itemFilter)&&(this.itemFilter=_.bind(this.parent[this.itemFilter],this.parent)),this.parent.name&&(!this.emptyView&&!this.parent.renderEmpty&&(this.emptyView=he.Util.getViewClass(this.parent.name+"-empty",!0)),!this.emptyTemplate&&!this.parent.renderEmpty&&(this.emptyTemplate=he.Util.getTemplate(this.parent.name+"-empty",!0)),!this.itemView&&!this.parent.renderItem&&(this.itemView=he.Util.getViewClass(this.parent.name+"-item",!0)),!this.itemTemplate&&!this.parent.renderItem&&(this.itemTemplate=he.Util.getTemplate(this.parent.name+"-item",!!this.itemView))),i},setAsPrimaryCollectionHelper:function(){_.each(Fe,function(t){X.call(this,t)},this);var t=this;_.each(["itemFilter","itemContext","renderItem","renderEmpty"],function(e){t.parent[e]&&(t[e]=function(){return t.parent[e].apply(t.parent,arguments)})})}}),_.extend(he.CollectionHelperView.prototype,ye),he.CollectionHelperView.attributeWhiteList={"item-context":"itemContext","item-filter":"itemFilter","item-template":"itemTemplate","empty-template":"emptyTemplate","item-view":"itemView","empty-view":"emptyView","empty-class":"emptyClass"};var Fe=["itemTemplate","itemView","emptyTemplate","emptyView"];Handlebars.registerViewHelper("collection",he.CollectionHelperView,function(t,e){1===arguments.length&&(e=t,t=e.parent.collection,t&&e.setAsPrimaryCollectionHelper(),e.$el.attr(Ke,"true"),e.listenTo(e.parent,"change:data-object",function(t,n){"collection"===t&&(e.setAsPrimaryCollectionHelper(),e.setCollection(n))})),t&&e.setCollection(t)}),Handlebars.registerHelper("collection-element",function(t){if(!p(t).view.renderCollection)throw new Error(n("collection-element-helper"));var e=t.hash;return g(e),e.tagName=e.tagName||"div",e[Ke]=!0,new Handlebars.SafeString(he.Util.tag.call(this,e,"",this))}),Handlebars.registerHelper("empty",function(t,e){1===arguments.length&&(e=t);var n=p(e).view;return 1===arguments.length&&(t=n.model),n._emptyListeners||(n._emptyListeners={}),t&&!n._emptyListeners[t.cid]&&t.models&&"length"in t&&(n._emptyListeners[t.cid]=!0,n.listenTo(t,"remove",function(){0===t.length&&n.render()}),n.listenTo(t,"add",function(){1===t.length&&n.render()}),n.listenTo(t,"reset",function(){n.render()})),!t||t.isEmpty()?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("template",function(t,e){var n=_.extend({fn:e&&e.fn},this,e?e.hash:{}),i=p(e).view.renderTemplate(t,n);return new Handlebars.SafeString(i)}),Handlebars.registerHelper("yield",function(t){return p(t).yield&&t.data.yield()}),Handlebars.registerHelper("url",function(t){t=t||"";var e;if(arguments.length>2)e=_.map(_.head(arguments,arguments.length-1),encodeURIComponent).join("/");else{var n=arguments[1],i=n&&n.hash||n;e=i&&i["expand-tokens"]?he.Util.expandToken(t,this,!0):t}if(Backbone.history._hasPushState){var r=Backbone.history.options.root;return"/"===r&&"/"===e.substr(0,1)?e:r+e}return"#"+e}),Handlebars.registerViewHelper("view",{factory:function(t,e){var n=t.length>=1?t[0]:he.View;return he.Util.getViewInstance(n,e.options)},modifyHTMLAttributes:function(t,e){t.tagName=e.el.tagName.toLowerCase()},callback:function(t){var e=arguments[arguments.length-1],i=e._helperOptions.options,r=e.cid;if(!_.isString(t)&&i.hash&&_.keys(i.hash).length>0)throw new Error(n("view-helper-hash-args"));i.fn&&(ve[r]=i.fn)}});var De="data-call-method",Ae="data-trigger-event";Handlebars.registerHelper("button",function(t,e){1===arguments.length&&(e=t,t=e.hash.method);var i=e.hash,r=i["expand-tokens"];if(delete i["expand-tokens"],!t&&!e.hash.trigger)throw new Error(n("button-trigger"));return g(i),i.tagName=i.tagName||"button",i.trigger&&(i[Ae]=i.trigger),delete i.trigger,t&&(i[De]=t),new Handlebars.SafeString(he.Util.tag(i,e.fn?e.fn(this):"",r?this:null))}),Handlebars.registerHelper("link",function(){var t=_.toArray(arguments),e=t.pop(),i=e.hash,r=0===t.length?[i.href]:t,s=i["expand-tokens"];if(delete i["expand-tokens"],!r[0]&&""!==r[0])throw new Error(n("link-href"));return g(i),r.push(e),i.href=Handlebars.helpers.url.apply(this,r),i.tagName=i.tagName||"a",i.trigger&&(i[Ae]=e.hash.trigger),delete i.trigger,i[De]="_anchorClick",new Handlebars.SafeString(he.Util.tag(i,e.fn?e.fn(this):"",s?this:null))});var Ee,Ne="["+De+"], ["+Ae+"]";$(document).ready(function(){he._fastClickEventName||J()});var Me="data-element-tmp";Handlebars.registerHelper("element",function(t,e){g(e.hash);var n=_.uniqueId("element"),i=p(e).view;return e.hash[Me]=n,i._elementsByCid||(i._elementsByCid={}),i._elementsByCid[n]=t,new Handlebars.SafeString(he.Util.tag(e.hash))}),he.View.on("append",function(t,e){(t||this.$el).find("["+Me+"]").forEach(function(t){var n=$(t),i=n.attr(Me),r=this._elementsByCid[i];_.isFunction(r)&&(r=r.call(this)),n.replaceWith(r),e&&e(r)},this)}),Handlebars.registerHelper("super",function(t){var e=p(t).view,i=e.constructor&&e.constructor.__super__;if(i){var r=i.template;if(!r){if(!i.name)throw new Error(n("super-parent"));r=i.name}return _.isString(r)&&(r=he.Util.getTemplate(r,!1)),new Handlebars.SafeString(r(this,t))}return""});var Oe,Le="load:start",He="load:end";he.setRootObject=function(t){Oe=t},he.loadHandler=function(t,e,n){var i=_.uniqueId("load");return function(r,s,a){function o(){if(!h.timeout||h.run){var e=void 0!==c._loadingTimeoutDuration?c._loadingTimeoutDuration:he.View.prototype._loadingTimeoutDuration;h.timeout=setTimeout(he.bindSection("load-start",function(){h.events.length&&(h.run=!0,t.call(c,h.message,h.background,h))}),1e3*e)}}var c=n||this;c._loadInfo=c._loadInfo||{};var h=c._loadInfo[i];h?(clearTimeout(h.endTimeout),h.message=r,!s&&h.background&&(h.background=!1,o())):(h=c._loadInfo[i]=_.extend({isLoading:function(){return h.events.length},cid:i,events:[],timeout:0,message:r,background:!!s},Backbone.Events),o()),_.indexOf(h.events,a)>=0||(h.events.push(a),a.on(He,function l(){var t=c._loadingTimeoutEndDuration;void 0===t&&(t=he.View.prototype._loadingTimeoutEndDuration);var n=h.events,r=_.indexOf(n,a);r>=0&&!a.isLoading()&&(n.splice(r,1),_.indexOf(n,a)<0&&a.off(He,l)),n.length||(clearTimeout(h.endTimeout),h.endTimeout=setTimeout(he.bindSection("load-end",function(){n.length||(h.run&&(e&&e.call(c,h.background,h),h.trigger(He,h)),clearTimeout(h.timeout),h=c._loadInfo[i]=void 0)}),1e3*t))}))}},he.forwardLoadEvents=function(t,e,n){function i(r,s,a){n&&t.off(Le,i),e.trigger(Le,r,s,a)}return t.on(Le,i),{off:function(){t.off(Le,i)}}},he.mixinLoadable=function(t,e){_.extend(t,{_loadingClassName:"loading",_loadingTimeoutDuration:.33,_loadingTimeoutEndDuration:.1,onLoadStart:function(t,n,i){var r=e?this.parent:this;r&&r.el&&(!r.nonBlockingLoad&&!n&&Oe&&Oe!==this&&Oe.trigger(Le,t,n,i),r._isLoading=!0,$(r.el).addClass(r._loadingClassName),r.trigger("change:load-state","start",n))},onLoadEnd:function(){var t=e?this.parent:this;t&&t.el&&(t._isLoading=!1,$(t.el).removeClass(t._loadingClassName),t.trigger("change:load-state","end"))}})},he.mixinLoadableEvents=function(t,e){_.extend(t,{_loadCount:0,isLoading:function(){return this._loadCount>0},loadStart:function(t,n){this._loadCount++;var i=e?this.parent:this;i.trigger(Le,t,n,i)},loadEnd:function(){this._loadCount--;var t=e?this.parent:this;t.trigger(He,t)}})},he.mixinLoadable(he.View.prototype),he.mixinLoadableEvents(he.View.prototype),he.HelperView&&(he.mixinLoadable(he.HelperView.prototype,!0),he.mixinLoadableEvents(he.HelperView.prototype,!0)),he.CollectionHelperView&&(he.mixinLoadable(he.CollectionHelperView.prototype,!0),he.mixinLoadableEvents(he.CollectionHelperView.prototype,!0)),he.sync=function(t,e,n){var i=this,r=n.complete;return n.complete=function(){i._request=void 0,i._aborted=!1,r&&r.apply(this,arguments)},this._request=Backbone.sync.apply(this,arguments),this._request};var Ie=[];he.Model&&Ie.push(he.Model),he.Collection&&Ie.push(he.Collection),_.each(Ie,function(t){var e=t.prototype.fetch;he.mixinLoadableEvents(t.prototype,!1),_.extend(t.prototype,{sync:he.sync,fetch:function(n){function i(t){var e=n[t];n[t]=function(){r.loadEnd(),e&&e.apply(this,arguments)}}if(n=n||{},t===he.Collection&&(_.find(["reset","remove","add","update"],function(t){return!_.isUndefined(n[t])})||(n.reset=!0)),!n.loadTriggered){var r=this;i("success"),i("error"),r.loadStart(void 0,n.background)}return ne.call(this,n||{},e)},load:function(t,e,n){2===arguments.length&&!_.isFunction(e)&&(n=e,e=!1),n=n||{},!n.background&&!this.isPopulated()&&Oe&&(this.isLoading()?Oe.trigger(Le,n.message,n.background,this):he.forwardLoadEvents(this,Oe,!0)),ee.call(this,t,e,n)}})}),he.Util.bindToRoute=te,he.View.prototype._modifyDataObjectOptions=function(t,e){return e.ignoreErrors=this.ignoreFetchError,e.background=this.nonBlockingLoad,e},he.HelperView.prototype._modifyDataObjectOptions=he.CollectionHelperView.prototype._modifyDataObjectOptions=function(t,e){return e.ignoreErrors=this.parent.ignoreFetchError,e.background=this.parent.nonBlockingLoad,e},ue.collection.loading=function(){var t=this.loadingView,e=this.loadingTemplate,n=this.loadingPlacement;if(t||e){var i=he.loadHandler(_.bind(function(){var i;if(0===this.collection.length&&this.$el.empty(),t){var r=he.Util.getViewInstance(t);this._addChild(r),e?r.render(e):r.render(),i=r}else i=this.renderTemplate(e);var s=n?n.call(this):this.collection.length;this.appendItem(i,s),this.$el.children().eq(s).attr("data-loading-element",this.collection.cid)},this),_.bind(function(){this.$el.find('[data-loading-element="'+this.collection.cid+'"]').remove()},this),this.collection);this.listenTo(this.collection,"load:start",i)}},he.CollectionHelperView&&_.extend(he.CollectionHelperView.attributeWhiteList,{"loading-template":"loadingTemplate","loading-view":"loadingView","loading-placement":"loadingPlacement"}),he.View.on({"load:start":he.loadHandler(function(t,e,n){this.onLoadStart(t,e,n)},function(t,e){this.onLoadEnd(e)}),collection:{"load:start":function(t,e,n){this.trigger(Le,t,e,n)}},model:{"load:start":function(t,e,n){this.trigger(Le,t,e,n)}}}),Handlebars.registerHelper("loading",function(t){var e=p(t).view;return e.off("change:load-state",re,e),e.on("change:load-state",re,e),e._isLoading?t.fn(this):t.inverse(this)});var Re=/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),Ge=!!navigator.userAgent.match(/Trident\/7\./);Re&&he.View.on("before:append",function(){this._renderCount>0&&(_.each(this._elementsByCid,function(t){$(t).detach()}),_.each(this.children,function(t){t.$el.detach()}))}),(Re||Ge)&&(he.CollectionView.prototype._replaceHTML=function(t){if(!this.getObjectOptions(this.collection)||!this._renderCount)return xe.call(this,t);var e,n=this.getCollectionElement().clone(!0,!0);e=xe.call(this,t),n.attr("data-view-cid")||this.getCollectionElement().replaceWith(n)},he.View.prototype._replaceHTML=function(t){for(;this.el.hasChildNodes();)this.el.removeChild(this.el.childNodes[0]);return this.$el.append(t)})}(),t.Thorax=Thorax}.apply(t,arguments)})}(this),define("hbs",{load:function(t){throw new Error("Dynamic load not allowed: "+t)}}),define("hbs!modules/rootview",["handlebars"],function(t){return t=t||this.Handlebars,t.template(function(t,e,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var s,a,o="",c="function",h=this.escapeExpression;return o+='\r\n<div class="container-fluid">\r\n  <div class="row">\r\n    <div class="col-md-12">\r\n      <div id="designer-app">\r\n        <div id="designer">\r\n          <!-- RootView layout -->\r\n          <h2 class="tac dh">Lens Designer Prototype</h2>\r\n          ',(a=n["layout-element"])?s=a.call(e,{hash:{},data:r}):(a=e&&e["layout-element"],s=typeof a===c?a.call(e,{hash:{},data:r}):a),o+=h(s)+"\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>"})}),define("modules/rootview",["thorax","hbs!modules/rootview"],function(t,e){var n,i=t.LayoutView.extend({name:"root",template:e});return i.getInstance=function(t){return n||(n=new i,n.appendTo(t||document.body)),n},i}),define("hbs!modules/testview",["handlebars"],function(t){return t=t||this.Handlebars,t.template(function(t,e,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var s,a,o="",c=n.helperMissing,h=this.escapeExpression;return o+='<div class="row960" id="designer-inner">\r\n	<div class="row nom">\r\n		<div class="col-md-2 nopad ctrl">\r\n			'+h((s=n.view||e&&e.view,a={hash:{},data:r},s?s.call(e,e&&e.left,a):c.call(e,"view",e&&e.left,a)))+'\r\n		</div>\r\n		<div class="col-md-8 preview">\r\n			'+h((s=n.view||e&&e.view,a={hash:{},data:r},s?s.call(e,e&&e.center,a):c.call(e,"view",e&&e.center,a)))+'\r\n		</div>\r\n		<div class="col-md-2 nopad ctrl">\r\n			'+h((s=n.view||e&&e.view,a={hash:{},data:r},s?s.call(e,e&&e.right,a):c.call(e,"view",e&&e.right,a)))+"\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n\r\n"})}),function(){define("cs!modules/util/dim",[],function(){var t,e;return t=function(){return this.left=0,this.top=0,this.right=0,this.bottom=0,this.startX=!0,this.startY=!0},t.prototype={width:function(){return this.right-this.left},height:function(){return this.bottom-this.top},addX:function(t){this.left=this.startX?t:Math.min(t,this.left),this.right=this.startX?t:Math.max(t,this.right),this.startX=!1},addY:function(t){this.top=this.startY?t:Math.min(t,this.top),this.bottom=this.startY?t:Math.max(t,this.bottom),this.startY=!1},addXY:function(t,e){this.addX(t),this.addY(e)}},e=function(e){var n,i,r;for(n=e.dataArray,r=new t,i=0;i<n.length;){switch(n[i].command){case"L":case"C":r.addXY(n[i].start.x,n[i].start.y),r.addXY(n[i].points[0],n[i].points[1])}i++}return{left:r.left,top:r.top,width:r.width(),height:r.height()}}})}.call(this),define("hbs!modules/main-control",["handlebars"],function(t){return t=t||this.Handlebars,t.template(function(t,e,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var s,a,o="",c="function",h=this.escapeExpression;return o+='<p class="tac">Adjust ',(a=n.target)?s=a.call(e,{hash:{},data:r}):(a=e&&e.target,s=typeof a===c?a.call(e,{hash:{},data:r}):a),o+=h(s)+' side</p>\r\n<div id="container-',(a=n.target)?s=a.call(e,{hash:{},data:r}):(a=e&&e.target,s=typeof a===c?a.call(e,{hash:{},data:r}):a),o+=h(s)+'" class="tac"></div>'})}),function(){define("cs!modules/main-control",["thorax","cs!modules/util/dim","hbs!modules/main-control"],function(t,e,n){var i;return i=function(i,r){var s,a,o;return o=function(t,e,n){var i,r,s,a;for(a=[],r=0,s=t.length;s>r;r++)i=t[r],i.on("mouseover",function(){return"group"===n?this.find("."+this.attrs.pathName)[0].fill("orange"):this.fill("orange"),e.draw(),document.body.style.cursor="pointer"}),a.push(i.on("mouseout",function(){return"group"===n?this.find("."+this.attrs.pathName)[0].fill("#002f5b"):this.fill("#002f5b"),e.draw(),document.body.style.cursor="default"}));return a},a=function(t,n,i){var r;return r=i,null==r&&(r={top:0,right:0,bottom:0,left:0}),t.BBoxDim=e(t),t.BBox=new Kinetic.Rect({x:t.BBoxDim.left-r.left,y:t.BBoxDim.top-r.top,width:t.BBoxDim.width+(r.left+r.right),height:t.BBoxDim.height+(r.top+r.bottom)}),n.attrs.pathName=t.name(),n.add(t,t.BBox)},s=t.View.extend({name:"main-"+i+"-view",target:i,template:n,events:{ready:function(){var t,e,n,s,c,h,l,u,d,f,p,g,m,v,y,_,w,b,x,S,C,K;return w=this,g=new Kinetic.Path({name:"move-up",data:"m 79.890625,16.25 c -1.33034,-0.08608 -3.89519,0.621876 -5.37558,2.365791 -4.63117,4.506615 -15.15464,15.206882 -19.74022,19.759813 13.28125,0 37.699431,0 50.980675,0 C 101.77092,34.403223 90.089325,23.261721 86.180765,19.21551 83.930665,17.079181 81.765015,16.004427 79.890625,16.25 z",fill:"#002f5b"}),p=new Kinetic.Group,a(g,p,{top:1,right:1,bottom:1,left:1}),h=new Kinetic.Path({name:"move-down",data:"m 79.890625,144.34114 c -1.33034,0.0861 -3.89519,-0.62188 -5.37558,-2.36579 -4.63117,-4.50662 -15.15464,-15.20689 -19.74022,-19.75982 13.28125,0 37.699431,0 50.980675,0 -3.98458,3.97238 -15.666175,15.11389 -19.574735,19.1601 -2.2501,2.13633 -4.41575,3.21108 -6.29014,2.96551 z",fill:"#002f5b"}),c=new Kinetic.Group,a(h,c,{top:1,right:1,bottom:1,left:1}),u=new Kinetic.Path({name:"move-left",data:"m 16.4195,79.625463 c -0.0861,-1.33034 0.62187,-3.89519 2.36579,-5.37558 4.50661,-4.63117 15.20688,-15.154641 19.75981,-19.740221 0,13.281251 0,37.699432 0,50.980678 -3.97238,-3.98458 -15.11388,-15.666177 -19.16009,-19.574737 -2.13633,-2.2501 -3.21108,-4.41575 -2.96551,-6.29014 z",fill:"#002f5b"}),l=new Kinetic.Group,a(u,l,{top:1,right:1,bottom:1,left:1}),f=new Kinetic.Path({name:"move-right",data:"m 144.51063,79.625463 c 0.0861,-1.33034 -0.62187,-3.89519 -2.36579,-5.37558 -4.50661,-4.63117 -15.20688,-15.154641 -19.75981,-19.740221 0,13.281251 0,37.699432 0,50.980678 3.97238,-3.98458 15.11388,-15.666177 19.16009,-19.574737 2.13633,-2.2501 3.21108,-4.41575 2.96551,-6.29014 z",fill:"#002f5b"}),d=new Kinetic.Group,a(f,d,{top:1,right:1,bottom:1,left:1}),v=new Kinetic.Path({name:"rotate-left",data:"m 63.549645,43.903476 c -4.051172,3.141613 -4.86745,3.807632 -8.982179,7.207666 3.926191,3.177594 5.004877,4.030233 8.823228,7.251775 -0.0074,-0.980005 -0.0066,-3.146924 0.04449,-4.065144 4.106205,0.119103 7.834492,3.421084 8.410393,7.495003 0.711968,3.993027 -1.6977,8.234493 -5.473566,9.698006 -3.682132,1.56955 -8.30283,0.255036 -10.596983,-3.027723 -1.08557,-1.486355 -1.687637,-3.316131 -1.702482,-5.156273 -0.881256,0.01121 -5.332159,0.16828 -6.508818,0.183249 -0.01968,6.126032 4.027538,11.981765 9.742647,14.168465 5.615185,2.294449 12.501401,0.839122 16.688174,-3.556637 4.303238,-4.2838 5.610481,-11.202964 3.189986,-16.768207 -2.217455,-5.420561 -7.761336,-9.245768 -13.612234,-9.402515 -0.0074,-0.697003 -0.01517,-3.330658 -0.02265,-4.027665 z",fill:"#002f5b"}),m=new Kinetic.Group,a(v,m,{top:1,right:1,bottom:1,left:1}),_=new Kinetic.Path({name:"rotate-right",data:"m 97.792494,43.903081 c 4.051166,3.141613 4.867456,3.807632 8.982176,7.207666 -3.92619,3.177594 -5.00488,4.030233 -8.823225,7.251775 0.0075,-0.980005 0.0064,-3.146924 -0.04449,-4.065144 -4.106206,0.119103 -7.834492,3.421084 -8.410394,7.495003 -0.711963,3.993027 1.697702,8.234493 5.473563,9.698006 3.682135,1.56955 8.302826,0.255036 10.596996,-3.027723 1.08556,-1.486355 1.68763,-3.316131 1.70247,-5.156273 0.88126,0.01121 5.33216,0.16828 6.50882,0.183249 0.0197,6.126032 -4.02754,11.981765 -9.74264,14.168465 -5.615194,2.294449 -12.501404,0.839122 -16.688176,-3.556637 -4.303243,-4.2838 -5.610483,-11.202964 -3.189997,-16.768207 2.217465,-5.420561 7.761342,-9.245768 13.612245,-9.402515 0.0075,-0.697003 0.01515,-3.330658 0.02268,-4.027665 z",fill:"#002f5b"}),y=new Kinetic.Group,a(_,y,{top:1,right:1,bottom:1,left:1}),C=new Kinetic.Path({name:"scale-up",data:"m 58.695992,85.247273 0,10.746446 -10.780029,0 0,7.556101 10.780029,0 0,10.78003 7.556095,0 0,-10.78003 10.746446,0 0,-7.556101 -10.746446,0 0,-10.746446 -7.556095,0 z",fill:"#002f5b"}),S=new Kinetic.Group,a(C,S,{top:1,right:1,bottom:1,left:1}),x=new Kinetic.Path({name:"scale-down",data:"m 83.312152,103.55285 c 0,-2.51517 0,-5.030354 0,-7.545529 9.694385,0 19.388768,0 29.083158,0 0,2.515175 0,5.030359 0,7.545529 -9.69439,0 -19.388773,0 -29.083158,0 z",fill:"#002f5b"}),b=new Kinetic.Group,a(x,b,{top:12,right:1,bottom:12,left:1}),e=new Kinetic.Path({name:"deco",data:"M 9.3388534,73.047636 C 31.134068,51.438565 52.575119,29.438068 74.592959,8.0750497 81.861872,3.0857701 88.168649,10.267054 92.802364,15.188858 112.4616,35.033922 132.51172,54.525323 151.92495,74.59296 c 4.98928,7.268912 -2.192,13.575689 -7.11381,18.209404 -19.84506,19.659236 -39.33646,39.709356 -59.404103,59.122586 -7.26891,4.98929 -13.575688,-2.192 -18.209407,-7.11381 C 47.538401,124.96608 27.488281,105.47468 8.0750443,85.407041 5.5015008,81.653446 6.0587583,76.203955 9.3388534,73.047636 z",fill:"#fefefe",strokeRed:0,strokeGreen:47,strokeBlue:91,strokeAlpha:.8,strokeWidth:1}),K=new Kinetic.Stage({container:"container-"+i,width:160,height:160}),s=new Kinetic.Layer,n=new Kinetic.Group({x:0,y:0,scale:{x:1,y:1}}),n.add(e,p,c,l,d),o([p,c,d,l],s,"group"),n.add(m,y,S,b),o([m,y,S,b],s,"group"),s.add(n),K.add(s),(t=function(t){var e,n,i,s;for(s=[],n=0,i=t.length;i>n;n++)e=t[n],s.push(e.on("click",function(){return r.pub(w.target,this.attrs.pathName)}));return s})([p,c,d,l,m,y,S,b])}}})}})}.call(this),define("hbs!modules/main-center",["handlebars"],function(t){return t=t||this.Handlebars,t.template(function(t,e,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var s,a,o="",c="function",h=this.escapeExpression;return o+='<div class="tac mb">\r\n<button type="button" class="btn btn-primary" id="fs">frame styles</button>\r\n<button type="button" class="btn btn-primary" id="fc">frame colors</button>\r\n</div>\r\n<div id="container-',(a=n.target)?s=a.call(e,{hash:{},data:r}):(a=e&&e.target,s=typeof a===c?a.call(e,{hash:{},data:r}):a),o+=h(s)+'" class="tac"></div>'})}),define("hbs!modules/frame-styles",["handlebars"],function(t){return t=t||this.Handlebars,t.template(function(t,e,n,i,r){function s(t,e){var i,r,s,a="";return a+='\r\n                <div class="col-xs-18 col-sm-6 col-md-4 col-list">\r\n                  <div class="thumbnail">\r\n                    <a href="#" class="select-frame">\r\n                      '+d((r=n.element||t&&t.element,s={hash:{},data:e},r?r.call(t,t&&t.image,s):u.call(t,"element",t&&t.image,s)))+'\r\n                      <div class="caption">\r\n                        <p>',(r=n.title)?i=r.call(t,{hash:{},data:e}):(r=t&&t.title,i=typeof r===f?r.call(t,{hash:{},data:e}):r),a+=d(i)+"</p>\r\n                      </div>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              "}function a(){return"\r\n                <p>No frame styles.</p>\r\n              "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var o,c,h,l="",u=n.helperMissing,d=this.escapeExpression,f="function",p=this;return l+='<div id="frame-styles-modal" class="modal">\r\n  <div class="modal-dialog full-modal">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\r\n        <h4 class="modal-title">Choose Your Frame Style</h4>\r\n      </div>\r\n      <div class="modal-body full-body">\r\n        \r\n        <div class="container-fluid list-view">\r\n\r\n              ',c=n.collection||e&&e.collection,h={hash:{tag:"div","class":"row"},inverse:p.program(3,a,r),fn:p.program(1,s,r),data:r},o=c?c.call(e,h):u.call(e,"collection",h),(o||0===o)&&(l+=o),l+="\r\n\r\n        </div>\r\n                \r\n                \r\n      </div>\r\n      \r\n    </div>\r\n  </div>\r\n</div>"})}),function(){define("cs!modules/frame-styles",["thorax","hbs!modules/frame-styles"],function(t,e){var n,i;return n=new t.Collection([{title:"Wayfarer",src:"labs/designer/images/frames/01.png"},{title:"Pixel",src:"labs/designer/images/frames/02.png"},{title:"Aviator",src:"labs/designer/images/frames/03.png"}]),n.imagesLoaded=!1,n.loadImages=function(){var t,e,n,i,r;for(r=this.models,n=0,i=r.length;i>n;n++)t=r[n],e=new Image,e.src=t.get("src"),t.set({image:e});return this.imagesLoaded=!0},i=t.View.extend({events:{"click .select-frame":function(t){return this.app.pub("frame-style",$(t.target).model()),this.onClose(),!1},"click .close":function(){return this.onClose()},ready:function(){var t;return t=this,this.$el.show(300,function(){})}},onClose:function(){var t;return t=this,this.$el.slideUp("slow",function(){return t.release(),t.app.views[t.name]=null,t.app=null})}}),i.getInstance=function(t,r,s){return null==t.views[r]&&(n.imagesLoaded||n.loadImages(),t.views[r]=new i({collection:n,app:t,template:e,name:r}),t.views[r].appendTo(s)),t.views[r]},i})}.call(this),define("hbs!modules/frame-colors",["handlebars"],function(t){return t=t||this.Handlebars,t.template(function(t,e,n,i,r){function s(t,e){var i,r,s,a="";return a+='\r\n                <div class="col-xs-18 col-sm-6 col-md-2 col-list">\r\n                  <div class="thumbnail">\r\n                    <a href="#" class="select-color">\r\n                      '+d((r=n.element||t&&t.element,s={hash:{},data:e},r?r.call(t,t&&t.image,s):u.call(t,"element",t&&t.image,s)))+'\r\n                      <div class="caption">\r\n                        <p>',(r=n.title)?i=r.call(t,{hash:{},data:e}):(r=t&&t.title,i=typeof r===f?r.call(t,{hash:{},data:e}):r),a+=d(i)+"</p>\r\n                      </div>\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              "}function a(){return"\r\n                <p>No frame colors.</p>\r\n              "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var o,c,h,l="",u=n.helperMissing,d=this.escapeExpression,f="function",p=this;return l+='<div id="frame-styles-modal" class="modal">\r\n  <div class="modal-dialog full-modal">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\r\n        <h4 class="modal-title">Choose Your Frame Color</h4>\r\n      </div>\r\n      <div class="modal-body full-body">\r\n        \r\n        <div class="container-fluid list-view">\r\n\r\n              ',c=n.collection||e&&e.collection,h={hash:{tag:"div","class":"row"},inverse:p.program(3,a,r),fn:p.program(1,s,r),data:r},o=c?c.call(e,h):u.call(e,"collection",h),(o||0===o)&&(l+=o),l+="\r\n\r\n        </div>\r\n\r\n                \r\n\r\n      </div>\r\n      \r\n    </div>\r\n  </div>\r\n</div>"})}),function(){define("cs!modules/frame-colors",["thorax","hbs!modules/frame-colors"],function(t,e){var n,i,r,s;
r={Wayfarer:new t.Collection([{title:"Black",src:"labs/designer/images/frames/01.png"},{title:"Red",src:"labs/designer/images/frames/01-red.png"},{title:"Green",src:"labs/designer/images/frames/01-green.png"},{title:"Blue",src:"labs/designer/images/frames/01-blue.png"}]),Pixel:new t.Collection([{title:"Black",src:"labs/designer/images/frames/02.png"},{title:"Red",src:"labs/designer/images/frames/02-red.png"},{title:"Green",src:"labs/designer/images/frames/02-green.png"},{title:"Blue",src:"labs/designer/images/frames/02-blue.png"}]),Aviator:new t.Collection([{title:"Black",src:"labs/designer/images/frames/03.png"},{title:"Red",src:"labs/designer/images/frames/03-red.png"},{title:"Neon Green",src:"labs/designer/images/frames/03-neongreen.png"},{title:"Neon Blue",src:"labs/designer/images/frames/03-neonblue.png"}])};for(i in r)s=r[i],r[i].imagesLoaded=!1,r[i].loadImages=function(){var t,e,n,i,r;for(r=this.models,n=0,i=r.length;i>n;n++)t=r[n],e=new Image,e.src=t.get("src"),t.set({image:e});return this.imagesLoaded=!0};return n=t.View.extend({events:{"click .select-color":function(t){return this.app.pub("frame-color",$(t.target).model()),this.onClose(),!1},"click .close":function(){return this.onClose()},ready:function(){var t;return t=this,this.$el.show(300,function(){})}},onClose:function(){var t;return t=this,this.$el.slideUp("slow",function(){return t.release(),t.app.views[t.name]=null,t.app=null})}}),n.getInstance=function(t,i,s){var a;return null==t.views[i]&&(a=r[t.designer["frame-style"]],a.imagesLoaded||a.loadImages(),t.views[i]=new n({collection:a,app:t,template:e,name:i}),t.views[i].appendTo(s)),t.views[i]},n})}.call(this),function(){define("cs!modules/main-center",["thorax","cs!modules/util/dim","hbs!modules/main-center","cs!modules/frame-styles","cs!modules/frame-colors"],function(t,e,n,i,r){var s;return s=function(e,s){var a,o,c,h;return h=function(t,e,n){var i,r,s,a,o,c;r={},s=0,a=0,i=function(e,i){return e>=i?n(t,r):void 0};for(o in e)a++;c=[];for(o in e)r[o]=new Image,r[o].onerror=function(){return i(++s,a,t,r,n)},r[o].onabort=function(){return i(++s,a,t,r,n)},r[o].onload=function(){return i(++s,a,t,r,n)},c.push(r[o].src=e[o]);return c},o=function(t,e,n){var i;return i=e[n.name]={},i.layer=new Kinetic.Layer({x:n.x,y:n.y,width:n.w,height:n.h}),i.rect=new Kinetic.Rect({x:0,y:0,width:n.w,height:n.h,draggable:!0,dragBoundFunc:function(e){var i,r,s;return i=t.find(".design-"+n.name)[0].children[0],r=i.attrs.newPos.x,s=i.attrs.newPos.y,i.x(r+(e.x-n.x)),i.y(s+(e.y-n.y)),t.draw(),{x:n.x,y:n.y}}}),i.rect.on("dragend",function(){return t.find(".design-"+n.name)[0].children[0].attrs.newPos=t.find(".design-"+n.name)[0].children[0].getAbsolutePosition()}),i.rect.on("mouseover",function(){return document.body.style.cursor="move"}),i.rect.on("mouseout",function(){return document.body.style.cursor="default"}),i.layer.add(i.rect),i.group=new Kinetic.Group({name:"design-"+n.name,x:0,y:0,clip:{x:n.x,y:n.y,width:n.w,height:n.h},scale:{x:1,y:1}}),i.control=function(e){var i,r,s,a,o;switch(i=t.find(".design-"+n.name)[0].children[0],a=i.getAbsolutePosition().x,o=i.getAbsolutePosition().y,s=i.getScale(),r=i.rotation(),e){case"move-up":i.y(o-2);break;case"move-down":i.y(o+2);break;case"move-left":i.x(a-2);break;case"move-right":i.x(a+2);break;case"scale-up":i.scale({x:s.x+.05,y:s.y+.05});break;case"scale-down":i.scale({x:s.x-.05,y:s.y-.05});break;case"rotate-left":i.rotate(-5);break;case"rotate-right":i.rotate(5);break;default:console.error("unkown: ",e)}return i.attrs.newPos=i.getAbsolutePosition(),t.draw()},i.initHandler=function(){return s.sub(n.name,function(t,e){return i.control(e)})},i.initHandler()},c=function(t,e){var n,i,r,a,c,h,l,u,d;return d=new Kinetic.Stage({container:"container-"+t.target,width:620,height:230}),c=new Kinetic.Layer,a=new Kinetic.Group({x:0,y:0,scale:{x:1,y:1}}),n=new Kinetic.Rect({width:620,height:230}),r=new Kinetic.Image({image:e.frameStyle,name:"frameStyle"}),u=new Kinetic.Image({image:e.simpleGrill,name:"simpleGrill"}),h=new Kinetic.Image({image:e.love,name:"love-left",newPos:{x:0,y:0},width:270,height:210,scale:{x:1,y:1}}),h.offset({x:h.width()/2,y:h.height()/2}),h.setPosition({x:20+h.width()/2,y:10+h.height()/2}),h.attrs.newPos=h.getAbsolutePosition(),l=new Kinetic.Image({image:e.loveb,name:"love-right",width:270,height:210,newPos:{x:0,y:0},scale:{x:1,y:1}}),l.offset({x:l.width()/2,y:l.height()/2}),l.setPosition({x:330+l.width()/2,y:10+l.height()/2}),l.attrs.newPos=l.getAbsolutePosition(),i={},o(c,i,{name:"left",x:20,y:10,w:270,h:210}),o(c,i,{name:"right",x:330,y:10,w:270,h:210}),i.left.group.add(h),i.right.group.add(l),a.add(u,r,n),c.add(i.left.group,i.right.group,a),d.add(c,i.left.layer,i.right.layer),s.designer["frame-style"]="Wayfarer",s.designer["frame-color"]="Black",s.sub("frame-style",function(t,e){var n,i,r;return s.designer["frame-style"]=e.get("title"),s.designer["frame-color"]="Black",n=a.find(".frameStyle")[0],r=n.width(),i=n.height(),n.setImage(e.get("image")),n.width(r),n.height(i),c.draw()}),s.sub("frame-color",function(t,e){var n,i,r;return s.designer["frame-color"]=e.get("title"),n=a.find(".frameStyle")[0],r=n.width(),i=n.height(),n.setImage(e.get("image")),n.width(r),n.height(i),c.draw()})},a=t.View.extend({name:"main-"+e+"-view",target:e,template:n,events:{"click #fs":function(){var t;return t=i.getInstance(s,"frame-styles-view",$("#designer-inner"))},"click #fc":function(){var t;return t=r.getInstance(s,"frame-colors-view",$("#designer-inner"))},ready:function(){var t,e;return t=this,e={frameStyle:"labs/designer/images/frames/01.png",simpleGrill:"labs/designer/images/simple-grill.png",love:"labs/designer/images/designs/love.png",loveb:"labs/designer/images/designs/loveb.png"},h(t,e,c)}}})}})}.call(this),function(){define("cs!modules/app",["jquery","backbone","epoxy","pubsub","moment","kinetic","thorax","modules/rootview","hbs!modules/testview","cs!modules/main-control","cs!modules/main-center"],function(t,e,n,i,r,s,a,o,c,h,l){var u;return"undefined"!=typeof u&&null!==u?u:u={apiRoot:"https://someapi.appspot.com",pub:i.publish,sub:i.subscribe,user:null,views:{},designer:{},start:function(){var t,n,i,r,s;return i=new e.Model({firstName:"Han",lastName:"Solo"}),n=e.Epoxy.View.extend({model:i,el:"#app-han",bindings:"data-bind",events:{"click .add":"onAdd"},onAdd:function(){var t;return t=this,this._parent.$el.hide(300,function(){return console.log("hidden"),t._parent.release()})}}),r=this,t=a.View.extend({left:new h("left",r),center:new l("center",r),right:new h("right",r),template:c,events:{rendered:function(){}}}),s=new t,this.views.root=o.getInstance().setView(s)}}})}.call(this),require(["jquery","director","cs!modules/app"],function(t,e,n){t(document).ready(function(){n.start()})}),define("main",function(){});